import{g as be,u as ye,r as a,j as e,aL as fe,a as H}from"./index-HqVKJZ4m-1746435076434.js";const je=()=>{const{categoryId:l,subCategoryId:n,subSubCategoryId:u}=be(),K=ye(),[m,f]=a.useState(""),[c,x]=a.useState(""),[p,g]=a.useState(""),[j,b]=a.useState(""),W=a.useRef(null),[y,v]=a.useState(""),[C,X]=a.useState(""),[d,h]=a.useState(""),[N,w]=a.useState(""),[S,k]=a.useState(""),[F,I]=a.useState(""),[M,$]=a.useState(""),[E,P]=a.useState(""),[q,T]=a.useState(""),[D,R]=a.useState(""),[U,Y]=a.useState(),[A,L]=a.useState(),[z,B]=a.useState(0),[O,J]=a.useState("active"),G=a.useRef(null);a.useEffect(()=>{(async()=>{let o="";l&&n&&u?o=`/api/chemicalCategory/getSpecificSubSubcategory?categoryId=${l}&subCategoryId=${n}&subSubCategoryId=${u}`:l&&n?o=`/api/chemicalCategory/getSpecificSubcategory?categoryId=${l}&subCategoryId=${n}`:l&&(o=`/api/chemicalCategory/getSpecificCategoryById?categoryId=${l}`);try{const t=await H.get(o,{withCredentials:!0}),{category:r,details:te,photo:ae,alt:se,imgtitle:oe,slug:le,metatitle:re,metadescription:ne,metakeywords:ie,metalanguage:ce,metacanonical:de,metaschema:ue,otherMeta:me,changeFreq:he,priority:pe,status:ge}=t.data;f(r),X(ae),g(se),b(oe),h(le),J(ge),v(te),w(re),k(ne),I(ie),$(ce),P(de),T(ue),R(me),L(he),B(pe)}catch(t){console.error("Error fetching data:",t)}})()},[l,n,u]);const Q=s=>{const o=s.target.files[0];x(o)},V=()=>{x(""),g(""),b("")},Z=()=>{let s="https://rndtechnosoft.com";return l&&!n?`${s}/${d}`:l&&n?`${s}/${d}`:`${s}/${d}`};a.useEffect(()=>{Y(Z())},[d,l,n]),a.useEffect(()=>{const s=setTimeout(()=>{h(m.replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))},300);return()=>clearTimeout(s)},[m]),a.useEffect(()=>{const s=setTimeout(()=>{h(o=>o.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-"))},300);return()=>clearTimeout(s)},[d]);const _=async s=>{s.preventDefault();let o="";l&&n&&u?o=`/api/chemicalCategory/updatesubsubcategory?categoryId=${l}&subCategoryId=${n}&subSubCategoryId=${u}`:l&&n?o=`/api/chemicalCategory/updateSubCategory?categoryId=${l}&subCategoryId=${n}`:l&&(o=`/api/chemicalCategory/updateCategory?categoryId=${l}`);const t=new FormData;t.append("category",m),t.append("alt",p),t.append("imgtitle",j),t.append("slug",d),t.append("metatitle",N||""),t.append("metakeywords",F||""),t.append("metadescription",S||""),t.append("metalanguage",M||""),t.append("metacanonical",E||""),t.append("metaschema",q||""),t.append("otherMeta",D||""),t.append("url",U),t.append("changeFreq",A||""),t.append("priority",z),t.append("status",O),t.append("details",y),c&&(console.log("Photo file:",c),console.log("Photo file name:",c.name),console.log("Photo file type:",c.type),console.log("Photo file size:",c.size),t.append("photo",c));try{const r=await H.put(o,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});K("/chemical-category")}catch(r){console.error("Error updating data:",r.response?r.response.data:r.message),alert(r.response?r.response.data.error:"An error occurred")}},i=s=>o=>{o.stopPropagation();const t=o.target,r=o.target.value;s(r),document.activeElement!==t&&setTimeout(()=>{t.focus()},0)},ee=a.useMemo(()=>e.jsx(fe,{ref:W,value:y,tabIndex:-1,onBlur:s=>{console.log("JoditEditor onBlur triggered"),v(s)},config:{readonly:!1,toolbarSticky:!1,autofocus:!1,uploader:{insertImageAsBase64URI:!0},buttons:["bold","italic","underline","strikethrough","|","ul","ol","|","font","fontsize","brush","paragraph","|","image","table","link","|","align","undo","redo"],style:{backgroundColor:"white"},events:{afterPaste:s=>{s.editor.editor.querySelectorAll("*").forEach(r=>{r.style.backgroundColor||(r.style.backgroundColor="white")})}}}}),[y]);return e.jsxs("form",{onSubmit:_,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Category"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block font-semibold mb-2",children:"Category"}),e.jsx("input",{id:"category",value:m,onChange:i(f),className:"w-full p-2 border rounded",rows:"3",required:!0,ref:G})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),e.jsx("input",{type:"file",name:"photo",id:"photo",onChange:Q,className:"border rounded",accept:"image/*"}),(c||C)&&e.jsxs("div",{className:"mt-2 w-56 relative group",children:[e.jsx("img",{src:c?URL.createObjectURL(c):`/api/logo/download/${C}`,alt:p||"Category Image",className:"h-32 w-56 object-cover"}),e.jsx("button",{type:"button",onClick:V,className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600",children:"X"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),e.jsx("input",{id:"alt",value:p,onChange:i(g),className:"w-full p-2 border rounded",rows:"3",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imgtitle",className:"block font-semibold mb-2",children:"Image Title Text"}),e.jsx("input",{id:"imgtitle",value:j,onChange:i(b),className:"w-full p-2 border rounded",rows:"3",required:!0})]})]})]}),ee,e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{id:"slug",value:d,onChange:i(h),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{type:"text",id:"url",value:U,disabled:!0,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metatitle",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("input",{id:"metatitle",value:N,onChange:i(w),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metadescription",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("input",{id:"metadescription",value:S,onChange:i(k),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metakeywords",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("input",{id:"metakeywords",value:F,onChange:i(I),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metacanonical",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("input",{id:"metacanonical",value:E,onChange:i(P),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metalanguage",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("input",{id:"metalanguage",value:M,onChange:i($),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"otherMeta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("input",{id:"otherMeta",value:D,onChange:i(R),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metaschema",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("input",{id:"metaschema",value:q,onChange:i(T),className:"w-full p-2 border rounded",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:z,onChange:s=>B(s.target.value),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:A,onChange:s=>L(s.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:O,onChange:s=>J(s.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Update Category"})]})};export{je as default};
