import{f,u as q,dB as F,dC as I,dy as N,r as S,j as e,I as u,B as v}from"./index-pxV5F7Vk-1745663305082.js";import{u as E}from"./index.esm-BCTzha71-1745663305082.js";import{S as C,a as B,b as L,c as w,d as M}from"./select-Dr-ptvNE-1745663305082.js";import{F as T,a as n,b as i,c as l,d as o,e as m}from"./form-Cc1AErK_-1745663305082.js";import{t as U,o as V,s as d}from"./index-DPJPFfae-1745663305082.js";import{B as A}from"./BreadCrumb-Dxne8PjT-1745663305082.js";import"./index-BQK-nP0v-1745663305082.js";import"./index-DGqN-AtJ-1745663305082.js";import"./check-BHNyHTdG-1745663305082.js";import"./chevron-up-brwMqNrW-1745663305082.js";import"./breadcrumb-CMLZ6XKS-1745663305082.js";import"./chevron-right-CwFtWmOi-1745663305082.js";const G=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],P=V({companyName:d().min(2,{message:"Company name must be at least 2 characters"}),name:d().min(2,{message:"Full name must be at least 2 characters"}),email:d().email({message:"Invalid email address"}),mobile:d().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:d().min(2,{message:"Address must be at least 2 characters"}),status:d({required_error:"Please select a status"})});function Z({onClose:Q}){const{id:j}=f(),p=q(),{data:r,isLoading:y}=F(j),[b,{isLoading:h}]=I(),{data:x,isLoading:_}=N(),a=E({resolver:U(P),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});S.useEffect(()=>{r&&a.reset({companyName:r.companyName||"",name:r.name||"",email:r.email||"",mobile:r.mobile||"",address:r.address||"",status:r.status||"New Inquiry"})},[r,a]);const g=async s=>{var c;try{const t=await b({id:j,...s}).unwrap();a.reset(),p("/inquiry-list")}catch(t){alert({title:"Error",description:((c=t==null?void 0:t.data)==null?void 0:c.message)||"Failed to update inquiry",variant:"destructive"})}};return y?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(A,{items:G})}),e.jsx(T,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),e.jsx(n,{control:a.control,name:"companyName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Company Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter company name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter full name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(u,{type:"email",placeholder:"Enter email",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Mobile Number"}),e.jsx(o,{children:e.jsx(u,{type:"tel",placeholder:"Enter 10-digit mobile",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter address",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>{var c;return e.jsxs(i,{children:[e.jsx(l,{children:"Status"}),e.jsxs(C,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(B,{children:e.jsx(L,{placeholder:"Select status"})})}),e.jsx(w,{children:(c=x==null?void 0:x.data)==null?void 0:c.map(t=>e.jsx(M,{value:t.status,children:t.status},t._id))})]}),e.jsx(m,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(v,{type:"submit",disabled:h,children:h?"Updating...":"Update Inquiry"})})]})})]})}export{Z as default};
