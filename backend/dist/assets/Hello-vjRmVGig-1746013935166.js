import{j as e,C as _,bk as $,X as T,r as o,u as B,T as A,l as R,m as w,n as f,o as F,p as b,B as M,b as I,L as G,f as k,k as H,g as P}from"./index-BIIJyams-1746013935166.js";import{B as E}from"./BreadCrumb-VD_eDWws-1746013935166.js";import{C as V}from"./checkbox-CJ3SI-ip-1746013935166.js";import{S as z,a as U,b as O,c as W,d as y}from"./select-BGVuKdHm-1746013935166.js";import{B as L}from"./Banner-DOBD0lgj-1746013935166.js";import"./index-BEgT-rL5-1746013935166.js";import"./check-Bw7T2Kpn-1746013935166.js";import"./index-C5D7rP3r-1746013935166.js";import"./chevron-up-DafRvSnb-1746013935166.js";function X({categorySlug:n,chemicals:s,selectedGrades:a,setSelectedGrades:c}){const d=(t,l)=>{c(t?i=>[...i,l]:i=>i.filter(u=>u!==l))},m=t=>{c(l=>l.filter(i=>i!==t))};return e.jsx(_,{className:"md:col-span-1 bg-[#dee8ff] h-fit rounded-none p-3",children:e.jsxs($,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),a.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-main py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:a.map(t=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:t}),e.jsx("button",{onClick:()=>m(t),className:"text-gray-600 hover:text-red-600",children:e.jsx(T,{size:16})})]},t))})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:s.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:t._id,checked:a.includes(t.grade),onCheckedChange:l=>d(l,t.grade)}),e.jsx("label",{htmlFor:t._id,className:"text-sm",children:t.grade})]},t._id))})]})})]})})}const Y=({chemicals:n})=>{const[s,a]=o.useState(1),c=10,d=B();if(!n||n.length===0)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const m=n.length,t=Math.ceil(m/c),l=n.slice((s-1)*c,s*c),i=r=>{a(r)},u=r=>{const h=r.replace(/\s+/g,"-").toLowerCase();console.log(`Redirecting to: /${h}`),d(`/${h}`)};return e.jsxs("div",{children:[e.jsxs(A,{children:[e.jsx(R,{children:e.jsxs(w,{className:"bg-gray-100",children:[e.jsx(f,{children:"Product Code"}),e.jsx(f,{children:"Product Name"}),e.jsx(f,{children:"CAS"}),e.jsx(f,{children:"TDS"}),e.jsx(f,{children:"MSDS"})]})}),e.jsx(F,{children:l.map(r=>e.jsxs(w,{children:[e.jsx(b,{children:r.auto_p_code}),e.jsx(b,{children:e.jsx("button",{className:"text-main hover:no-underline",onClick:()=>u(r.name),children:r.name})}),e.jsx(b,{children:r.cas_number}),e.jsx(b,{children:"Specs"}),e.jsx(b,{children:"MSDS"})]},r.auto_p_code))})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("nav",{className:"flex space-x-1","aria-label":"Pagination",children:Array.from({length:t},(r,h)=>h+1).map(r=>e.jsx(M,{variant:r===s?"outline":"default",size:"sm",className:`min-w-[40px] ${r===s?"bg-main text-white hover:bg-main_light":"hover:bg-blue-50"}`,onClick:()=>i(r),children:r},r))})})]})};function q({letter:n,totalItems:s,itemsPerPage:a,setItemsPerPage:c}){return e.jsx("div",{className:"w-full mb-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:['Showing Products for "',n,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground uppercase tracking-wide",children:"Fine Chemicals & Laboratory Reagents for Research & Industries"}),e.jsxs("div",{className:"bg-blue-50 flex items-center px-3 py-1 justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["1 to ",a," of ",s," item(s) displayed"]}),e.jsxs(z,{value:a.toString(),onValueChange:d=>c(Number(d)),children:[e.jsx(U,{className:"w-[120px]",children:e.jsx(O,{placeholder:"Show per page"})}),e.jsxs(W,{children:[e.jsx(y,{value:"10",children:"10 per page"}),e.jsx(y,{value:"25",children:"25 per page"}),e.jsx(y,{value:"50",children:"50 per page"}),e.jsx(y,{value:"100",children:"100 per page"})]})]})]})]})})}function J(){const n=I(),{selectedLetter:s,chemicals:a}=n.state||{};console.log({selectedLetter:s,chemicals:a});const[c,d]=o.useState([]),[m,t]=o.useState(50),[l,i]=o.useState([]),[u,r]=o.useState(!0),[h,N]=o.useState(null);o.useEffect(()=>{a&&s&&(async()=>{try{r(!0);const p=await fetch(`/api/chemical/getChemicalByCategoryAndAlphabet?categoryslug=${a}&alphabet=${s}`);if(!p.ok)throw new Error("Failed to fetch chemicals");const j=await p.json();i(j)}catch(p){N(p.message)}finally{r(!1)}})()},[a,s]);const g=c.length?l.filter(v=>c.includes(v.grade)):l,x=g.length;return u?e.jsx("div",{children:"Loading..."}):h?e.jsxs("div",{children:["Error loading chemicals: ",h]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto mb-10 ",children:[e.jsx(E,{chemicals:a,categorySlug:a,selectedLetter:s}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(X,{categorySlug:a,chemicals:l,selectedGrades:c,setSelectedGrades:d}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(q,{letter:s,totalItems:x,itemsPerPage:m,setItemsPerPage:t}),e.jsx(Y,{selectedLetter:s,categorySlug:a,chemicals:g})]})]})]})})}function K({title:n,image:s,products:a,slug:c,subCategorySlug:d}){console.log("SubCategoryProductCard",d);const m=B(),t=()=>{a&&a.length>0?(a[0].slug,m(`/${c}/${d}`)):console.warn("No products available to redirect.")};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-[#0a3161] mb-2",children:n}),e.jsx("div",{className:"h-1 w-16 bg-[#0a3161] mb-6"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0 border bg-[#2b60d9]",children:e.jsx("div",{className:"w-64 h-64 rounded-full m-4 border overflow-hidden",children:e.jsx("img",{src:s||"/placeholder.svg",alt:n,className:"w-full h-full object-cover"})})}),e.jsx("div",{className:"flex-grow",children:e.jsx("div",{className:"flex flex-col gap-2 max-h-[220px] overflow-y-auto pr-2 scrollbar",children:a&&a.length>0?a.map((l,i)=>e.jsx("div",{children:e.jsx(G,{to:`/${l.subCategorySlug}/${l.slug}`,className:"flex items-center gap-2 bg-gray-200",children:e.jsx("p",{className:" py-2 px-5 text-sm rounded-md hover:text-[#2b60d9] cursor-pointer",children:l.name})})},i)):e.jsx("p",{className:"text-gray-500 bg-gray-200 py-2 px-5 text-sm rounded-md",children:"No products available for this subcategory."})})})]}),e.jsx("button",{className:"mt-6 bg-[#e95821] float-start hover:bg-[#eb4e10] text-white font-bold py-2 px-5 rounded transition-colors",onClick:t,children:"VIEW MORE"})]})}function Q(){var N;const{slug:n}=k(),[s,a]=o.useState(null),[c,d]=o.useState({}),[m,t]=o.useState(!0),[l,i]=o.useState([]),[u,r]=o.useState(!0),h=location.pathname.replace(/^\//,"")||"introduction";return o.useEffect(()=>{(async()=>{try{const x=await P.get(`/api/banner/getByPageSlug?pageSlug=${h}`);i(x.data||[])}catch(x){console.error("Failed to fetch banner:",x)}finally{r(!1)}})()},[h]),o.useEffect(()=>{(async()=>{try{const x=await P.get(`/api/chemicalCategory/getSpecificCategory?slug=${n}`),{category:v,products:p}=x.data;a(v);const j={};p.forEach(S=>{const C=S.subCategoryId;j[C]||(j[C]=[]),j[C].push(S)}),d(j)}catch(x){console.error("Error fetching category data:",x)}finally{t(!1)}})()},[n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[l&&l.length>0?e.jsx(L,{imageUrl:`/api/image/download/${l[0].image}`}):e.jsx(L,{imageUrl:H}),e.jsx("div",{className:"container mx-auto px-4 max-w-7xl -mt-12 relative z-10",children:e.jsx(E,{categorySlug:s==null?void 0:s.category,slug:n})})]}),e.jsxs("div",{className:"container mx-auto px-4 pb-8 max-w-7xl",children:[e.jsx("h1",{className:"text-4xl font-bold text-[#0a3161] mb-4",children:(s==null?void 0:s.category)||"INDUSTRIAL OILS"}),e.jsx("div",{className:"h-1 w-24 bg-[#0a3161] mb-6"}),e.jsx("p",{className:"text-gray-700 mb-10",dangerouslySetInnerHTML:{__html:(s==null?void 0:s.details)||"Explore our range of industrial oils and lubricants."}}),m?e.jsx("p",{children:"Loading products..."}):((N=s==null?void 0:s.subCategories)==null?void 0:N.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.subCategories.map((g,x)=>e.jsx(K,{slug:n,subCategorySlug:g.slug,title:g.category,image:`/api/logo/download/${g.photo}`,products:c[g._id]||[]},x))}):e.jsx("p",{children:"No categories found."})]})]})}function ce(){const n=I(),{number:s,slug:a}=k(),c=n.pathname.startsWith("/products");return e.jsx("div",{children:c?e.jsx(J,{}):e.jsx(Q,{})})}export{ce as default};
