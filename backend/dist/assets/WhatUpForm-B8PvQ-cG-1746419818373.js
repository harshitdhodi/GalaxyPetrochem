import{ch as g,cP as x,r as m,j as e}from"./index-CyqvOuOg-1746419818373.js";import{F as s}from"./index-DzvSw93u-1746419818373.js";import{B as a}from"./Breadcrumb-h00BRZ3S-1746419818373.js";import{I as l}from"./index-Cw6CtmGJ-1746419818373.js";import{B as j}from"./index-C3bxH8TE-1746419818373.js";import{s as U}from"./index-DOojfaHn-1746419818373.js";import"./toArray-CKiapHOW-1746419818373.js";import"./extends-rM07bN2b-1746419818373.js";import"./AntdIcon-DOEEMSan-1746419818373.js";import"./index-BMkDlJCN-1746419818373.js";import"./CheckCircleFilled-BDwN-65_-1746419818373.js";import"./ExclamationCircleFilled-LLNef6Rn-1746419818373.js";import"./dropdown-DkYwa0fm-1746419818373.js";import"./EllipsisOutlined-BoRLgxJq-1746419818373.js";import"./getAllowClear-CJDPFZL7-1746419818373.js";import"./Input-CWHKnMyb-1746419818373.js";import"./EyeOutlined-Bhs2_IEd-1746419818373.js";import"./TextArea-DXtIHlV4-1746419818373.js";import"./InfoCircleFilled-DJPoA66N-1746419818373.js";const Q=({onClose:p})=>{const[i]=s.useForm(),{data:t,isLoading:d,refetch:u}=g(),[c,{isLoading:h}]=x(),[r,f]=m.useState(null);m.useEffect(()=>{t&&t.length>0&&(i.setFieldsValue(t[0]),f(t[0]))},[t,i]);const I=async o=>{try{if(console.log("Updating WhatsUp Info with values:",o),!r||!r._id)throw new Error("Invalid initialValues: Missing _id");await c({id:r._id,...o}).unwrap(),await u(),U.success("WhatsUp Info updated successfully!"),i.resetFields(),p()}catch(n){console.log("Failed to save WhatsUp Info:",n),console.log(n.message||"Failed to update WhatsUp Info.")}};return d?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsxs(a,{className:"mb-5",children:[e.jsx(a.Item,{children:"Home"}),e.jsx(a.Item,{children:"WhatsUp Info"})]}),e.jsxs(s,{form:i,layout:"vertical",initialValues:r,onFinish:I,children:[e.jsx(s.Item,{name:"message",label:"Message",rules:[{required:!0,message:"Please input the message!"}],children:e.jsx(l.TextArea,{})}),e.jsx(s.Item,{name:"number",label:"Number",rules:[{required:!0,message:"Please input the number!"},{pattern:/^[0-9]+$/,message:"Number must contain only digits!"}],children:e.jsx(l,{})}),e.jsx(s.Item,{children:e.jsx(j,{type:"primary",htmlType:"submit",loading:h,children:"Update"})})]})]})};export{Q as default};
