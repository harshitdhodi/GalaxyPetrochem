import{u as U,eg as A,r as o,j as e,L as x,aA as M,g as C,R as j}from"./index-pxV5F7Vk-1745663305082.js";import{F as n}from"./index-Div4uJ3D-1745663305082.js";import{B as m}from"./Breadcrumb-B5snZWHz-1745663305082.js";import{R as D}from"./HomeOutlined-CSVsw_H0-1745663305082.js";import{S as F}from"./index-DRIINZSM-1745663305082.js";import{U as f,R as b}from"./index-CyByDs6M-1745663305082.js";import{B as c}from"./index-BybzuWVW-1745663305082.js";import{I as p}from"./index-Bngn6tE2-1745663305082.js";import{s as i}from"./index-B7AI3bRi-1745663305082.js";import"./CheckCircleFilled-Cp2-FAB3-1745663305082.js";import"./ExclamationCircleFilled-CnrITCO8-1745663305082.js";import"./dropdown-CXDBCN-k-1745663305082.js";import"./EllipsisOutlined-D0B4H0TJ-1745663305082.js";import"./getAllowClear-DWvMdzzD-1745663305082.js";import"./CheckOutlined-BIHi7Ikt-1745663305082.js";import"./Input-e0_lhlda-1745663305082.js";import"./DeleteOutlined-VGG7j7x--1745663305082.js";import"./DownloadOutlined-Wrz8VMpn-1745663305082.js";import"./TextArea-DDdcYleZ-1745663305082.js";import"./InfoCircleFilled-xYJVfIFE-1745663305082.js";const{Option:u}=F,re=()=>{const I=U(),[d]=n.useForm(),[y]=A(),[q,l]=o.useState(null),[L,B]=o.useState([]),[N,P]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const t=await C.get("/api/menulist/get-menu");t.data.success?B(t.data.data):i.error("Failed to load menu list")}catch(t){console.error("Error fetching menu list:",t),i.error("Error fetching menu list")}finally{P(!1)}})()},[]);const R=async a=>{var t,r,h,g;try{const s=new FormData;if((r=(t=a.image)==null?void 0:t[0])!=null&&r.originFileObj)s.append("image",a.image[0].originFileObj),s.append("imgName",a.imgName);else{i.error("Please select an image");return}if((g=(h=a.photo)==null?void 0:h[0])!=null&&g.originFileObj)s.append("photo",a.photo[0].originFileObj);else{i.error("Please select a photo");return}s.append("title",a.title),s.append("altName",a.altName),s.append("details",a.details),s.append("pageSlug",a.pageSlug),await y(s),i.success("Banner created successfully"),I("/banner-table")}catch(s){console.error(s),i.error("Failed to create banner")}},S=a=>{const t=a.fileList[0];if(t!=null&&t.originFileObj){const r=new FileReader;r.onload=()=>{l(r.result)},r.readAsDataURL(t.originFileObj),d.setFieldsValue({image:a.fileList})}else l(null)},w=a=>{const t=a.fileList[0];if(t!=null&&t.originFileObj){const r=new FileReader;r.onload=()=>{l(r.result)},r.readAsDataURL(t.originFileObj),d.setFieldsValue({photo:a.fileList})}else l(null)},O=a=>e.jsxs(j.Fragment,{children:[e.jsx(u,{value:a.parent.path,style:{fontWeight:"bold"},children:a.parent.name}),a.children.map(t=>e.jsxs(j.Fragment,{children:[e.jsxs(u,{value:t.path,style:{paddingLeft:20},children:[e.jsx("span",{children:" ├── "}),t.name]}),t.subChildren.map(r=>e.jsxs(u,{value:r.path,style:{paddingLeft:40},children:[e.jsx("span",{children:"├────"})," ",r.name]},r._id))]},t._id))]},a._id);return e.jsxs("div",{children:[e.jsxs(m,{style:{padding:"16px 24px"},children:[e.jsx(m.Item,{children:e.jsxs(x,{to:"/dashboard",children:[e.jsx(D,{})," Dashboard"]})}),e.jsx(m.Item,{children:e.jsx(x,{to:"/banner-table",children:"Banner Management"})}),e.jsx(m.Item,{children:"Add New Banner"})]}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),e.jsxs(n,{form:d,layout:"vertical",onFinish:R,children:[e.jsx(n.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:e.jsx(F,{placeholder:"Select a menu item",loading:N,children:L.map(a=>O(a))})}),e.jsx(n.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:e.jsx(f,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:S,children:e.jsx(c,{icon:e.jsx(b,{}),children:"Upload Image"})})}),e.jsx(n.Item,{name:"photo",label:"Photo",rules:[{required:!0,message:"Please upload a photo!"}],children:e.jsx(f,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:w,children:e.jsx(c,{icon:e.jsx(b,{}),children:"Upload Photo"})})}),e.jsx(n.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:e.jsx(p,{})}),e.jsx(n.Item,{name:"title",label:"Title",children:e.jsx(p,{})}),e.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:e.jsx(p,{})}),e.jsx(n.Item,{name:"details",label:"Details",children:e.jsx(M,{theme:"snow"})}),e.jsx(n.Item,{children:e.jsx(c,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{re as default};
