import{b9 as e,dL as s,j as r,C as a,b6 as l,b7 as n,aD as i,I as d,B as t}from"./main-CzSo-TQq.js";import{f as c,k as o,b as m}from"./vendor-BCMiqwDy.js";import{b as x}from"./index.esm-nvYjwl0o.js";import{F as j,a as p,b as h,c as u,d as b,e as f}from"./form-DLWhWOx1.js";import{T as g}from"./textarea-DYE5AoRU.js";import{B as y}from"./BreadCrumb-DQTmRfsr.js";import"./utils-ZFgnvnbw.js";import"./chevron-right-BuWKzX76.js";const N=[{label:"Dashboard",href:"/dashboard"},{label:"Supplier Table",href:"/supplier-table"},{label:"Edit Supplier Form",href:null}];function v(){const v=c(),{id:w}=o(),{data:E,isLoading:S}=e(w),[C]=s(),[D,F]=m.useState(!1),[L,U]=m.useState(null),[_,B]=m.useState(null),I=x({defaultValues:{name:"",mobile:"",email:"",website:"",contact_person:"",address:"",country:"",city:"",description:"",image:null}});m.useEffect((()=>{E&&(I.reset({name:E.name||"",mobile:E.mobile||"",email:E.email||"",website:E.website||"",contact_person:E.contact_person||"",address:E.address||"",country:E.country||"",city:E.city||"",description:E.description||""}),E.image&&B(`/api/image/download/${E.image}`))}),[E,I]);const P=e=>{const s=e.target.files[0];s&&B(URL.createObjectURL(s)),I.setValue("image",e.target.files)};return S?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ml-1",children:r.jsx(y,{items:N})}),r.jsxs(a,{className:"max-w-8xl mt-3 mx-auto",children:[r.jsx(l,{children:r.jsx(n,{className:"text-xl font-semibold",children:"Update Supplier"})}),r.jsxs(i,{children:[L&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:L}),r.jsx(j,{...I,children:r.jsxs("form",{onSubmit:I.handleSubmit((async function(e){if(w){F(!0),U(null);try{let s={...e};if(delete s.image,e.image&&e.image[0]){const r=new FormData;Object.keys(s).forEach((e=>{r.append(e,s[e])})),r.append("image",e.image[0]),await C({updatedSupplier:r,id:w}).unwrap()}else await C({updatedSupplier:s,id:w}).unwrap();v("/supplier-table")}catch(s){U(s.data?.message||"Failed to update supplier. Please try again.")}finally{F(!1)}}else U("No supplier ID found")})),className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(p,{control:I.control,name:"name",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Supplier Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter supplier name",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"contact_person",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Contact Person"}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter contact person",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"email",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter email address",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"website",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Website"}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter website URL",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"mobile",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Mobile Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter mobile number",...e})}),r.jsx(f,{})]})})]}),r.jsx(p,{control:I.control,name:"address",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Address"}),r.jsx(b,{children:r.jsx(g,{placeholder:"Enter address",...e})}),r.jsx(f,{})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(p,{control:I.control,name:"country",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Country"}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter country",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"city",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"City"}),r.jsx(b,{children:r.jsx(d,{placeholder:"Enter city",...e})}),r.jsx(f,{})]})})]}),r.jsx(p,{control:I.control,name:"description",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Description"}),r.jsx(b,{children:r.jsx(g,{placeholder:"Enter description",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:I.control,name:"image",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Upload Image"}),r.jsx(b,{children:r.jsx(d,{type:"file",onChange:P,accept:"image/*"})}),r.jsx(f,{}),_&&r.jsx("div",{className:"mt-4",children:r.jsx("img",{src:_,alt:"Preview",className:"h-32 w-32 object-cover border"})})]})}),r.jsx("div",{className:"flex gap-4",children:r.jsx(t,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:D,children:D?"Saving...":"Save Changes"})})]})})]})]})]})}export{v as default};
//# sourceMappingURL=EditSupplierForm--iACUcTH.js.map
