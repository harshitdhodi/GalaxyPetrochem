import{f,u as q,dv as F,dw as I,bH as N,r as S,j as e,I as u,B as v}from"./index-mszu3-qO-1746072466000.js";import{u as E}from"./index.esm-DMdA3fRb-1746072466000.js";import{S as C,a as L,b as w,c as B,d as M}from"./select-wlbSxirV-1746072466000.js";import{F as T,a as n,b as i,c as l,d as o,e as m}from"./form-CDSQLdkZ-1746072466000.js";import{t as U,o as V,s as d}from"./index-YjemGrYP-1746072466000.js";import{B as A}from"./BreadCrumb-0CDpmZW8-1746072466000.js";import"./index-Bph2j5eK-1746072466000.js";import"./chevron-up-DQCGdqos-1746072466000.js";import"./chevron-right-BXXZOpga-1746072466000.js";const G=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],P=V({companyName:d().min(2,{message:"Company name must be at least 2 characters"}),name:d().min(2,{message:"Full name must be at least 2 characters"}),email:d().email({message:"Invalid email address"}),mobile:d().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:d().min(2,{message:"Address must be at least 2 characters"}),status:d({required_error:"Please select a status"})});function O({onClose:Q}){const{id:j}=f(),p=q(),{data:r,isLoading:b}=F(j),[y,{isLoading:h}]=I(),{data:x,isLoading:_}=N(),a=E({resolver:U(P),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});S.useEffect(()=>{r&&a.reset({companyName:r.companyName||"",name:r.name||"",email:r.email||"",mobile:r.mobile||"",address:r.address||"",status:r.status||"New Inquiry"})},[r,a]);const g=async s=>{var c;try{const t=await y({id:j,...s}).unwrap();a.reset(),p("/inquiry-list")}catch(t){alert({title:"Error",description:((c=t==null?void 0:t.data)==null?void 0:c.message)||"Failed to update inquiry",variant:"destructive"})}};return b?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(A,{items:G})}),e.jsx(T,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),e.jsx(n,{control:a.control,name:"companyName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Company Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter company name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter full name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(u,{type:"email",placeholder:"Enter email",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Mobile Number"}),e.jsx(o,{children:e.jsx(u,{type:"tel",placeholder:"Enter 10-digit mobile",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter address",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>{var c;return e.jsxs(i,{children:[e.jsx(l,{children:"Status"}),e.jsxs(C,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(L,{children:e.jsx(w,{placeholder:"Select status"})})}),e.jsx(B,{children:(c=x==null?void 0:x.data)==null?void 0:c.map(t=>e.jsx(M,{value:t.status,children:t.status},t._id))})]}),e.jsx(m,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(v,{type:"submit",disabled:h,children:h?"Updating...":"Update Inquiry"})})]})})]})}export{O as default};
