import{g as w,d as B,r as a,bQ as L,h as S,j as e,k as p,l as A,L as x,a as C}from"./index-BBIQ2JaG-1746426193025.js";import{E as k}from"./eye-CxluttxT-1746426193025.js";function Q(){const{slug:t}=w(),{data:l}=B(),[n,c]=a.useState(t||null),[m,u]=a.useState(""),[i,j]=a.useState([]),[E,f]=a.useState(!0),o=location.pathname.replace(/^\//,"")||"introduction";console.log(o);const{data:g,isLoading:y}=L(n,{skip:!n}),{data:h,isLoading:N}=S(void 0,{skip:!!n});a.useEffect(()=>{c(t||null)},[t]),a.useEffect(()=>{if(t&&l){const s=l.find(r=>r.slug===t);s&&u(s.category)}},[t,l]),a.useEffect(()=>{(async()=>{try{const r=t||o,v=await C.get(`/api/banner/getByPageSlug?pageSlug=${r}`);j(v.data||[])}catch(r){console.error("Failed to fetch banner:",r)}finally{f(!1)}})()},[t,o]);const d=n?Array.isArray(g)?g:[]:Array.isArray(h)?h:[],b=y||N;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[i&&i.length>0?e.jsx(p,{imageUrl:`/api/image/download/${i[0].image}`,title:i[0].title}):e.jsx(p,{imageUrl:A}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 mt-5 z-10",children:e.jsxs("nav",{className:"px-4 py-2 rounded-md text-white text-sm sm:text-md font-semibold",children:[e.jsx(x,{to:"/",children:e.jsx("span",{className:"text-[12px] sm:text-[15px]",children:"Home"})}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(x,{to:"/blogs",children:e.jsx("span",{className:"text-[12px] sm:text-[15px]",children:"Blogs"})}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-[12px] sm:text-[15px]",children:m})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[t?e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl font-bold text-[#995d96] pb-2",children:['Blogs in: "',m,'"']}),e.jsx("div",{className:"h-1 w-[5%] bg-[#9c5d95]  mb-6"})]}):e.jsxs("div",{className:"flex flex-wrap gap-4 justify-start mb-10",children:[e.jsx("button",{onClick:()=>c(null),className:`px-8 py-2 rounded-full border ${n?"bg-white text-gray-700":"bg-[#e84c20] text-white"} hover:bg-[#e84c20] hover:text-white transition`,children:"All"}),l==null?void 0:l.map(s=>e.jsx("button",{onClick:()=>c(s.slug),className:`px-8 py-2 rounded-full border ${n===s.slug?"bg-[#e84c20] text-white":"bg-white text-gray-700"} hover:bg-[#e84c20] hover:text-white transition`,children:s.category},s._id))]}),b?e.jsx("div",{className:"text-center text-gray-500",children:"Loading blogs..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d==null?void 0:d.map(s=>e.jsx(x,{to:`/${s.slug}`,children:e.jsxs("div",{className:"bg-white border rounded-lg shadow hover:shadow-lg transform hover:scale-105 transition-transform duration-300 p-4",children:[e.jsx("img",{src:`/api/image/download/${s.image}`,alt:s.title,className:"h-48 w-full object-cover rounded mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-[#052852] mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("p",{className:"text-sm text-gray-600 ",children:new Date(s.date).toLocaleDateString()}),e.jsxs("div",{className:"flex text-gray-600 items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4 "}),e.jsx("p",{children:s.visits})]})]}),e.jsxs("p",{className:"text-gray-700 my-4 line-clamp-3",children:[s.details.replace(/<[^>]*>/g,"").slice(0,120),"..."]}),e.jsx("a",{href:`/${s.slug}`,className:"inline-block bg-[#e84c20] text-white px-4 py-2 rounded hover:bg-[#c83e1b] transition",children:"Read More"})]})},s._id))})]})]})}export{Q as default};
