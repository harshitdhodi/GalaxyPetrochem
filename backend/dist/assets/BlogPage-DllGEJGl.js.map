{"version":3,"file":"BlogPage-DllGEJGl.js","sources":["../../src/blog/BlogPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Table, Button, Popconfirm, Typography, Image } from 'antd';\r\nimport { EditOutlined, PlusOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useGetAllBlogsQuery, useDeleteBlogMutation } from '@/slice/blog/blog';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst BlogTable = () => {\r\n  const { data: blogs, error, isLoading, refetch } = useGetAllBlogsQuery();\r\n  const [deleteBlog, { isLoading: isDeleting }] = useDeleteBlogMutation();\r\n  const navigate = useNavigate();\r\n  const [expandedRows, setExpandedRows] = useState({});\r\n\r\n  if (isLoading) return <div>Loading...</div>;\r\n  if (error) return <div>Error: {error.message || 'An error occurred'}</div>;\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deleteBlog(id).unwrap();\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Failed to delete blog:', error);\r\n    }\r\n  };\r\n\r\n  const toggleDetails = (id) => {\r\n    setExpandedRows((prev) => ({\r\n      ...prev,\r\n      [id]: !prev[id],\r\n    }));\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Title',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      width: 150, // Increased width (Adjust as needed)\r\n      render: (text) => <Text strong>{text}</Text>,\r\n    },\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'date',\r\n      key: 'date',\r\n      width: 50,\r\n    },\r\n    {\r\n      title: 'Details',\r\n      dataIndex: 'details',\r\n      key: 'details',\r\n      render: (text, record) => (\r\n        <div>\r\n          <div\r\n            style={{\r\n              maxHeight: expandedRows[record._id] ? 'none' : '5em',\r\n              overflow: 'hidden',\r\n              position: 'relative',\r\n            }}\r\n            dangerouslySetInnerHTML={{ __html: text }}\r\n          />\r\n          <Button\r\n            type=\"link\"\r\n            onClick={() => toggleDetails(record._id)}\r\n            size=\"small\"\r\n          >\r\n            {expandedRows[record._id] ? 'Show Less' : 'Read More'}\r\n          </Button>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Images',\r\n      dataIndex: 'image',\r\n      key: 'image',\r\n      width: 100,\r\n      render: (images) =>\r\n        images && images.length > 0 ? (\r\n          images.map((img, index) => (\r\n            <Image\r\n              key={index}\r\n              src={`/api/image/download/${img}`}\r\n              alt={`Blog Image ${index + 1}`}\r\n              width={50}\r\n              height={50}\r\n              style={{ objectFit: 'cover', borderRadius: '5px' }}\r\n            />\r\n          ))\r\n        ) : (\r\n          <Text type=\"secondary\">No Image</Text>\r\n        ),\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <div className=\"flex space-x-2\">\r\n          <Button\r\n            icon={<EditOutlined />}\r\n            onClick={() => navigate(`/edit-blog-form/${record._id}`)}\r\n          />\r\n          <Popconfirm\r\n            title=\"Are you sure you want to delete this blog?\"\r\n            onConfirm={() => handleDelete(record._id)}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger icon={<DeleteOutlined />} />\r\n          </Popconfirm>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n  \r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between mb-4 p-5\">\r\n        <div>\r\n          <h2 className='text-2xl font-semibold'>Blogs</h2>\r\n        </div>\r\n        <Link to=\"/blog-form\">\r\n          <Button type=\"primary\" icon={<PlusOutlined />}>\r\n            Add Blog\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={blogs}\r\n        rowKey=\"_id\"\r\n        pagination={{ pageSize: 5 }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogTable;\r\n"],"names":["Text","Typography","BlogTable","data","blogs","error","isLoading","refetch","useGetAllBlogsQuery","deleteBlog","isDeleting","useDeleteBlogMutation","navigate","useNavigate","expandedRows","setExpandedRows","useState","jsx","children","jsxs","message","columns","title","dataIndex","key","width","render","text","strong","record","style","maxHeight","_id","overflow","position","dangerouslySetInnerHTML","__html","Button","type","onClick","toggleDetails","id","prev","size","images","length","map","img","index","Image","src","alt","height","objectFit","borderRadius","_","className","icon","EditOutlined","Popconfirm","onConfirm","async","unwrap","handleDelete","okText","cancelText","danger","DeleteOutlined","Link","to","PlusOutlined","Table","dataSource","rowKey","pagination","pageSize"],"mappings":"ikCAMA,MAAMA,KAAEA,GAASC,EAEXC,EAAY,KAChB,MAAQC,KAAMC,EAAAC,MAAOA,YAAOC,EAAWC,QAAAA,GAAYC,KAC5CC,GAAcH,UAAWI,IAAgBC,IAC1CC,EAAWC,KACVC,EAAcC,GAAmBC,EAAAA,SAAS,CAAA,GAEjD,GAAIV,EAAW,OAAQW,EAAAA,IAAA,MAAA,CAAIC,SAAU,eACjC,GAAAb,EAAc,OAAAc,EAAAA,KAAC,MAAI,CAAAD,SAAA,CAAA,UAAQb,EAAMe,SAAW,uBAE1C,MAgBAC,EAAU,CACd,CACEC,MAAO,QACPC,UAAW,QACXC,IAAK,QACLC,MAAO,IACPC,OAASC,SAAU3B,EAAK,CAAA4B,QAAM,EAAEV,SAAKS,KAEvC,CACEL,MAAO,OACPC,UAAW,OACXC,IAAK,OACLC,MAAO,IAET,CACEH,MAAO,UACPC,UAAW,UACXC,IAAK,UACLE,OAAQ,CAACC,EAAME,WACZ,MACC,CAAAX,SAAA,CAAAD,EAAAA,IAAC,MAAA,CACCa,MAAO,CACLC,UAAWjB,EAAae,EAAOG,KAAO,OAAS,MAC/CC,SAAU,SACVC,SAAU,YAEZC,wBAAyB,CAAEC,OAAQT,KAErCV,EAAAA,IAACoB,EAAA,CACCC,KAAK,OACLC,QAAS,KAAMC,OArCFC,EAqCgBZ,EAAOG,SApC5CjB,GAAiB2B,IAAU,IACtBA,EACHD,CAACA,IAAMC,EAAKD,OAHM,IAACA,CAqC0B,EACvCE,KAAK,QAEJzB,SAAaJ,EAAAe,EAAOG,KAAO,YAAc,kBAKlD,CACEV,MAAO,SACPC,UAAW,QACXC,IAAK,QACLC,MAAO,IACPC,OAASkB,GACPA,GAAUA,EAAOC,OAAS,EACxBD,EAAOE,KAAI,CAACC,EAAKC,IACf/B,EAAAA,IAACgC,EAAA,CAECC,IAAK,uBAAuBH,IAC5BI,IAAK,cAAcH,EAAQ,IAC3BvB,MAAO,GACP2B,OAAQ,GACRtB,MAAO,CAAEuB,UAAW,QAASC,aAAc,QALtCN,KAST/B,EAAAA,IAACjB,EAAK,CAAAsC,KAAK,YAAYpB,SAAQ,cAGrC,CACEI,MAAO,UACPE,IAAK,UACLC,MAAO,IACPC,OAAQ,CAAC6B,EAAG1B,IACTV,EAAAA,KAAA,MAAA,CAAIqC,UAAU,iBACbtC,SAAA,CAAAD,EAAAA,IAACoB,EAAA,CACCoB,WAAOC,EAAa,IACpBnB,QAAS,IAAM3B,EAAS,mBAAmBiB,EAAOG,SAEpDf,EAAAA,IAAC0C,EAAA,CACCrC,MAAM,6CACNsC,UAAW,IAvFAC,OAAOpB,IACtB,UACIhC,EAAWgC,GAAIqB,SACbvD,UACDF,GACsC,GAkFtB0D,CAAalC,EAAOG,KACrCgC,OAAO,MACPC,WAAW,KAEX/C,eAACmB,EAAO,CAAA6B,QAAM,EAACT,KAAMxC,EAAAA,IAACkD,eAQ9B,OAAAhD,EAAAA,KAAC,MAAI,CAAAqC,UAAU,YACbtC,SAAA,CAACC,EAAAA,KAAA,MAAA,CAAIqC,UAAU,gCACbtC,SAAA,CAAAD,EAAAA,IAAC,OACCC,SAACD,EAAAA,IAAA,KAAA,CAAGuC,UAAU,yBAAyBtC,qBAExCD,EAAAA,IAAAmD,EAAA,CAAKC,GAAG,aACPnD,SAACD,EAAAA,IAAAoB,EAAA,CAAOC,KAAK,UAAUmB,KAAMxC,EAAAA,IAACqD,EAAa,CAAA,GAAIpD,2BAKnDD,EAAAA,IAACsD,EAAA,CACClD,UACAmD,WAAYpE,EACZqE,OAAO,MACPC,WAAY,CAAEC,SAAU,OAE5B"}