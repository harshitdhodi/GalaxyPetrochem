import{r as t,ek as T,b as P,t as q,g as C,j as e,L as U,aU as o,I as d,B as w}from"./index-pxV5F7Vk-1745663305082.js";import{T as k}from"./textarea-D8aQnHC3-1745663305082.js";import{B as _}from"./Banner-BQdh3C6r-1745663305082.js";import{R as z}from"./recaptcha-wrapper-CYkjMUXn-1745663305082.js";import"./index-DDd-nLD9-1745663305082.js";const H="/assets/career-CkIT_sJc-1745663305082.jpg";function W(){const[s,f]=t.useState({name:"",address:"",email:"",contactNo:"",postAppliedFor:""}),[g,j]=t.useState(null),[N,v]=t.useState(!1),[A,y]=t.useState(null),[M,{isLoading:b}]=T(),L=P().pathname.replace(/^\//,"")||"career",{data:p,isLoading:S}=q(L),[m,R]=t.useState(null),u=t.useRef(null),x=t.useRef(null);t.useEffect(()=>{C.get("/api/careerInfo").then(a=>{a.data.length>0&&R(a.data[0])}).catch(a=>{console.error("Error fetching career info:",a)})},[]);const c=a=>{const{id:r,value:n}=a.target;f(l=>({...l,[r]:n}))},B=a=>{const r=a.target.files[0],n=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],l=5*1024*1024;if(r){if(!n.includes(r.type)){alert("Please upload only PDF, DOC, or DOCX files"),a.target.value=null;return}if(r.size>l){alert("File size must be less than 5MB"),a.target.value=null;return}j(r)}},h=()=>{f({name:"",address:"",email:"",contactNo:"",postAppliedFor:""}),j(null),u.current&&u.current.reset(),x.current&&x.current.reset(),y(null)},D=a=>{a.preventDefault(),h()},I=async a=>{var n,l;if(a.preventDefault(),!A){alert("Please complete the reCAPTCHA");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){alert("Please enter a valid email address");return}try{v(!0);const i=new FormData;Object.keys(s).forEach(F=>{i.append(F,s[F])}),g&&i.append("resumeFile",g);const E=await C.post("/api/career/add",i,{headers:{"Content-Type":"multipart/form-data"}});h(),E.status===201&&(alert("Application submitted successfully!"),h())}catch(i){alert("Failed to submit application: "+((l=(n=i.response)==null?void 0:n.data)==null?void 0:l.message)||i.message)}finally{v(!1)}};return e.jsxs(e.Fragment,{children:[S?e.jsx("div",{children:"Loading banner..."}):e.jsx(_,{imageUrl:p&&p.length>0?`/api/image/download/${p[0].image}`:H}),e.jsxs("div",{className:"sm:max-w-[75rem] w-full mx-auto",children:[e.jsx("nav",{className:"py-4 px-4 sm:px-0 md:px-6",children:e.jsxs("div",{className:"flex border-b border-gray-300 pb-4 items-center space-x-2 text-sm",children:[e.jsx(U,{to:"/",className:"text-primary hover:text-gray-900",children:"Home"}),e.jsx("span",{className:"text-primary",children:"Â»"}),e.jsx("span",{className:"text-main",children:"Careers"})]})}),e.jsxs("div",{className:"mb-7 px-4 md:px-6 sm:px-0",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Careers"}),e.jsx("div",{className:"bg-primary h-1 w-12"})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:m.info}})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 overflow-hidden w-full gap-7 px-4 md:px-6 sm:px-0",children:[e.jsxs("form",{ref:u,className:"space-y-6 w-full",onSubmit:I,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Name*"}),e.jsx(d,{id:"name",required:!0,className:"rounded-none",value:s.name,onChange:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address",children:"Address*"}),e.jsx(k,{id:"address",required:!0,className:"rounded-none",value:s.address,onChange:c,maxLength:500})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email*"}),e.jsx(d,{id:"email",type:"email",required:!0,className:"rounded-none",value:s.email,onChange:c,maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"contactNo",children:"Contact No*"}),e.jsx(d,{id:"contactNo",type:"tel",required:!0,className:"rounded-none",value:s.contactNo,onChange:c,maxLength:20})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"resume",children:"Upload Your Resume*"}),e.jsx("div",{className:"text-sm text-gray-500",children:"[doc, docx, or pdf, max 5MB]"}),e.jsx(d,{id:"resume",type:"file",accept:".doc,.docx,.pdf",required:!0,className:"rounded-none",onChange:B})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"postAppliedFor",children:"Post Applied For*"}),e.jsx(d,{id:"postAppliedFor",required:!0,className:"rounded-none",value:s.postAppliedFor,onChange:c,maxLength:100})]}),e.jsx("div",{className:"space-y-2   ",children:e.jsx(z,{ref:x,sitekey:"6Lfc_AQrAAAAACZeHEU6zFrGBNcdeni4-s3Ebx93",onChange:a=>y(a)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(w,{type:"submit",className:"bg-main rounded-sm text-lg py-3 hover:bg-main_light",disabled:b||N,children:b||N?"Submitting...":"Submit"}),e.jsx(w,{type:"button",variant:"destructive",className:"bg-primary hover:bg-secondary text-lg py-3 rounded-sm",onClick:D,children:"Reset"})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-start w-full",children:e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("img",{src:m.image?`/api/image/download/${m.image}`:"no-image",alt:"Career growth illustration",className:"object-contain w-full max-h-80"})})})]})]})]})]})}export{W as default};
