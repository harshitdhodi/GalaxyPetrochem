import{aZ as e,a_ as a,aY as s,j as t}from"./main-DbCIA5nM.js";import{j as r,f as d,b as l}from"./vendor-X2E3PIZN.js";import{b as m}from"./index.esm-Dk3WekSX.js";import{R as i}from"./quill.snow-BtYlbvM3.js";import"./utils-ZFgnvnbw.js";import"./isEqual-12EnfSUl.js";const o=()=>{const{id:o}=r(),c=d(),{register:n,handleSubmit:b,reset:u,setValue:p,formState:{errors:x}}=m(),[j,{isLoading:y}]=e(),{data:h,isLoading:g,error:f}=a(o,{skip:!o}),{data:N,isLoading:v}=s();l.useEffect((()=>{h?.data&&(u({name:h.data.name,subject:h.data.subject,body:h.data.body,category:h.data.category?._id||""}),p("body",h.data.body))}),[h,u,p]);return g?t.jsx("div",{children:"Loading template..."}):f?t.jsxs("div",{children:["Error fetching template: ",f.message]}):t.jsxs("div",{className:"p-4 mx-auto",children:[t.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),t.jsxs("form",{onSubmit:b((async e=>{try{await j({id:o,...e}).unwrap(),c("/email-template-table")}catch(a){alert("Failed to update template: "+a.message)}})),className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),t.jsxs("select",{id:"category",...n("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[t.jsx("option",{value:"",children:"Select a category"}),!v&&N?.map((e=>t.jsx("option",{value:e._id,children:e.emailCategory},e._id)))]}),x.category&&t.jsx("p",{className:"text-red-500 text-sm",children:x.category.message})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),t.jsx("input",{id:"name",...n("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),x.name&&t.jsx("p",{className:"text-red-500 text-sm",children:x.name.message})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),t.jsx("input",{id:"subject",...n("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),x.subject&&t.jsx("p",{className:"text-red-500 text-sm",children:x.subject.message})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),t.jsx(i,{value:h?.data?.body||"",onChange:e=>{p("body",e)},placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),x.body&&t.jsx("p",{className:"text-red-500 text-sm",children:x.body.message})]}),t.jsx("button",{type:"submit",className:"w-1/4 bg-blue-500 text-white px-4 py-2 rounded "+(y?"opacity-50":""),disabled:y,children:y?"Updating...":"Update Template"})]})]})};export{o as default};
//# sourceMappingURL=EditTemplate-BPvzkLgB.js.map
