import{r as l,g as w,u as E,a as n,j as e,L as u,R as g}from"./index-DCzHKJ1C-1746190296529.js";import{F as s}from"./index-D8mbZZP2-1746190296529.js";import{B as o}from"./Breadcrumb-C5d56vOq-1746190296529.js";import{S as h}from"./index-LZM1eHaS-1746190296529.js";import{I as m}from"./index-CGN-Smg_-1746190296529.js";import{B as F}from"./index-o5nCi2y9-1746190296529.js";import{s as p}from"./index-CRmCGNRF-1746190296529.js";import"./CheckCircleFilled-CtvmZanU-1746190296529.js";import"./ExclamationCircleFilled-Bx6doBjo-1746190296529.js";import"./dropdown-DBymanLs-1746190296529.js";import"./EllipsisOutlined-D9SABRLv-1746190296529.js";import"./getAllowClear-4hYQKqii-1746190296529.js";import"./CheckOutlined-Bm88fW3--1746190296529.js";import"./Input-BjftUPEO-1746190296529.js";import"./TextArea-DWwovta1-1746190296529.js";import"./InfoCircleFilled-B3JfOF3k-1746190296529.js";const{Option:d}=h,$=()=>{const[i]=s.useForm(),[x,f]=l.useState([]),[j,y]=l.useState(!0),{id:r}=w(),M=E();l.useEffect(()=>{(async()=>{try{const a=await n.get("/api/menulist/get-menu");a.data&&Array.isArray(a.data.data)?f(a.data.data):console.error("Unexpected API response:",a.data)}catch(a){console.error("Error fetching menu list:",a)}finally{y(!1)}})()},[]),l.useEffect(()=>{r&&n.get(`/api/meta/get-meta/${r}`).then(t=>{if(t.data&&t.data.success){const a=t.data.data;i.setFieldsValue({pageName:a.pageName,pageSlug:a.pageSlug,metaTitle:a.metaTitle,metaDescription:a.metaDescription,metaKeyword:a.metaKeyword})}}).catch(t=>console.error("Error fetching meta data:",t))},[r,i]);const S=t=>t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),I=t=>{const a=S(t);i.setFieldsValue({pageSlug:a})},b=async t=>{try{r?(await n.put(`/api/meta/update-meta/${r}`,t),p.success("Meta data updated successfully!")):(await n.post("/api/meta/add-meta",t),p.success("Meta data added successfully!"),i.resetFields()),M("/meta-table")}catch(a){p.error("Failed to save meta data."),console.error("Error:",a)}};return e.jsxs("div",{children:[e.jsxs(o,{style:{marginBottom:20},children:[e.jsx(o.Item,{children:e.jsx(u,{to:"/dashboard",children:"Dashboard"})}),e.jsx(o.Item,{children:e.jsx(u,{to:"/meta-table",children:"Meta List"})}),e.jsx(o.Item,{children:r?"Edit Meta":"Add Meta"})]}),e.jsxs(s,{form:i,layout:"vertical",onFinish:b,children:[e.jsx(s.Item,{name:"pageName",label:"Page Name",rules:[{required:!0,message:"Please select a page"}],children:e.jsxs(h,{placeholder:"Select a page",loading:j,onChange:I,children:[e.jsx(d,{value:"Static Page",children:"Static Page"}),x.map(t=>e.jsxs(g.Fragment,{children:[e.jsx(d,{value:t.parent.name,style:{fontWeight:"bold"},children:t.parent.name}),t.children.map(a=>e.jsxs(g.Fragment,{children:[e.jsxs(d,{value:a.name,style:{paddingLeft:20},children:["├── ",a.name]}),a.subChildren.map(c=>e.jsxs(d,{value:c.name,style:{paddingLeft:40},children:["├──── ",c.name]},c._id))]},a._id))]},t._id))]})}),e.jsx(s.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Slug is required"}],children:e.jsx(m,{placeholder:"Auto-generated slug"})}),e.jsx(s.Item,{name:"metaTitle",label:"Meta Title",rules:[{required:!1,message:"Please enter meta title"}],children:e.jsx(m,{placeholder:"Enter Meta Title"})}),e.jsx(s.Item,{name:"metaDescription",label:"Meta Description",rules:[{required:!1,message:"Please enter meta description"}],children:e.jsx(m.TextArea,{placeholder:"Enter Meta Description",rows:4})}),e.jsx(s.Item,{name:"metaKeyword",label:"Meta Keywords",rules:[{required:!1,message:"Please enter meta keywords"}],children:e.jsx(m,{placeholder:"Enter Meta Keywords"})}),e.jsx(s.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",children:r?"Update Meta":"Add Meta"})})]})]})};export{$ as default};
