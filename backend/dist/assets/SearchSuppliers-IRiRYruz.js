import{p as e,j as s,B as a,H as l,I as r}from"./main-DbCIA5nM.js";import{b as i,R as n}from"./vendor-X2E3PIZN.js";import{T as t,a as c,b as d,c as o,d as m,e as h}from"./table-DVNdpQ_I.js";import"./utils-ZFgnvnbw.js";function x({selectedChemicalIds:l,onRemoveChemical:r}){const[n,x]=i.useState(1),[u,j]=i.useState(10),[p,b]=i.useState({name:"",email:"",mobile:""}),{data:g,error:v,isLoading:N}=e(l),y=e=>{const{name:s,value:a}=e.target;b({...p,[s]:a})},C=g?g.filter((e=>Object.entries(p).every((([s,a])=>e[s]?.toString().toLowerCase().includes(a.toLowerCase()))))):[],f=Math.ceil(C.length/u),S=(n-1)*u,w=S+u,L=C.slice(S,w);return s.jsxs("div",{className:"border rounded-md mt-4",children:[s.jsxs(t,{children:[s.jsx(c,{className:"bg-gray-200",children:s.jsxs(d,{children:[s.jsx(o,{children:"Name"}),s.jsx(o,{children:"Email"}),s.jsx(o,{children:"Mobile"})]})}),s.jsxs(m,{children:[s.jsxs(d,{children:[s.jsx(h,{children:s.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:p.name,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(h,{children:s.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:p.email,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(h,{children:s.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:p.mobile,onChange:y,className:"border rounded w-full px-2 py-1"})})]}),N&&s.jsx(d,{children:s.jsx(h,{colSpan:3,children:"Loading suppliers..."})}),v&&s.jsx(d,{children:s.jsx(h,{colSpan:3,className:"text-red-500",children:v.message})}),!N&&!v&&0===L.length&&s.jsx(d,{children:s.jsx(h,{colSpan:3,children:"No suppliers available."})}),L.map((e=>s.jsxs(d,{children:[s.jsx(h,{children:e.name}),s.jsx(h,{children:e.email}),s.jsx(h,{children:e.mobile})]},e._id)))]})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",s.jsxs("select",{className:"border rounded",value:u,onChange:e=>j(Number(e.target.value)),children:[s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:20,children:"20"}),s.jsx("option",{value:50,children:"50"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{className:"",variant:"secondary",size:"sm",onClick:()=>x(n-1),disabled:1===n,children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[S+1," - ",Math.min(w,C.length)," of ",C.length]}),s.jsx(a,{variant:"secondary",size:"sm",onClick:()=>x(n+1),disabled:n===f,children:"Next"})]})]})]})}function u({onSelectChemicals:e}){const[a,n]=i.useState(""),[t,c]=i.useState(""),[d,o]=i.useState(null),[m,h]=i.useState([]),[u,j]=i.useState([]),{data:p,isLoading:b,error:g}=l(t.charAt(0)||""),v=(Array.isArray(p)?p:p?[p]:[]).filter((e=>e.name.toLowerCase().includes(t.toLowerCase())||e.cas_number&&e.cas_number.toLowerCase().includes(t.toLowerCase())));return s.jsxs("div",{className:"mt-4",children:[s.jsx(r,{placeholder:"Search Chemical by Name or CAS Number",value:a,onChange:e=>{const s=e.target.value;n(s),c(s)},className:"w-full mb-4"}),b?s.jsx("div",{children:"Loading..."}):t&&v&&v.length>0&&s.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:v.map((a=>s.jsxs("li",{onClick:()=>(s=>{if(s&&!m.includes(s._id)){const a=[...u,s],l=[...m,s._id];o(s),j(a),h(l),n(""),c(""),e?.(a)}})(a),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[a.name," (CAS: ",a.cas_number||"N/A",")"]},a._id)))}),g&&s.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",g.toString()]}),0===v?.length&&!b&&t&&s.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),s.jsx("div",{className:"mt-4",children:s.jsx(x,{chemicals:u,selectedChemicalIds:m,onRemoveChemical:s=>{const a=u.filter((e=>e._id!==s._id)),l=m.filter((e=>e!==s._id));j(a),h(l),e?.(a)}})})]})}function j(){const[e,a]=n.useState(null),[l,r]=n.useState([]);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),s.jsx("div",{className:"space-y-4",children:s.jsx(u,{onSelectCustomer:e=>{a(e),r([])}})})]})}export{j as default};
//# sourceMappingURL=SearchSuppliers-IRiRYruz.js.map
