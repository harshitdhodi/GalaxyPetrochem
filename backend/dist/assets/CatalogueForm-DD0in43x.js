import{eB as e,eC as a,eD as i,j as t}from"./main-CzSo-TQq.js";import{f as s,k as l,b as r,L as o}from"./vendor-BCMiqwDy.js";import{F as n}from"./index-DNifZJQ5.js";import{B as m}from"./Breadcrumb-CWo6S1TK.js";import{I as d}from"./index-DM93vOm6.js";import{U as c,R as p}from"./index-C3Salwgc.js";import{B as u}from"./index-DSpNpUBy.js";import{s as j}from"./index-9ZEY5nY4.js";import"./utils-ZFgnvnbw.js";import"./CheckCircleFilled-ReswMhjZ.js";import"./ExclamationCircleFilled-xRTYYEFC.js";import"./dropdown-Dz-q1Mre.js";import"./EllipsisOutlined-BfcsApT3.js";import"./getAllowClear-CUuit-6u.js";import"./Input-dXXm4f2Q.js";import"./TextArea-BS9kE1Cd.js";import"./DeleteOutlined-BWd8Mtlr.js";import"./DownloadOutlined-xI3cqZd9.js";import"./CheckOutlined-Cn3WkZbn.js";import"./InfoCircleFilled-CAKYzuNC.js";const g=()=>{const[g]=n.useForm(),x=s(),{id:h}=l(),{data:f,isLoading:C}=e(h,{skip:!h}),[b]=a(),[F]=i(),[I,y]=r.useState([]),[w,O]=r.useState([]);r.useEffect((()=>{f&&(g.setFieldsValue(f),y([{url:`/api/image/pdf/view/${f.catalogue}`,name:f.catalogue}]),O([{url:`/api/image/view/${f.image}`,name:f.image}]))}),[f,g]);return t.jsxs(t.Fragment,{children:[t.jsxs(m,{style:{marginBottom:"16px"},children:[t.jsx(m.Item,{children:t.jsx(o,{to:"/dashboard",children:"Dashboard"})}),t.jsx(m.Item,{children:t.jsx(o,{to:"/catalogue-table",children:"Catalogue Table"})}),t.jsx(m.Item,{children:h?"Edit Catalogue":"Create Catalogue"})]}),t.jsxs(n,{form:g,layout:"vertical",onFinish:async e=>{const a=new FormData;a.append("title",e.title),I[0]?.originFileObj&&a.append("catalog",I[0].originFileObj),w[0]?.originFileObj&&a.append("image",w[0].originFileObj);try{h?(await F({id:h,formData:a}).unwrap(),j.success("Catalogue updated successfully")):(await b(a).unwrap(),j.success("Catalogue created successfully")),x("/catalogue-table")}catch(i){j.error("Failed to save catalogue")}},children:[t.jsx(n.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter the title"}],children:t.jsx(d,{})}),t.jsx(n.Item,{name:"catalogue",label:"Catalogue",rules:[{required:!0,message:"Please upload a catalogue"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:I,beforeUpload:()=>!1,onChange:({fileList:e})=>y(e),children:t.jsx(u,{icon:t.jsx(p,{}),children:"Upload Catalogue"})})}),t.jsx(n.Item,{name:"image",label:"Image",rules:[{required:!0,message:"Please upload an image"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:w,beforeUpload:()=>!1,onChange:({fileList:e})=>O(e),children:t.jsx(u,{icon:t.jsx(p,{}),children:"Upload Image"})})}),t.jsx(n.Item,{children:t.jsx(u,{type:"primary",htmlType:"submit",loading:C,children:h?"Update":"Create"})})]})]})};export{g as default};
//# sourceMappingURL=CatalogueForm-DD0in43x.js.map
