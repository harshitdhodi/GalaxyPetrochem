import{r as c,u as S,g as N,a as u,j as e,L as f}from"./index-CpuOtzVf-1746276925609.js";import{F as r}from"./index-4ATAF7jw-1746276925609.js";import{s as i}from"./index-D7F8w7e3-1746276925609.js";import{B as p}from"./Breadcrumb-DvB_DTNG-1746276925609.js";import{C as v}from"./index-P0TKTvRQ-1746276925609.js";import{I as j}from"./index-HZdjW78P-1746276925609.js";import{U as T,R as E}from"./index-DkjiY8HF-1746276925609.js";import{B as w}from"./index-Q1QjD9JP-1746276925609.js";import"./toArray-DPO5UJLx-1746276925609.js";import"./extends-rM07bN2b-1746276925609.js";import"./AntdIcon-BqKSlByP-1746276925609.js";import"./index-DDs0feMe-1746276925609.js";import"./CheckCircleFilled-DE8JODSn-1746276925609.js";import"./ExclamationCircleFilled-BgG8t4ma-1746276925609.js";import"./InfoCircleFilled-HfXRS8jM-1746276925609.js";import"./dropdown-D7YDL9BQ-1746276925609.js";import"./EllipsisOutlined-CbYEiaVe-1746276925609.js";import"./Skeleton-B2_Mytxe-1746276925609.js";import"./PlusOutlined-4z5Aee7d-1746276925609.js";import"./getAllowClear-DTD7LWx6-1746276925609.js";import"./Input-D1QXQ77L-1746276925609.js";import"./EyeOutlined-DNOA0sF--1746276925609.js";import"./TextArea-DhsEfDA2-1746276925609.js";import"./fade-gXy5Vkn_-1746276925609.js";import"./DeleteOutlined-B5FWRDeD-1746276925609.js";import"./DownloadOutlined-D0jJj4ft-1746276925609.js";import"./CheckOutlined-BxmrzK3W-1746276925609.js";const se=()=>{const[g,o]=c.useState(!1),[m,b]=c.useState([]),[d,h]=c.useState(null),[x]=r.useForm(),y=S(),{id:n}=N(),a=!!n;c.useEffect(()=>{a&&I()},[a]);const I=async()=>{o(!0);try{const t=(await u.get(`/api/slideShow/getById?id=${n}`)).data;x.setFieldsValue({title:t.title,altText:t.altText}),t.image&&h(`/api/logo/download/${t.image}`)}catch(s){i.error("Failed to fetch slide show data."),console.error(s)}finally{o(!1)}},U=async s=>{const t=new FormData;if(m.length>0)t.append("image",m[0].originFileObj);else if(!a){i.error("Please upload an image.");return}t.append("altText",s.altText),t.append("title",s.title),a&&t.append("id",n),o(!0);try{let l;a?(l=await u.put(`/api/slideShow/update?id=${n}`,t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image updated successfully!")):(l=await u.post("/api/slideShow/addimages",t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image uploaded successfully!")),y("/slideShow-table")}catch(l){i.error(a?"Failed to update image.":"Failed to upload image."),console.error(l)}finally{o(!1)}},F=({fileList:s})=>{if(b(s.slice(-1)),s.length>0){const t=s[0].originFileObj;d&&URL.revokeObjectURL(d);const l=URL.createObjectURL(t);h(l)}else a||h(null)};return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsxs(p,{className:"self-start mb-4 text-gray-600",children:[e.jsx(p.Item,{children:e.jsx(f,{to:"/dashboard",children:"Dashboard"})}),e.jsx(p.Item,{children:e.jsx(f,{to:"/slideShow-table",children:"SlideShow Table"})}),e.jsxs(p.Item,{children:[a?"Edit":"Upload"," Image"]})]}),e.jsxs(v,{className:"w-full max-w-4lg shadow-lg rounded-xl",children:[e.jsxs("h2",{className:"text-xl font-semibold text-left mb-4",children:[a?"Edit":"Upload"," Image"]}),e.jsxs(r,{form:x,layout:"vertical",onFinish:U,className:"w-full lg:w-1/2",children:[e.jsx(r.Item,{label:"Image Title",name:"title",rules:[{required:!0,message:"Please enter image title"}],children:e.jsx(j,{placeholder:"Enter image title"})}),e.jsx(r.Item,{label:"Alt Name",name:"altText",rules:[{required:!0,message:"Please enter alt text"}],children:e.jsx(j,{placeholder:"Enter alt text"})}),e.jsxs(r.Item,{label:"Upload Image",children:[e.jsx(T,{fileList:m,beforeUpload:()=>!1,maxCount:1,onChange:F,accept:"image/*",children:e.jsx(w,{icon:e.jsx(E,{}),children:"Select Image"})}),a&&!m.length&&e.jsx("div",{className:"mt-2 text-gray-500",children:"Only upload a new image if you want to replace the existing one."})]}),d&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:d,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),e.jsx(r.Item,{children:e.jsx(w,{type:"primary",htmlType:"submit",block:!0,loading:g,className:"mt-4",children:g?a?"Updating...":"Uploading...":a?"Update Image":"Upload Image"})})]})]})]})};export{se as default};
