import{bc as e,j as s,C as a,b6 as i,b7 as t,aD as r,aE as l,I as n,B as c}from"./main-CYgOQvaw.js";import{b as d,f as o}from"./vendor-BCMiqwDy.js";import{T as m}from"./textarea-BQffPqX4.js";import{B as h}from"./BreadCrumb-CCpOg2-Q.js";import{B as u}from"./react-toastify.esm-BsgWllsW.js";import"./utils-ZFgnvnbw.js";import"./chevron-right-BHJrePhs.js";const p=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Customer Form",href:null}];function x(){const[x,{isLoading:j}]=e(),[g,v]=d.useState({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),b=o(),y=e=>{const{id:s,value:a}=e.target;v((e=>({...e,[s]:a})))};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"ml-1",children:s.jsx(h,{items:p})}),s.jsxs(a,{className:"w-full mt-4 mx-auto",children:[s.jsx(i,{children:s.jsx(t,{className:"text-xl text-purple-700",children:"Manage Customer"})}),s.jsx(r,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const s=["name","email","mobile"].filter((e=>!g[e]));if(s.length>0)return void u({title:"Validation Error",description:`Please fill in all required fields: ${s.join(", ")}`,variant:"destructive"});if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email))try{const e=new FormData;Object.keys(g).forEach((s=>{null!==g[s]&&("image"===s&&g[s]?e.append(s,g[s]):"description"===s?e.append(s,g[s]||""):e.append(s,g[s]))}));(await x(e)).data&&(u({title:"Success",description:"Customer added successfully"}),v({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),b("/customer-table"))}catch(a){u({title:"Error",description:a.message||"Failed to add customer",variant:"destructive"})}else u({title:"Validation Error",description:"Please enter a valid email address",variant:"destructive"})},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(l,{htmlFor:"name",children:["Customer Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(n,{id:"name",value:g.name,onChange:y,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"contactPerson",children:"Contact Person"}),s.jsx(n,{id:"contactPerson",value:g.contactPerson,onChange:y})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(l,{htmlFor:"email",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(n,{id:"email",type:"email",value:g.email,onChange:y,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(l,{htmlFor:"mobile",children:["Mobile Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(n,{id:"mobile",value:g.mobile,onChange:y,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"website",children:"Website"}),s.jsx(n,{id:"website",type:"url",value:g.website,onChange:y})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"country",children:"Country"}),s.jsx(n,{id:"country",value:g.country,onChange:y})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"state",children:"State/Province"}),s.jsx(n,{id:"state",value:g.state,onChange:y})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"city",children:"City"}),s.jsx(n,{id:"city",value:g.city,onChange:y})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"address",children:"Address"}),s.jsx(m,{id:"address",className:"min-h-[100px]",value:g.address,onChange:y})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Upload image"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:s.jsx("img",{src:g.image?URL.createObjectURL(g.image):"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),s.jsx(c,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),s.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void u({title:"Invalid file type",description:"Please upload an image file",variant:"destructive"});if(s.size>5242880)return void u({title:"File too large",description:"Image size should be less than 5MB",variant:"destructive"});v((e=>({...e,image:s})))}},className:"hidden"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{htmlFor:"description",children:"Description"}),s.jsx(m,{id:"description",value:g.description,onChange:y,className:"min-h-[200px]",placeholder:"Enter customer description"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(c,{type:"submit",disabled:j,className:"bg-green-500 text-white hover:bg-green-600",children:j?"Saving...":"Save"}),s.jsx(c,{type:"button",variant:"destructive",onClick:()=>v({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),children:"Cancel"})]})]})})]})]})}export{x as default};
//# sourceMappingURL=CustomerForm-CHw98Buy.js.map
