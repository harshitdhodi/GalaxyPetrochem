import{g as e,al as r,j as a,B as s}from"./main-DbCIA5nM.js";import{f as t,R as d,L as l}from"./vendor-X2E3PIZN.js";import"./utils-ZFgnvnbw.js";const i=()=>{const{data:i,error:n,isLoading:o}=e(),[c]=r(),m=t(),p=d.useMemo((()=>{if(!i)return[];if(Array.isArray(i))return i;if(i.data&&Array.isArray(i.data))return i.data;for(const e in i)if(Array.isArray(i[e]))return i[e];return[]}),[i]),[h,x]=d.useState({}),y=(e,r=100)=>{if(!e)return"";const a=e.replace(/<[^>]+>/g,"");return a.length<=r?e:a.substring(0,r)+"..."};if(o)return a.jsx("p",{children:"Loading templates..."});if(n)return a.jsxs("p",{children:["Error loading templates: ",n.message]});if(!p.length)return a.jsx("p",{children:"No templates found."});return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-xl font-bold",children:"Email Templates"}),a.jsx(l,{to:"/add-template",children:a.jsx(s,{className:"bg-[#3b1f91] text-white hover:bg-purple-700",variant:"primary",children:"Add Template"})})]}),a.jsx("hr",{className:"mb-5"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-200",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Subject"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Body"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),a.jsx("tbody",{children:p.map((e=>a.jsxs("tr",{className:"hover:bg-gray-100",children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.name||"Unnamed Template"}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.subject||"No Subject"}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[a.jsx("div",{dangerouslySetInnerHTML:{__html:h[e._id]?e.body:y(e.body)}}),e.body&&e.body.length>100&&a.jsx(s,{variant:"link",className:"text-[#3b1f91] p-0 h-auto font-medium",onClick:()=>{return r=e._id,void x((e=>({...e,[r]:!e[r]})));var r},children:h[e._id]?"Show Less":"Read More"})]}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(s,{variant:"secondary",className:"hover:bg-[#4f359c]",size:"sm",onClick:()=>{return r=e._id,void m(`/edit-template/${r}`);var r},children:"Edit"}),a.jsx(s,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this template?"))try{await c(e).unwrap(),alert("Template deleted successfully!")}catch(r){alert("Failed to delete template: "+(r.message||"Unknown error"))}})(e._id),children:"Delete"})]})})]},e._id)))})]})}),0===p.length&&!o&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{children:'No templates found. Create your first template by clicking "Add Template".'})})]})};export{i as default};
//# sourceMappingURL=TemplateTable-yOUA-H8c.js.map
