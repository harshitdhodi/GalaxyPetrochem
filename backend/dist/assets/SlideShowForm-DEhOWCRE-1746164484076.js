import{r as c,u as S,g as N,a as u,j as e,L as f}from"./index-BVyIuqOA-1746164484076.js";import{F as r}from"./index-DczpNl8M-1746164484076.js";import{s as i}from"./index-DeiINRbF-1746164484076.js";import{B as p}from"./Breadcrumb-CaVoYBN9-1746164484076.js";import{C as v}from"./index-CEt_XOBm-1746164484076.js";import{I as j}from"./index-ClLEi4iS-1746164484076.js";import{U as T,R as E}from"./index-CuR9igAI-1746164484076.js";import{B as w}from"./index-Xr7SArBw-1746164484076.js";import"./CheckCircleFilled-CRdn820F-1746164484076.js";import"./ExclamationCircleFilled-W1l03fgp-1746164484076.js";import"./InfoCircleFilled-De1mEImP-1746164484076.js";import"./dropdown-Cyb2g6C4-1746164484076.js";import"./EllipsisOutlined-DNGHEudh-1746164484076.js";import"./Skeleton-B5RBHXF0-1746164484076.js";import"./PlusOutlined-D-EcdwDQ-1746164484076.js";import"./getAllowClear-Cqcb1oWz-1746164484076.js";import"./Input-C0hFHF2l-1746164484076.js";import"./TextArea-B5YRd_RU-1746164484076.js";import"./DeleteOutlined-DkAwwUH_-1746164484076.js";import"./DownloadOutlined-DlNQkPud-1746164484076.js";import"./CheckOutlined-Bslt4ePP-1746164484076.js";const Y=()=>{const[g,o]=c.useState(!1),[d,b]=c.useState([]),[n,h]=c.useState(null),[x]=r.useForm(),y=S(),{id:m}=N(),a=!!m;c.useEffect(()=>{a&&I()},[a]);const I=async()=>{o(!0);try{const t=(await u.get(`/api/slideShow/getById?id=${m}`)).data;x.setFieldsValue({title:t.title,altText:t.altText}),t.image&&h(`/api/logo/download/${t.image}`)}catch(s){i.error("Failed to fetch slide show data."),console.error(s)}finally{o(!1)}},U=async s=>{const t=new FormData;if(d.length>0)t.append("image",d[0].originFileObj);else if(!a){i.error("Please upload an image.");return}t.append("altText",s.altText),t.append("title",s.title),a&&t.append("id",m),o(!0);try{let l;a?(l=await u.put(`/api/slideShow/update?id=${m}`,t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image updated successfully!")):(l=await u.post("/api/slideShow/addimages",t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image uploaded successfully!")),y("/slideShow-table")}catch(l){i.error(a?"Failed to update image.":"Failed to upload image."),console.error(l)}finally{o(!1)}},F=({fileList:s})=>{if(b(s.slice(-1)),s.length>0){const t=s[0].originFileObj;n&&URL.revokeObjectURL(n);const l=URL.createObjectURL(t);h(l)}else a||h(null)};return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsxs(p,{className:"self-start mb-4 text-gray-600",children:[e.jsx(p.Item,{children:e.jsx(f,{to:"/dashboard",children:"Dashboard"})}),e.jsx(p.Item,{children:e.jsx(f,{to:"/slideShow-table",children:"SlideShow Table"})}),e.jsxs(p.Item,{children:[a?"Edit":"Upload"," Image"]})]}),e.jsxs(v,{className:"w-full max-w-4lg shadow-lg rounded-xl",children:[e.jsxs("h2",{className:"text-xl font-semibold text-left mb-4",children:[a?"Edit":"Upload"," Image"]}),e.jsxs(r,{form:x,layout:"vertical",onFinish:U,className:"w-full lg:w-1/2",children:[e.jsx(r.Item,{label:"Image Title",name:"title",rules:[{required:!0,message:"Please enter image title"}],children:e.jsx(j,{placeholder:"Enter image title"})}),e.jsx(r.Item,{label:"Alt Name",name:"altText",rules:[{required:!0,message:"Please enter alt text"}],children:e.jsx(j,{placeholder:"Enter alt text"})}),e.jsxs(r.Item,{label:"Upload Image",children:[e.jsx(T,{fileList:d,beforeUpload:()=>!1,maxCount:1,onChange:F,accept:"image/*",children:e.jsx(w,{icon:e.jsx(E,{}),children:"Select Image"})}),a&&!d.length&&e.jsx("div",{className:"mt-2 text-gray-500",children:"Only upload a new image if you want to replace the existing one."})]}),n&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:n,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),e.jsx(r.Item,{children:e.jsx(w,{type:"primary",htmlType:"submit",block:!0,loading:g,className:"mt-4",children:g?a?"Updating...":"Uploading...":a?"Update Image":"Upload Image"})})]})]})]})};export{Y as default};
