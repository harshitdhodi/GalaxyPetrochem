{"version":3,"file":"SlideShowTable-BRIcUpOg.js","sources":["../../src/website/componets/slideshow/SlideShowTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Table, Image, message, Card, Button, Popconfirm, Breadcrumb } from \"antd\";\r\nimport { EditOutlined, DeleteOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst SlideShowTable = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch data from API\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(\"/api/slideShow/getAll\");\r\n\r\n      // Ensure response contains an array\r\n      if (response.data && Array.isArray(response.data)) {\r\n        setData(response.data);\r\n      } else if (response.data?.data && Array.isArray(response.data.data)) {\r\n        // Handle case where API wraps data inside an object\r\n        setData(response.data.data);\r\n      } else {\r\n        throw new Error(\"Invalid response format\");\r\n      }\r\n    } catch (error) {\r\n      message.error(\"Failed to fetch slideshow data.\");\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Delete Image Function\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`/api/slideShow/delete?id=${id}`);\r\n      message.success(\"Image deleted successfully!\");\r\n      fetchData(); // Refresh table after deletion\r\n    } catch (error) {\r\n      message.error(\"Failed to delete image.\");\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  // Table columns\r\n  const columns = [\r\n    {\r\n      title: \"Image\",\r\n      dataIndex: \"image\",\r\n      key: \"image\",\r\n      render: (image) =>\r\n        image ? (\r\n          <Image\r\n            src={`/api/logo/download/${image}`}\r\n            alt=\"Slide\"\r\n            width={80}\r\n            height={50}\r\n            className=\"rounded-lg shadow object-contain\"\r\n          />\r\n        ) : (\r\n          <span>No Image</span>\r\n        ),\r\n    },\r\n    {\r\n      title: \"Title\",\r\n      dataIndex: \"title\",\r\n      key: \"title\",\r\n    },\r\n    {\r\n      title: \"Alt Name\",\r\n      dataIndex: \"altText\",\r\n      key: \"altText\",\r\n    },\r\n    {\r\n      title: \"Actions\",\r\n      key: \"actions\",\r\n      render: (_, record) => (\r\n        <div className=\"flex gap-3\">\r\n          {/* Edit Button */}\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<EditOutlined />}\r\n            onClick={() => navigate(`/edit-image/${record._id}`)}\r\n          />\r\n\r\n          {/* Delete Button with Confirmation */}\r\n          <Popconfirm\r\n            title=\"Are you sure you want to delete this image?\"\r\n            onConfirm={() => handleDelete(record._id)}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button type=\"danger\" icon={<DeleteOutlined />} />\r\n          </Popconfirm>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center min-h-screen px-6\">\r\n      {/* Breadcrumb Navigation */}\r\n      <div className=\"w-full  mb-4 flex justify-between items-center\">\r\n        <Breadcrumb>\r\n          <Breadcrumb.Item onClick={() => navigate(\"/dashboard\")}>Dashboard</Breadcrumb.Item>\r\n          <Breadcrumb.Item>Slideshow</Breadcrumb.Item>\r\n        </Breadcrumb>\r\n\r\n        {/* Add Image Button */}\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<PlusOutlined />}\r\n          onClick={() => navigate(\"/slideShow-form\")}\r\n        >\r\n          Add Image\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Card Container */}\r\n      <Card className=\"w-full max-w-7xl shadow-lg rounded-xl \">\r\n        <h2 className=\"text-xl font-semibold text-left mb-4\">\r\n          Slideshow Images\r\n        </h2>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={data}\r\n          rowKey=\"_id\"\r\n          loading={loading}\r\n          pagination={{ pageSize: 5 }}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SlideShowTable;\r\n"],"names":["SlideShowTable","data","setData","useState","loading","setLoading","navigate","useNavigate","useEffect","fetchData","async","response","axios","get","Array","isArray","Error","error","message","columns","title","dataIndex","key","render","image","jsx","Image","src","alt","width","height","className","children","_","record","jsxs","Button","type","icon","EditOutlined","onClick","_id","Popconfirm","onConfirm","id","delete","success","handleDelete","okText","cancelText","DeleteOutlined","Breadcrumb","Item","PlusOutlined","Card","Table","dataSource","rowKey","pagination","pageSize"],"mappings":"s+BAMA,MAAMA,EAAiB,KACrB,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,KAC1BC,EAASC,GAAcF,EAAAA,UAAS,GACjCG,EAAWC,IAGjBC,EAAAA,WAAU,KACEC,GAAA,GACT,IAEH,MAAMA,EAAYC,UAChBL,GAAW,GACP,IACF,MAAMM,QAAiBC,EAAMC,IAAI,yBAGjC,GAAIF,EAASV,MAAQa,MAAMC,QAAQJ,EAASV,MAC1CC,EAAQS,EAASV,UACnB,KAAWU,EAASV,MAAMA,OAAQa,MAAMC,QAAQJ,EAASV,KAAKA,MAItD,MAAA,IAAIe,MAAM,2BAFRd,EAAAS,EAASV,KAAKA,KAEmB,QAEpCgB,GACPC,EAAQD,MAAM,kCACK,CACnB,QACAZ,GAAW,EAAK,GAiBdc,EAAU,CACd,CACEC,MAAO,QACPC,UAAW,QACXC,IAAK,QACLC,OAASC,GACPA,EACEC,EAAAA,IAACC,EAAA,CACCC,IAAK,sBAAsBH,IAC3BI,IAAI,QACJC,MAAO,GACPC,OAAQ,GACRC,UAAU,qCAGXN,MAAA,OAAA,CAAKO,SAAQ,cAGpB,CACEZ,MAAO,QACPC,UAAW,QACXC,IAAK,SAEP,CACEF,MAAO,WACPC,UAAW,UACXC,IAAK,WAEP,CACEF,MAAO,UACPE,IAAK,UACLC,OAAQ,CAACU,EAAGC,IACTC,EAAAA,KAAA,MAAA,CAAIJ,UAAU,aAEbC,SAAA,CAAAP,EAAAA,IAACW,EAAA,CACCC,KAAK,UACLC,WAAOC,EAAa,IACpBC,QAAS,IAAMlC,EAAS,eAAe4B,EAAOO,SAIhDhB,EAAAA,IAACiB,EAAA,CACCtB,MAAM,8CACNuB,UAAW,IAvDAjC,OAAOkC,IACtB,UACIhC,EAAMiC,OAAO,4BAA4BD,KAC/C1B,EAAQ4B,QAAQ,+BACNrC,UACHQ,GACPC,EAAQD,MAAM,0BACK,GAgDI8B,CAAab,EAAOO,KACrCO,OAAO,MACPC,WAAW,KAEXjB,eAACI,EAAO,CAAAC,KAAK,SAASC,KAAMb,EAAAA,IAACyB,eAQrC,OAAAf,EAAAA,KAAC,MAAI,CAAAJ,UAAU,+CAEbC,SAAA,CAACG,EAAAA,KAAA,MAAA,CAAIJ,UAAU,iDACbC,SAAA,CAAAG,OAACgB,EACC,CAAAnB,SAAA,CAACP,MAAA0B,EAAWC,KAAX,CAAgBZ,QAAS,IAAMlC,EAAS,cAAe0B,SAAS,cAChEP,EAAAA,IAAA0B,EAAWC,KAAX,CAAgBpB,SAAS,iBAI5BP,EAAAA,IAACW,EAAA,CACCC,KAAK,UACLC,WAAOe,EAAa,IACpBb,QAAS,IAAMlC,EAAS,mBACzB0B,SAAA,iBAMHG,EAAAA,KAACmB,EAAK,CAAAvB,UAAU,yCACdC,SAAA,CAACP,EAAAA,IAAA,KAAA,CAAGM,UAAU,uCAAuCC,SAErD,qBACAP,EAAAA,IAAC8B,EAAA,CACCpC,UACAqC,WAAYvD,EACZwD,OAAO,MACPrD,UACAsD,WAAY,CAAEC,SAAU,UAG9B"}