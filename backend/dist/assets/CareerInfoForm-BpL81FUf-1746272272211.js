import{r as t,j as r,aC as U,dO as w,a as c}from"./index-2C6dvy5y-1746272272211.js";import{F as o}from"./index-LnZ0KFrj-1746272272211.js";import{B as m}from"./Breadcrumb-B1CJ1abb-1746272272211.js";import{T as E}from"./index-DTYJAxq5-1746272272211.js";import{U as v,R}from"./index-BDTfRgVv-1746272272211.js";import{B as x}from"./index-Dq0FjoP7-1746272272211.js";import{s as f}from"./index-CDuJzY-1-1746272272211.js";import"./CheckCircleFilled-Do-1KtVY-1746272272211.js";import"./ExclamationCircleFilled-CUcAXDxc-1746272272211.js";import"./dropdown-BX96gQaZ-1746272272211.js";import"./EllipsisOutlined-DtDZ_8yj-1746272272211.js";import"./EditOutlined-DKXi7WEs-1746272272211.js";import"./styleChecker-BKjn2fEi-1746272272211.js";import"./TextArea-DLojqu-u-1746272272211.js";import"./getAllowClear-Bz5b7XlF-1746272272211.js";import"./CheckOutlined-Ch4rn_uG-1746272272211.js";import"./DeleteOutlined-B_J5Q_uF-1746272272211.js";import"./DownloadOutlined-CkgTmhe9-1746272272211.js";import"./InfoCircleFilled-B3JAAQkO-1746272272211.js";const{Title:T}=E,W=()=>{const[s]=o.useForm(),[d,n]=t.useState(""),[p,b]=t.useState(null),[u,h]=t.useState(null),[i,j]=t.useState(null),g=async()=>{try{const e=await c.get("/api/careerInfo");if(e.data.length>0){const a=e.data[0];j(a),n(a.info),s.setFieldsValue({info:a.info}),a.image&&h(`/api/image/download/${a.image}`)}}catch(e){console.error("Error fetching career info:",e)}};t.useEffect(()=>{g()},[s]);const y=e=>{n(e);const I=new DOMParser().parseFromString(e,"text/html"),S=I.getElementsByTagName("*");for(let l of S)(l.style.color==="white"||l.style.color==="#ffffff")&&(l.style.color="black");n(I.body.innerHTML)},C=({file:e})=>{b(e),h(URL.createObjectURL(e))},F=async()=>{const e=new FormData;e.append("info",d),p&&e.append("image",p);try{i?(await c.put(`/api/careerInfo/${i._id}`,e),f.success("Career info updated successfully")):(await c.post("/api/careerInfo",e),f.success("Career info created successfully")),g()}catch(a){console.error("Error saving career info:",a),f.error("Error saving career info")}};return r.jsxs("div",{children:[r.jsxs(m,{children:[r.jsx(m.Item,{href:"/dashboard",children:"Dashboard"}),r.jsx(m.Item,{children:"Career Info"})]}),r.jsx(T,{level:2,style:{margin:"16px 0"},children:"Career Info"}),r.jsxs(o,{form:s,onFinish:F,layout:"vertical",children:[r.jsx(o.Item,{label:"Info",name:"info",rules:[{required:!0,message:"Please enter the info"}],children:r.jsx(U,{value:d,onChange:y,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","blockquote"],[{align:[]}],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet"]})}),r.jsxs(o.Item,{label:"Image",name:"image",children:[u&&r.jsx(w,{width:200,src:u,alt:"Career Info Image"}),r.jsx(v,{beforeUpload:()=>!1,onChange:C,maxCount:1,children:r.jsx(x,{icon:r.jsx(R,{}),children:"Select Image"})})]}),r.jsx(o.Item,{children:r.jsx(x,{type:"primary",htmlType:"submit",children:i?"Update":"Submit"})})]})]})};export{W as default};
