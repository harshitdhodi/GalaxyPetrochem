{"version":3,"file":"CareerTable-CxbCKVvR.js","sources":["../../src/websiteBackend/career/CareerTable.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Table, Space, Breadcrumb, Modal, message, Button } from 'antd';\r\nimport { EditOutlined, DeleteOutlined, DownloadOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useGetAllApplicationsQuery, useDeleteApplicationMutation } from '../../slice/career/CareerForm';\r\n\r\nconst CareerTable = () => {\r\n    const navigate = useNavigate();\r\n    const { data: applications, isLoading } = useGetAllApplicationsQuery();\r\n    const [deleteApplication] = useDeleteApplicationMutation();\r\n\r\n    const handleEdit = (record) => {\r\n        navigate(`/career/edit/${record._id}`);\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        Modal.confirm({\r\n            title: 'Are you sure you want to delete this application?',\r\n            content: 'This action cannot be undone.',\r\n            okText: 'Yes',\r\n            okType: 'danger',\r\n            cancelText: 'No',\r\n            onOk: async () => {\r\n                try {\r\n                    await deleteApplication(id).unwrap();\r\n                    message.success('Application deleted successfully!');\r\n                } catch (error) {\r\n                    message.error(error.message || 'Something went wrong');\r\n                }\r\n            },\r\n        });\r\n    };\r\n\r\n    const handleDownload = async (filePath) => {\r\n        try {\r\n            const filename = filePath.split('/').pop();\r\n            const response = await fetch(`/api/image/pdf/download/${filename}`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error('Download failed');\r\n            }\r\n\r\n            const blob = await response.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = filename;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (error) {\r\n            message.error('Failed to download file');\r\n            console.error('Download error:', error);\r\n        }\r\n    };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Info',\r\n            key: 'info',\r\n            render: (_, record) => (\r\n                <div>\r\n                    <strong>{record.name}</strong>\r\n                    <div>{record.contactNo}</div>\r\n                    <div style={{ color: '#666' }}>{record.address}</div>\r\n                </div>\r\n            ),\r\n            sorter: (a, b) => a.name.localeCompare(b.name),\r\n        },\r\n        {\r\n            title: 'Email',\r\n            dataIndex: 'email',\r\n            key: 'email',\r\n        },\r\n        {\r\n            title: 'Post Applied For',\r\n            dataIndex: 'postAppliedFor',\r\n            key: 'postAppliedFor',\r\n            sorter: (a, b) => a.postAppliedFor.localeCompare(b.postAppliedFor),\r\n        },\r\n        {\r\n            title: 'Resume',\r\n            key: 'resume',\r\n            render: (_, record) => (\r\n                <DownloadOutlined \r\n                    onClick={() => handleDownload(record.resumeFile)}\r\n                    style={{ cursor: 'pointer', color: '#1890ff' }}\r\n                />\r\n            ),\r\n        },\r\n        {\r\n            title: 'Applied Date',\r\n            dataIndex: 'createdAt',\r\n            key: 'createdAt',\r\n            render: (date) => new Date(date).toLocaleDateString(),\r\n            sorter: (a, b) => new Date(a.createdAt) - new Date(b.createdAt),\r\n        },\r\n        {\r\n            title: 'Actions',\r\n            key: 'actions',\r\n            render: (_, record) => (\r\n                <Space size=\"middle\">\r\n                    <EditOutlined \r\n                        style={{ color: '#1890ff', cursor: 'pointer' }}\r\n                        onClick={() => handleEdit(record)}\r\n                    />\r\n                    <DeleteOutlined \r\n                        style={{ color: '#ff4d4f', cursor: 'pointer' }}\r\n                        onClick={() => handleDelete(record._id)}\r\n                    />\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div >\r\n            <Breadcrumb\r\n                items={[\r\n                    { \r\n                        title: <span onClick={() => navigate('/dashboard')} className='cursor-pointer'>\r\n                            Dashboard\r\n                        </span>\r\n                    },\r\n                    { title: 'Career Applications' }\r\n                ]}\r\n                className='mb-4'\r\n            />\r\n\r\n           <div className='flex justify-between items-center mb-5'>\r\n            <div className='text-2xl font-semibold'>Career List </div>\r\n           <Button \r\n                type=\"primary\" \r\n                icon={<PlusOutlined />}\r\n                onClick={() => navigate('/career/add')}\r\n                style={{ marginBottom: '16px' }}\r\n                className='float-right'\r\n            >\r\n                Add New Application\r\n            </Button>\r\n           </div>\r\n\r\n            <Table \r\n                columns={columns}\r\n                dataSource={applications?.data || []}\r\n                loading={isLoading}\r\n                rowKey=\"_id\"\r\n                pagination={{ \r\n                    pageSize: 10,\r\n                    showSizeChanger: true,\r\n                    showTotal: (total) => `Total ${total} applications`\r\n                }}\r\n                scroll={{ x: true }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CareerTable; "],"names":["CareerTable","navigate","useNavigate","data","applications","isLoading","useGetAllApplicationsQuery","deleteApplication","useDeleteApplicationMutation","columns","title","key","render","_","record","children","jsx","name","contactNo","style","color","address","sorter","a","b","localeCompare","dataIndex","postAppliedFor","DownloadOutlined","onClick","async","filePath","filename","split","pop","response","fetch","ok","Error","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","error","message","handleDownload","resumeFile","cursor","date","Date","toLocaleDateString","createdAt","jsxs","Space","size","EditOutlined","_id","handleEdit","DeleteOutlined","handleDelete","id","Modal","confirm","content","okText","okType","cancelText","onOk","unwrap","success","Breadcrumb","items","className","Button","type","icon","PlusOutlined","marginBottom","Table","dataSource","loading","rowKey","pagination","pageSize","showSizeChanger","showTotal","total","scroll","x"],"mappings":"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"}