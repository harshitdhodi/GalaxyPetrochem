import{j as e}from"./main-DbCIA5nM.js";import{b as t,f as a,j as l,L as s}from"./vendor-X2E3PIZN.js";import{a as i}from"./utils-ZFgnvnbw.js";import{F as r}from"./index-BGrTmilS.js";import{s as o}from"./index-BQxUT-WV.js";import{B as d}from"./Breadcrumb-DZWgOyzs.js";import{C as m}from"./index-Do4FWjKb.js";import{I as n}from"./index-C8xsCgg9.js";import{U as c,R as p}from"./index-1EwFYQPN.js";import{B as j}from"./index-CvhnQ2ZS.js";import"./toArray-DIarnBRF.js";import"./objectSpread2-C2mPdFQ-.js";import"./AntdIcon-Bc_RgQsY.js";import"./index-BJvm14ET.js";import"./CheckCircleFilled-vSnFSXRd.js";import"./ExclamationCircleFilled-jOtwz4nB.js";import"./InfoCircleFilled-BiVI0bqr.js";import"./dropdown-C2Lyn6ws.js";import"./index-Cie-PtDs.js";import"./Skeleton-Ds91yGkQ.js";import"./PlusOutlined-DCOYj-on.js";import"./getAllowClear-CF0z5FWe.js";import"./Input-DzV7KJ8a.js";import"./EyeOutlined-D6toRaq1.js";import"./TextArea-BQkixvnv.js";import"./fade-CZ8b_ilM.js";import"./DeleteOutlined-D5hKN4qo.js";import"./DownloadOutlined-B6iPWVSX.js";import"./CheckOutlined-qoM0f-f3.js";const x=()=>{const[x,u]=t.useState(!1),[h,g]=t.useState([]),[f,b]=t.useState(null),[w]=r.useForm(),y=a(),{id:I}=l(),F=!!I;t.useEffect((()=>{F&&S()}),[F]);const S=async()=>{u(!0);try{const e=(await i.get(`/api/slideShow/getById?id=${I}`)).data;w.setFieldsValue({title:e.title,altText:e.altText}),e.image&&b(`/api/logo/download/${e.image}`)}catch(e){o.error("Failed to fetch slide show data.")}finally{u(!1)}};return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsxs(d,{className:"self-start mb-4 text-gray-600",children:[e.jsx(d.Item,{children:e.jsx(s,{to:"/dashboard",children:"Dashboard"})}),e.jsx(d.Item,{children:e.jsx(s,{to:"/slideShow-table",children:"SlideShow Table"})}),e.jsxs(d.Item,{children:[F?"Edit":"Upload"," Image"]})]}),e.jsxs(m,{className:"w-full max-w-4lg shadow-lg rounded-xl",children:[e.jsxs("h2",{className:"text-xl font-semibold text-left mb-4",children:[F?"Edit":"Upload"," Image"]}),e.jsxs(r,{form:w,layout:"vertical",onFinish:async e=>{const t=new FormData;if(h.length>0)t.append("image",h[0].originFileObj);else if(!F)return void o.error("Please upload an image.");t.append("altText",e.altText),t.append("title",e.title),F&&t.append("id",I),u(!0);try{let e;F?(e=await i.put(`/api/slideShow/update?id=${I}`,t,{headers:{"Content-Type":"multipart/form-data"}}),o.success("Image updated successfully!")):(e=await i.post("/api/slideShow/addimages",t,{headers:{"Content-Type":"multipart/form-data"}}),o.success("Image uploaded successfully!")),y("/slideShow-table")}catch(a){o.error(F?"Failed to update image.":"Failed to upload image.")}finally{u(!1)}},className:"w-full lg:w-1/2",children:[e.jsx(r.Item,{label:"Image Title",name:"title",rules:[{required:!0,message:"Please enter image title"}],children:e.jsx(n,{placeholder:"Enter image title"})}),e.jsx(r.Item,{label:"Alt Name",name:"altText",rules:[{required:!0,message:"Please enter alt text"}],children:e.jsx(n,{placeholder:"Enter alt text"})}),e.jsxs(r.Item,{label:"Upload Image",children:[e.jsx(c,{fileList:h,beforeUpload:()=>!1,maxCount:1,onChange:({fileList:e})=>{if(g(e.slice(-1)),e.length>0){const t=e[0].originFileObj;f&&URL.revokeObjectURL(f);const a=URL.createObjectURL(t);b(a)}else F||b(null)},accept:"image/*",children:e.jsx(j,{icon:e.jsx(p,{}),children:"Select Image"})}),F&&!h.length&&e.jsx("div",{className:"mt-2 text-gray-500",children:"Only upload a new image if you want to replace the existing one."})]}),f&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:f,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),e.jsx(r.Item,{children:e.jsx(j,{type:"primary",htmlType:"submit",block:!0,loading:x,className:"mt-4",children:x?F?"Updating...":"Uploading...":F?"Update Image":"Upload Image"})})]})]})]})};export{x as default};
//# sourceMappingURL=SlideShowForm-CJutm0El.js.map
