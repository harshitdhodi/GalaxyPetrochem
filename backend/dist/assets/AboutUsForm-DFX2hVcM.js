import{bA as e,bB as s,bC as t,j as i}from"./main-DbCIA5nM.js";import{j as a,f as l,b as r}from"./vendor-X2E3PIZN.js";import{R as o}from"./quill.snow-BtYlbvM3.js";import{F as n}from"./index-BGrTmilS.js";import{S as m}from"./index-CoLLPh3Y.js";import{B as d}from"./Breadcrumb-DZWgOyzs.js";import{S as u}from"./index-TlfG7RwS.js";import{I as c}from"./index-C8xsCgg9.js";import{B as p}from"./index-CvhnQ2ZS.js";import{U as g,R as j}from"./index-1EwFYQPN.js";import{s as h}from"./index-BQxUT-WV.js";import"./utils-ZFgnvnbw.js";import"./isEqual-12EnfSUl.js";import"./toArray-DIarnBRF.js";import"./objectSpread2-C2mPdFQ-.js";import"./AntdIcon-Bc_RgQsY.js";import"./index-BJvm14ET.js";import"./CheckCircleFilled-vSnFSXRd.js";import"./ExclamationCircleFilled-jOtwz4nB.js";import"./dropdown-C2Lyn6ws.js";import"./index-Cie-PtDs.js";import"./getAllowClear-CF0z5FWe.js";import"./CheckOutlined-qoM0f-f3.js";import"./Input-DzV7KJ8a.js";import"./EyeOutlined-D6toRaq1.js";import"./TextArea-BQkixvnv.js";import"./fade-CZ8b_ilM.js";import"./DeleteOutlined-D5hKN4qo.js";import"./DownloadOutlined-B6iPWVSX.js";import"./InfoCircleFilled-BiVI0bqr.js";const x=()=>{const{id:x}=a(),b=l(),[f]=n.useForm(),[y,C]=r.useState([]),[F,I]=r.useState(""),[w,S]=r.useState(!1),{data:q,isLoading:A}=e(x),[D]=s(),[k]=t();r.useEffect((()=>{q&&(f.setFieldsValue({title:q.title,shortDescription:q.shortDescription,description:q.description,imageTitle:q.imageTitle,altName:q.altName,section:q.section,slug:q.slug}),I(q.slug),S(q.slug!==q.section.toLowerCase().replace(/\s+/g,"-")),q.image&&C([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${q.image}`}]))}),[q,f]),r.useEffect((()=>{const e=f.getFieldValue("section");if(e&&!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}}),[f.getFieldValue("section"),w]);const T={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},U={beforeUpload:e=>(e.type.startsWith("image/")||h.error("You can only upload image files!"),!1),onChange:({fileList:e})=>C(e),fileList:y};return A&&x?i.jsx(m,{size:"large"}):i.jsxs(i.Fragment,{children:[i.jsx(d,{items:[{title:"Dashboard",onClick:()=>b("/dashboard")},{title:"About Us",onClick:()=>b("/about-us-table")},{title:x?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),i.jsxs(n,{form:f,layout:"vertical",onFinish:async e=>{try{const s=new FormData;s.append("title",e.title),s.append("shortDescription",e.shortDescription),s.append("description",e.description),s.append("imageTitle",e.imageTitle),s.append("altName",e.altName),s.append("section",e.section),s.append("slug",e.slug),y[0]?.originFileObj&&s.append("image",y[0].originFileObj),x?(await k({id:x,formData:s}).unwrap(),h.success("About Us updated successfully")):(await D(s).unwrap(),h.success("About Us created successfully")),b("/about-us-table")}catch(s){const e=s.data?.error||`Failed to ${x?"update":"create"} About Us entry`;h.error(e)}},children:[i.jsx(n.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:i.jsxs(u,{placeholder:"Select a section",onChange:e=>{if(!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}},children:[i.jsx(u.Option,{value:"Introduction",children:"Introduction"}),i.jsx(u.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),i.jsx(n.Item,{name:"slug",label:i.jsxs("span",{children:["Slug",i.jsx(p,{type:"link",size:"small",onClick:()=>{if(S(!w),w){const e=f.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");I(e),f.setFieldsValue({slug:e})}else{const e=f.getFieldValue("slug");I(e)}},style:{marginLeft:8},children:w?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:i.jsx(c,{disabled:!w,onChange:e=>{w&&I(e.target.value)}})}),i.jsx(n.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:i.jsx(o,{modules:T,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:i.jsx(o,{modules:T,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:i.jsx(g,{...U,listType:"picture",children:i.jsx(p,{icon:i.jsx(j,{}),children:x?"Change Image":"Click to Upload"})})}),i.jsx(n.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{children:i.jsx(p,{type:"primary",htmlType:"submit",children:x?"Update":"Submit"})})]})]})};export{x as default};
//# sourceMappingURL=AboutUsForm-DFX2hVcM.js.map
