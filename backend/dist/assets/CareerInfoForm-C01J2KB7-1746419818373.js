import{r as o,j as r,al as U,a as m}from"./index-CyqvOuOg-1746419818373.js";import{F as a}from"./index-DzvSw93u-1746419818373.js";import{B as c}from"./Breadcrumb-h00BRZ3S-1746419818373.js";import{T as w}from"./index-F9e21CAl-1746419818373.js";import{I as E}from"./index-BUPB09aK-1746419818373.js";import{U as v,R}from"./index-C2Ia4vNY-1746419818373.js";import{B as x}from"./index-C3bxH8TE-1746419818373.js";import{s as f}from"./index-DOojfaHn-1746419818373.js";import"./toArray-CKiapHOW-1746419818373.js";import"./extends-rM07bN2b-1746419818373.js";import"./AntdIcon-DOEEMSan-1746419818373.js";import"./index-BMkDlJCN-1746419818373.js";import"./CheckCircleFilled-BDwN-65_-1746419818373.js";import"./ExclamationCircleFilled-LLNef6Rn-1746419818373.js";import"./dropdown-DkYwa0fm-1746419818373.js";import"./EllipsisOutlined-BoRLgxJq-1746419818373.js";import"./EditOutlined-S3Kuo6u_-1746419818373.js";import"./addEventListener-BJmGQME6-1746419818373.js";import"./TextArea-DXtIHlV4-1746419818373.js";import"./getAllowClear-CJDPFZL7-1746419818373.js";import"./CheckOutlined-C7ruoH1q-1746419818373.js";import"./EyeOutlined-Bhs2_IEd-1746419818373.js";import"./index-BnTgH2_J-1746419818373.js";import"./fade-C4OWX2yR-1746419818373.js";import"./DeleteOutlined-xaaXUUdW-1746419818373.js";import"./DownloadOutlined-CrMw7hxn-1746419818373.js";import"./InfoCircleFilled-DJPoA66N-1746419818373.js";const{Title:T}=w,ae=()=>{const[s]=a.useForm(),[p,i]=o.useState(""),[d,b]=o.useState(null),[u,h]=o.useState(null),[n,j]=o.useState(null),g=async()=>{try{const e=await m.get("/api/careerInfo");if(e.data.length>0){const t=e.data[0];j(t),i(t.info),s.setFieldsValue({info:t.info}),t.image&&h(`/api/image/download/${t.image}`)}}catch(e){console.error("Error fetching career info:",e)}};o.useEffect(()=>{g()},[s]);const y=e=>{i(e);const I=new DOMParser().parseFromString(e,"text/html"),S=I.getElementsByTagName("*");for(let l of S)(l.style.color==="white"||l.style.color==="#ffffff")&&(l.style.color="black");i(I.body.innerHTML)},C=({file:e})=>{b(e),h(URL.createObjectURL(e))},F=async()=>{const e=new FormData;e.append("info",p),d&&e.append("image",d);try{n?(await m.put(`/api/careerInfo/${n._id}`,e),f.success("Career info updated successfully")):(await m.post("/api/careerInfo",e),f.success("Career info created successfully")),g()}catch(t){console.error("Error saving career info:",t),f.error("Error saving career info")}};return r.jsxs("div",{children:[r.jsxs(c,{children:[r.jsx(c.Item,{href:"/dashboard",children:"Dashboard"}),r.jsx(c.Item,{children:"Career Info"})]}),r.jsx(T,{level:2,style:{margin:"16px 0"},children:"Career Info"}),r.jsxs(a,{form:s,onFinish:F,layout:"vertical",children:[r.jsx(a.Item,{label:"Info",name:"info",rules:[{required:!0,message:"Please enter the info"}],children:r.jsx(U,{value:p,onChange:y,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","blockquote"],[{align:[]}],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet"]})}),r.jsxs(a.Item,{label:"Image",name:"image",children:[u&&r.jsx(E,{width:200,src:u,alt:"Career Info Image"}),r.jsx(v,{beforeUpload:()=>!1,onChange:C,maxCount:1,children:r.jsx(x,{icon:r.jsx(R,{}),children:"Select Image"})})]}),r.jsx(a.Item,{children:r.jsx(x,{type:"primary",htmlType:"submit",children:n?"Update":"Submit"})})]})]})};export{ae as default};
