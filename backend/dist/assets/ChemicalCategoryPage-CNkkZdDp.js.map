{"version":3,"file":"ChemicalCategoryPage-CNkkZdDp.js","sources":["../../src/chemical/chemicalCategory/CategoryTable.jsx","../../src/chemical/ChemicalCategoryPage.jsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ChevronRight, ChevronDown, Edit, Trash2, Plus } from 'lucide-react'\r\nimport { \r\n  useDeleteChemicalCategoryMutation,\r\n  useGetAllChemicalCategoriesQuery,\r\n   \r\n} from '@/slice/chemicalSlice/chemicalCategory'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\n\r\nconst CategoryRow = ({ item, level, parentIds = {} }) => {\r\n  const navigate = useNavigate()\r\n  const [isOpen, setIsOpen] = React.useState(false)\r\n  const hasSubcategories = item.subCategories?.length > 0 || item.subSubCategory?.length > 0\r\n  const [deleteCategory, { isLoading: isDeleting }] = useDeleteChemicalCategoryMutation()\r\n  \r\n  const currentLevelIds = {\r\n    ...parentIds,\r\n    ...(level === 0 ? { categoryId: item._id } : \r\n        level === 1 ? { subcategoryId: item._id } : \r\n        { subSubCategoryId: item._id }\r\n    )\r\n  }\r\n\r\n  const handleEdit = () => {\r\n    const editPath = `/edit-chemical-category/${currentLevelIds.categoryId || ''}` +\r\n      `${currentLevelIds.subcategoryId ? `/${currentLevelIds.subcategoryId}` : ''}` +\r\n      `${currentLevelIds.subSubCategoryId ? `/${currentLevelIds.subSubCategoryId}` : ''}`\r\n    \r\n    navigate(editPath)\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteCategory(item._id).unwrap()\r\n      // Success - RTK Query will automatically refetch the category list\r\n    } catch (error) {\r\n      console.error('Failed to delete category:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TableRow>\r\n        <TableCell className=\"font-medium\">\r\n          <div className=\"flex items-center\" style={{ paddingLeft: `${level * 20}px` }}>\r\n            {hasSubcategories && (\r\n              <button onClick={() => setIsOpen(!isOpen)} className=\"mr-2\">\r\n                {isOpen ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\r\n              </button>\r\n            )}\r\n            {item.category}\r\n          </div>\r\n        </TableCell>\r\n        <TableCell>\r\n          <div className=\"flex justify-start \">\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleEdit}>\r\n              <Edit className=\"h-4 w-4 text-blue-600\" />\r\n            </Button>\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"icon\" \r\n              onClick={handleDelete} \r\n              disabled={isDeleting}\r\n            >\r\n              <Trash2 className=\"h-4 w-4 text-red-600\" />\r\n            </Button>\r\n          </div>\r\n        </TableCell>\r\n      </TableRow>\r\n      {isOpen && item.subCategories && item.subCategories.map((subitem) => (\r\n        <CategoryRow \r\n          key={subitem._id} \r\n          item={subitem} \r\n          level={level + 1} \r\n          parentIds={currentLevelIds}\r\n        />\r\n      ))}\r\n      {isOpen && item.subSubCategory && item.subSubCategory.map((subitem) => (\r\n        <CategoryRow \r\n          key={subitem._id} \r\n          item={subitem} \r\n          level={level + 1} \r\n          parentIds={currentLevelIds}\r\n        />\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default function HierarchicalCategoryTable() {\r\n  const { data: categories, error, isLoading } = useGetAllChemicalCategoriesQuery();\r\n\r\n  console.log(\"Raw API response:\", categories);\r\n\r\n  if (isLoading) return <div>Loading...</div>;\r\n  if (error) return <div>Error: {error.message || 'An error occurred'}</div>;\r\n\r\n  const categoriesArray = Array.isArray(categories) ? categories : [categories];\r\n\r\n  console.log(\"Processed categories:\", categoriesArray);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-end\">\r\n        <Link to=\"/chemical-category-form\">\r\n          <Button>\r\n            <Plus className=\"mr-2 h-4 w-4\" /> Add Category\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n      <div className=\"border rounded-lg overflow-hidden\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>Categories</TableHead>\r\n              <TableHead>Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {categoriesArray.map((category) => (\r\n              <CategoryRow \r\n                key={category._id} \r\n                item={category} \r\n                level={0} \r\n                parentIds={{}} \r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import CategoryTable from './chemicalCategory/CategoryTable'\r\n\r\nexport default function CategoriesPage() {\r\n  return (\r\n    <div className=\"container mx-auto py-10\">\r\n      <h1 className=\"text-2xl font-bold mb-5\">Product Categories</h1>\r\n      <CategoryTable />\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":["CategoryRow","item","level","parentIds","navigate","useNavigate","isOpen","setIsOpen","React","useState","hasSubcategories","subCategories","length","subSubCategory","deleteCategory","isLoading","isDeleting","useDeleteChemicalCategoryMutation","currentLevelIds","categoryId","_id","subcategoryId","subSubCategoryId","jsxs","Fragment","children","TableRow","jsx","TableCell","className","style","paddingLeft","onClick","ChevronDown","ChevronRight","category","Button","variant","size","editPath","Edit","async","unwrap","error","disabled","Trash2","map","subitem","HierarchicalCategoryTable","data","categories","useGetAllChemicalCategoriesQuery","message","categoriesArray","Array","isArray","Link","to","Plus","Table","TableHeader","TableHead","TableBody","CategoriesPage","CategoryTable"],"mappings":"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"}