import{ba as e,dK as s,j as a,C as i,b6 as t,b7 as r,aD as l,aE as d,I as n,B as o}from"./main-CzSo-TQq.js";import{k as c,f as m,b as h}from"./vendor-BCMiqwDy.js";import{b as x}from"./index.esm-nvYjwl0o.js";import{t as p,o as j,a as u,s as b,l as g}from"./index-DNG4Sede.js";import{T as f}from"./textarea-DYE5AoRU.js";import{S as y,a as N,b as v,c as C,d as w}from"./select-v0vOS5HG.js";import{B as S}from"./BreadCrumb-DQTmRfsr.js";import{B as F}from"./react-toastify.esm-BpKusRA1.js";import"./utils-ZFgnvnbw.js";import"./index-C6jzH1EM.js";import"./index-prcspqn7.js";import"./check-BBACUXZH.js";import"./chevron-up-BeGHc2Vw.js";import"./chevron-right-BuWKzX76.js";const E=j({name:b().min(1,"Customer name is required"),contactPerson:b().optional(),email:b().email("Invalid email address"),mobile:b().min(1,"Mobile number is required"),website:b().url("Invalid URL").optional().or(g("")),address:b().optional(),country:b().optional(),state:b().optional(),city:b().optional(),description:b().optional(),image:u().optional()}),U=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Edit Customer",href:null}];function P(){const{id:j}=c(),{data:u,isLoading:b}=e(j),[g,{isLoading:P}]=s(),k=m(),[A]=h.useState([{isoCode:"US",name:"United States"},{isoCode:"CA",name:"Canada"},{isoCode:"UK",name:"United Kingdom"},{isoCode:"IN",name:"India"},{isoCode:"AU",name:"Australia"}]),I={US:[{isoCode:"NY",name:"New York"},{isoCode:"CA",name:"California"},{isoCode:"TX",name:"Texas"}],IN:[{isoCode:"MH",name:"Maharashtra"},{isoCode:"DL",name:"Delhi"},{isoCode:"KA",name:"Karnataka"}]},L={NY:[{name:"New York City"},{name:"Buffalo"}],CA:[{name:"Los Angeles"},{name:"San Francisco"}],MH:[{name:"Mumbai"},{name:"Pune"}]},[D,M]=h.useState([]),[B,K]=h.useState([]),{register:V,handleSubmit:T,watch:Y,setValue:z,reset:H,formState:{errors:R}}=x({resolver:p(E),defaultValues:{name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}}),q=Y("country"),O=Y("state"),W=Y("image");h.useEffect((()=>{if(q){M(I[q]||[]),u||(z("state",""),z("city",""))}else M([]),K([])}),[q,z,u]),h.useEffect((()=>{if(O){K(L[O]||[]),u||z("city","")}else K([])}),[O,z,u]),h.useEffect((()=>{if(u?.data){["name","contactPerson","email","mobile","website","address","country","state","city","description","image"].forEach((e=>{void 0!==u.data[e]&&z(e,u.data[e]||"")}))}}),[u,z]);return b?a.jsx("div",{children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ml-1",children:a.jsx(S,{items:U})}),a.jsxs(i,{className:"w-full mt-4 mx-auto",children:[a.jsx(t,{children:a.jsx(r,{className:"text-xl text-purple-700",children:"Edit Customer"})}),a.jsx(l,{children:a.jsxs("form",{onSubmit:T((async e=>{try{const s=new FormData;Object.keys(e).forEach((a=>{"image"!==a&&s.append(a,e[a]||"")})),e.image instanceof File&&s.append("image",e.image),s.append("id",j);await g({id:j,data:s}).unwrap();F.success("Customer updated successfully"),k("/customer-table")}catch(s){F.error(s.message||"Failed to update customer")}})),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"name",children:["Customer Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"name",...V("name"),className:R.name?"border-red-500":""}),R.name&&a.jsx("p",{className:"text-red-500 text-sm",children:R.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"contactPerson",children:"Contact Person"}),a.jsx(n,{id:"contactPerson",...V("contactPerson")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"email",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"email",type:"email",...V("email"),className:R.email?"border-red-500":""}),R.email&&a.jsx("p",{className:"text-red-500 text-sm",children:R.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"mobile",children:["Mobile Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"mobile",...V("mobile"),className:R.mobile?"border-red-500":""}),R.mobile&&a.jsx("p",{className:"text-red-500 text-sm",children:R.mobile.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"website",children:"Website"}),a.jsx(n,{id:"website",type:"url",...V("website"),className:R.website?"border-red-500":""}),R.website&&a.jsx("p",{className:"text-red-500 text-sm",children:R.website.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"country",children:"Country"}),a.jsxs(y,{value:q,onValueChange:e=>z("country",e),children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select Country"})}),a.jsx(C,{children:A.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"state",children:"State/Province"}),a.jsxs(y,{value:O,onValueChange:e=>z("state",e),disabled:!q||0===D.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select State"})}),a.jsx(C,{children:D.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"city",children:"City"}),a.jsxs(y,{value:Y("city"),onValueChange:e=>z("city",e),disabled:!O||0===B.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select City"})}),a.jsx(C,{children:B.map((e=>a.jsx(w,{value:e.name,children:e.name},e.name)))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"address",children:"Address"}),a.jsx(f,{id:"address",className:"min-h-[100px]",...V("address")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{children:"Upload image"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:a.jsx("img",{src:W instanceof File?URL.createObjectURL(W):W?`/api/logo/download/${W}`:"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),a.jsx(o,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),a.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void F.error("Please upload an image file");if(s.size>5242880)return void F.error("Image size should be less than 5MB");z("image",s)}},className:"hidden"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"description",children:"Description"}),a.jsx(f,{id:"description",...V("description"),className:"min-h-[200px]",placeholder:"Enter customer description"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(o,{type:"submit",disabled:P,className:"bg-green-500 text-white hover:bg-green-600",children:P?"Saving...":"Save"}),a.jsx(o,{type:"button",variant:"destructive",onClick:()=>k("/customer-table"),children:"Cancel"})]})]})})]})]})}export{P as default};
//# sourceMappingURL=EditCustomerForm-CiILWCGA.js.map
