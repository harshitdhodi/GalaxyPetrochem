{"version":3,"file":"MenuListingTable-Cz5kH1Tp.js","sources":["../../src/websiteBackend/MenuListing/MenuListingTable.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Table, Button, Popconfirm, Space, Typography, Card } from \"antd\";\r\nimport { DeleteOutlined, EditOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useGetAllMenuListingsQuery, useDeleteMenuListingMutation } from \"@/slice/menuListing/menuList\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst MenuListingTable = () => {\r\n  const { data, error, isLoading, refetch } = useGetAllMenuListingsQuery();\r\n  const [deleteMenuListing] = useDeleteMenuListingMutation();\r\n  const navigate = useNavigate();\r\n\r\n  const handleEdit = (id) => {\r\n    navigate(`/menu-listing-form/${id}`);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await deleteMenuListing(id);\r\n    refetch(); // Refetch the data after deletion\r\n  };\r\n\r\n  if (isLoading) return <p>Loading...</p>;\r\n  if (error) return <p style={{ color: \"red\" }}>Error: {error.message}</p>;\r\n\r\n  const menuListings = data?.data || [];\r\n\r\n  const formattedData = menuListings.map((menu) => ({\r\n    key: menu._id,\r\n    name: menu.parent.name,\r\n    path: menu.parent.path,\r\n    isParent: true, // Add this flag\r\n    children: menu.children.length > 0 ? menu.children.map((child) => ({\r\n      key: child._id,\r\n      name: `└── ${child.name}`,\r\n      path: child.path,\r\n      isParent: false, // Add this flag\r\n      children: child.subChildren?.length > 0 ? child.subChildren.map((sub) => ({\r\n        key: sub._id,\r\n        name: `    └── ${sub.name}`,\r\n        path: sub.path,\r\n        isParent: false, // Add this flag\r\n      })) : undefined,\r\n    })) : undefined,\r\n  }));\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      title: \"Path\",\r\n      dataIndex: \"path\",\r\n      key: \"path\",\r\n    },\r\n    {\r\n      title: \"Actions\",\r\n      key: \"actions\",\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Popconfirm title=\"Are you sure?\" onConfirm={() => handleDelete(record.key)}>\r\n            <Button type=\"danger\" shape=\"circle\" icon={<DeleteOutlined />} />\r\n          </Popconfirm>\r\n\r\n          {!record.name.includes('└──') && (\r\n            <Button\r\n              type=\"primary\"\r\n              shape=\"circle\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => handleEdit(record.key)}\r\n            />\r\n          )}\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Card>\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n        <Title level={3}>Menu Listings</Title>\r\n        <Link to=\"/menu-listing-form\">\r\n          <Button type=\"primary\" icon={<PlusOutlined />}>Add Menu</Button>\r\n        </Link>\r\n      </div>\r\n      <Table columns={columns} dataSource={formattedData} expandable={{ defaultExpandAllRows: false }} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MenuListingTable;"],"names":["Title","Typography","MenuListingTable","data","error","isLoading","refetch","useGetAllMenuListingsQuery","deleteMenuListing","useDeleteMenuListingMutation","navigate","useNavigate","jsx","children","jsxs","style","color","message","formattedData","map","menu","key","_id","name","parent","path","isParent","length","child","subChildren","sub","columns","title","dataIndex","render","_","record","Space","Popconfirm","onConfirm","async","id","handleDelete","Button","type","shape","icon","DeleteOutlined","includes","EditOutlined","onClick","handleEdit","Card","display","justifyContent","marginBottom","level","Link","to","PlusOutlined","Table","dataSource","expandable","defaultExpandAllRows"],"mappings":"s5BAMA,MAAMA,MAAEA,GAAUC,EAEZC,EAAmB,KACvB,MAAMC,KAAEA,EAAMC,MAAAA,EAAAC,UAAOA,EAAWC,QAAAA,GAAYC,KACrCC,GAAqBC,IACtBC,EAAWC,IAWjB,GAAIN,EAAW,OAAQO,EAAAA,IAAA,IAAA,CAAEC,SAAU,eAC/B,GAAAT,SAAeU,EAAAA,KAAA,IAAA,CAAEC,MAAO,CAAEC,MAAO,OAASH,SAAA,CAAA,UAAQT,EAAMa,WAEtD,MAEAC,GAFef,GAAMA,MAAQ,IAEAgB,KAAKC,IAAU,CAChDC,IAAKD,EAAKE,IACVC,KAAMH,EAAKI,OAAOD,KAClBE,KAAML,EAAKI,OAAOC,KAClBC,UAAU,EACVb,SAAUO,EAAKP,SAASc,OAAS,EAAIP,EAAKP,SAASM,KAAKS,IAAW,CACjEP,IAAKO,EAAMN,IACXC,KAAM,OAAOK,EAAML,OACnBE,KAAMG,EAAMH,KACZC,UAAU,EACVb,SAAUe,EAAMC,aAAaF,OAAS,EAAIC,EAAMC,YAAYV,KAAKW,IAAS,CACxET,IAAKS,EAAIR,IACTC,KAAM,WAAWO,EAAIP,OACrBE,KAAMK,EAAIL,KACVC,UAAU,WACN,WACF,MAGFK,EAAU,CACd,CACEC,MAAO,OACPC,UAAW,OACXZ,IAAK,QAEP,CACEW,MAAO,OACPC,UAAW,OACXZ,IAAK,QAEP,CACEW,MAAO,UACPX,IAAK,UACLa,OAAQ,CAACC,EAAGC,WACTC,EACC,CAAAxB,SAAA,CAAAD,EAAAA,IAAC0B,GAAWN,MAAM,gBAAgBO,UAAW,IA7ChCC,OAAOC,UACpBjC,EAAkBiC,GAChBnC,GAAA,EA2CiDoC,CAAaN,EAAOf,KACrER,eAAC8B,EAAO,CAAAC,KAAK,SAASC,MAAM,SAASC,KAAOlC,EAAAA,IAAAmC,EAAA,SAG5CX,EAAOb,KAAKyB,SAAS,QACrBpC,EAAAA,IAAC+B,EAAA,CACCC,KAAK,UACLC,MAAM,SACNC,WAAOG,EAAa,IACpBC,QAAS,KAAMC,OA1DPV,EA0DkBL,EAAOf,SAzDlCX,EAAA,sBAAsB+B,KADd,IAACA,CA0D4B,SAQhD,cACGW,EACC,CAAAvC,SAAA,CAACC,EAAAA,KAAA,MAAA,CAAIC,MAAO,CAAEsC,QAAS,OAAQC,eAAgB,gBAAiBC,aAAc,IAC5E1C,SAAA,CAACD,EAAAA,IAAAZ,EAAA,CAAMwD,MAAO,EAAG3C,SAAa,kBAC7BD,EAAAA,IAAA6C,EAAA,CAAKC,GAAG,qBACP7C,SAACD,EAAAA,IAAA+B,EAAA,CAAOC,KAAK,UAAUE,KAAMlC,EAAAA,IAAC+C,EAAa,CAAA,GAAI9C,2BAGnDD,MAACgD,GAAM7B,UAAkB8B,WAAY3C,EAAe4C,WAAY,CAAEC,sBAAsB,OAC1F"}