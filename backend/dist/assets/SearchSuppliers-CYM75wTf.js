import{ar as e,j as s,T as a,e as l,f as r,g as i,h as n,i as t,B as c,aJ as d,I as o}from"./main-CYgOQvaw.js";import{b as m,R as h}from"./vendor-BCMiqwDy.js";import"./utils-ZFgnvnbw.js";function x({selectedChemicalIds:d,onRemoveChemical:o}){const[h,x]=m.useState(1),[u,j]=m.useState(10),[p,b]=m.useState({name:"",email:"",mobile:""}),{data:g,error:v,isLoading:N}=e(d),y=e=>{const{name:s,value:a}=e.target;b({...p,[s]:a})},C=g?g.filter((e=>Object.entries(p).every((([s,a])=>e[s]?.toString().toLowerCase().includes(a.toLowerCase()))))):[],f=Math.ceil(C.length/u),S=(h-1)*u,w=S+u,L=C.slice(S,w);return s.jsxs("div",{className:"border rounded-md mt-4",children:[s.jsxs(a,{children:[s.jsx(l,{className:"bg-gray-200",children:s.jsxs(r,{children:[s.jsx(i,{children:"Name"}),s.jsx(i,{children:"Email"}),s.jsx(i,{children:"Mobile"})]})}),s.jsxs(n,{children:[s.jsxs(r,{children:[s.jsx(t,{children:s.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:p.name,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(t,{children:s.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:p.email,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(t,{children:s.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:p.mobile,onChange:y,className:"border rounded w-full px-2 py-1"})})]}),N&&s.jsx(r,{children:s.jsx(t,{colSpan:3,children:"Loading suppliers..."})}),v&&s.jsx(r,{children:s.jsx(t,{colSpan:3,className:"text-red-500",children:v.message})}),!N&&!v&&0===L.length&&s.jsx(r,{children:s.jsx(t,{colSpan:3,children:"No suppliers available."})}),L.map((e=>s.jsxs(r,{children:[s.jsx(t,{children:e.name}),s.jsx(t,{children:e.email}),s.jsx(t,{children:e.mobile})]},e._id)))]})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",s.jsxs("select",{className:"border rounded",value:u,onChange:e=>j(Number(e.target.value)),children:[s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:20,children:"20"}),s.jsx("option",{value:50,children:"50"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(c,{className:"",variant:"secondary",size:"sm",onClick:()=>x(h-1),disabled:1===h,children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[S+1," - ",Math.min(w,C.length)," of ",C.length]}),s.jsx(c,{variant:"secondary",size:"sm",onClick:()=>x(h+1),disabled:h===f,children:"Next"})]})]})]})}function u({onSelectChemicals:e}){const[a,l]=m.useState(""),[r,i]=m.useState(""),[n,t]=m.useState(null),[c,h]=m.useState([]),[u,j]=m.useState([]),{data:p,isLoading:b,error:g}=d(r.charAt(0)||""),v=(Array.isArray(p)?p:p?[p]:[]).filter((e=>e.name.toLowerCase().includes(r.toLowerCase())||e.cas_number&&e.cas_number.toLowerCase().includes(r.toLowerCase())));return s.jsxs("div",{className:"mt-4",children:[s.jsx(o,{placeholder:"Search Chemical by Name or CAS Number",value:a,onChange:e=>{const s=e.target.value;l(s),i(s)},className:"w-full mb-4"}),b?s.jsx("div",{children:"Loading..."}):r&&v&&v.length>0&&s.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:v.map((a=>s.jsxs("li",{onClick:()=>(s=>{if(s&&!c.includes(s._id)){const a=[...u,s],r=[...c,s._id];t(s),j(a),h(r),l(""),i(""),e?.(a)}})(a),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[a.name," (CAS: ",a.cas_number||"N/A",")"]},a._id)))}),g&&s.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",g.toString()]}),0===v?.length&&!b&&r&&s.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),s.jsx("div",{className:"mt-4",children:s.jsx(x,{chemicals:u,selectedChemicalIds:c,onRemoveChemical:s=>{const a=u.filter((e=>e._id!==s._id)),l=c.filter((e=>e!==s._id));j(a),h(l),e?.(a)}})})]})}function j(){const[e,a]=h.useState(null),[l,r]=h.useState([]);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),s.jsx("div",{className:"space-y-4",children:s.jsx(u,{onSelectCustomer:e=>{a(e),r([])}})})]})}export{j as default};
//# sourceMappingURL=SearchSuppliers-CYM75wTf.js.map
