import{c as e,aC as a,b as s,j as l,C as t,aD as r,aE as i,I as n,an as c,B as o,X as d}from"./main-CzSo-TQq.js";import{b as m,f as u,k as h,L as g}from"./vendor-BCMiqwDy.js";import{C as x,u as p,a as j,b as y}from"./index.esm-nvYjwl0o.js";import{a as b}from"./utils-ZFgnvnbw.js";import{P as f}from"./index-CMYIxM2W.js";import{S as v,a as N,b as _,c as C,d as w}from"./select-v0vOS5HG.js";import{T as S}from"./textarea-DYE5AoRU.js";import"./index-C6jzH1EM.js";import"./index-prcspqn7.js";import"./check-BBACUXZH.js";import"./chevron-up-BeGHc2Vw.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),F=e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),E=({control:e,chemicalData:n,watch:c,setValue:o})=>{const[d,u]=m.useState([]),[h,g]=m.useState([]),{data:p,isLoading:j}=a(),y=p||[],{data:b,isLoading:f,isSuccess:S,isError:k,error:F}=s(),E=b||[],D=c("category"),T=c("sub_category"),M=c("subsub_category_id");return m.useEffect((()=>{if(!E.length)return;const e=E.find((e=>e._id===D));e&&(u(e.subCategories||[]),o("categorySlug",e.slug));const a=T&&e?.subCategories?.find((e=>e._id===T));a&&(g(a.subSubCategory||[]),o("subCategorySlug",a.slug))}),[E,D,T,o]),m.useEffect((()=>{if(!h.length)return;const e=M&&h.find((e=>e._id===M));e&&o("subSubCategorySlug",e.slug)}),[h,M,o]),m.useEffect((()=>{}),[k,F]),m.useEffect((()=>{if(n&&n.category&&E.length>0){const e=E.find((e=>e._id===n.category));if(e){u(e.subCategories||[]),o("category",n.category),o("categorySlug",e.slug);const a=e.subCategories?.find((e=>e._id===n.sub_category));a&&(g(a.subSubCategory||[]),o("sub_category",n.sub_category),o("subCategorySlug",a.slug));const s=a?.subSubCategory?.find((e=>e._id===n.subsub_category_id));s&&(o("subsub_category_id",n.subsub_category_id),o("subSubCategorySlug",s.slug))}}}),[n,E,o]),l.jsx(t,{className:"w-full max-w-2xl border-none mx-auto shadow-none",children:l.jsx(r,{className:"space-y-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"category",children:"Category"}),l.jsx(x,{name:"category",control:e,rules:{required:"Category is required"},render:({field:e})=>l.jsxs(v,{value:e.value||"",onValueChange:a=>{const s=E.find((e=>e._id===a));s&&(e.onChange(s._id),o("categorySlug",s.slug))},children:[l.jsx(N,{id:"category",children:l.jsx(_,{children:e.value&&S?E.find((a=>a._id===e.value))?.category:n&&n.category?.name||"Select Category"})}),l.jsx(C,{children:f?l.jsx(w,{value:"loading",disabled:!0,children:"Loading..."}):S&&E.length>0?E.map((e=>l.jsx(w,{value:e._id,children:e.category},e._id))):l.jsx(w,{value:"none",disabled:!0,children:"No categories available"})})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"sub_category",children:"Sub Category"}),l.jsx(x,{name:"sub_category",control:e,render:({field:e})=>l.jsxs(v,{value:e.value||"",onValueChange:a=>{const s=d.find((e=>e._id===a));s&&(e.onChange(s._id),o("subCategorySlug",s.slug))},disabled:!D||0===d.length,children:[l.jsx(N,{id:"sub_category",children:l.jsx(_,{children:e.value&&d.length>0?d.find((a=>a._id===e.value))?.category:n&&n.sub_category?.name||"Select Sub Category"})}),l.jsx(C,{children:d.length>0?d.map((e=>l.jsx(w,{value:e._id,children:e.category},e._id))):l.jsx(w,{value:"none",disabled:!0,children:"No sub-categories available"})})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"subsub_category_id",children:"Sub Sub Category"}),l.jsx(x,{name:"subsub_category_id",control:e,render:({field:e})=>l.jsxs(v,{value:e.value||"",onValueChange:a=>{const s=h.find((e=>e._id===a));s&&(e.onChange(s._id),o("subSubCategorySlug",s.slug))},disabled:!T||0===h.length,children:[l.jsx(N,{id:"subsub_category_id",children:l.jsx(_,{children:e.value&&h.length>0?h.find((a=>a._id===e.value))?.category:n&&n.subSubCategory?.category||"Select Sub Sub Category"})}),l.jsx(C,{children:h.length>0?h.map((e=>l.jsx(w,{value:e._id,children:e.category},e._id))):l.jsx(w,{value:"none",disabled:!0,children:"No sub-sub-categories available"})})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"unit",children:"Unit"}),l.jsx(x,{name:"unit",control:e,rules:{required:"Unit is required"},render:({field:e})=>l.jsxs(v,{onValueChange:e.onChange,value:e.value||void 0,children:[l.jsx(N,{id:"unit",children:l.jsx(_,{placeholder:"Select Unit"})}),l.jsx(C,{children:j?l.jsx(w,{value:"loading",children:"Loading..."}):y.map((e=>l.jsx(w,{value:e.name,children:e.name},e._id)))})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"assay",children:"Assay (%)"}),l.jsx(x,{name:"assay",control:e,render:({field:e})=>l.jsx("div",{children:l.jsx("input",{type:"string",id:"assay",min:"0",max:"100",step:"0.01",value:e.value||0,onChange:a=>e.onChange(a.target.value),className:"w-full border "})})})]})]})})})};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */E.propTypes={control:f.object.isRequired,chemicalData:f.object,watch:f.func.isRequired,setValue:f.func.isRequired};const D=e=>e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),T=({control:e,setValue:a})=>{const s=p({control:e,name:"name"});m.useEffect((()=>{if(s){const e=D(s);a("slug",e)}}),[s,a]);const o={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["link","image"],["clean"]]},d=["header","bold","italic","underline","link","image"];return l.jsx(t,{className:"w-full max-w-2xl mx-auto shadow-none border-none",children:l.jsxs(r,{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"name",children:"Name"}),l.jsx(x,{name:"name",control:e,rules:{required:"Name is required"},render:({field:e})=>l.jsx(n,{id:"name",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"slug",children:"Slug"}),l.jsx(x,{name:"slug",control:e,render:({field:e})=>l.jsx(n,{id:"slug",...e,onChange:a=>{const s=D(a.target.value);e.onChange(s)}})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"description",children:"Description"}),l.jsx(x,{name:"description",control:e,render:({field:e})=>l.jsx(c,{value:e.value||"",onChange:e.onChange,modules:o,formats:d,theme:"snow"})})]})]})})},M=({control:e,watch:a})=>{const[s,c]=m.useState({specs:!1,msds:!1}),u=a("specs"),h=a("msds"),g=(e,a="specs")=>{if(e){const s="msds"===a?"msds":"specs",l=e.split(".")[0];window.open(`/api/image/${s}/view/${l}`,"_blank")}};return l.jsx(t,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:l.jsxs(r,{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"packings",children:"Packings"}),l.jsx(x,{name:"packings",control:e,defaultValue:[],render:({field:e})=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(n,{placeholder:"Enter packing (e.g., 25kg)",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const s=a.target.value.trim();s&&!e.value.includes(s)&&(e.onChange([...e.value,s]),a.target.value="")}}}),l.jsx(o,{type:"button",onClick:a=>{const s=a.currentTarget.previousSibling,l=s.value.trim();l&&!e.value.includes(l)&&(e.onChange([...e.value,l]),s.value="")},children:"Add"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(e.value)&&e.value.map(((a,s)=>l.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[l.jsx("span",{children:a}),l.jsx("button",{type:"button",onClick:()=>{const a=e.value.filter(((e,a)=>a!==s));e.onChange(a)},className:"text-muted-foreground hover:text-foreground",children:l.jsx(d,{className:"h-4 w-4"})})]},s)))})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"grade",children:"Grade"}),l.jsx(x,{name:"grade",control:e,render:({field:e})=>l.jsx(n,{id:"grade",placeholder:"Enter grade",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"iupac",children:"IUPAC Name"}),l.jsx(x,{name:"iupac",control:e,render:({field:e})=>l.jsx(n,{id:"iupac",placeholder:"Enter IUPAC name",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"h_s_code",children:"HS Code"}),l.jsx(x,{name:"h_s_code",control:e,render:({field:e})=>l.jsx(n,{id:"h_s_code",placeholder:"Enter HS code",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"molecular_weight",children:"Molecular Weight"}),l.jsx(x,{name:"molecular_weight",control:e,render:({field:e})=>l.jsx(n,{id:"molecular_weight",type:"number",placeholder:"Enter molecular weight",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"molecular_formula",children:"Molecular Formula"}),l.jsx(x,{name:"molecular_formula",control:e,render:({field:e})=>l.jsx(n,{id:"molecular_formula",placeholder:"Enter molecular formula",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"application",children:"Applications"}),l.jsx(x,{name:"application",control:e,defaultValue:[],render:({field:e})=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(n,{placeholder:"Enter application",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const s=a.target.value.trim();s&&!e.value.includes(s)&&(e.onChange([...e.value,s]),a.target.value="")}}}),l.jsx(o,{type:"button",onClick:a=>{const s=a.currentTarget.previousSibling,l=s.value.trim();l&&!e.value.includes(l)&&(e.onChange([...e.value,l]),s.value="")},children:"Add"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(e.value)&&e.value.map(((a,s)=>l.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[l.jsx("span",{children:a}),l.jsx("button",{type:"button",onClick:()=>{const a=e.value.filter(((e,a)=>a!==s));e.onChange(a)},className:"text-muted-foreground hover:text-foreground",children:l.jsx(d,{className:"h-4 w-4"})})]},s)))})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"specs",children:"Specifications (PDF)"}),l.jsx(x,{name:"specs",control:e,render:({field:{value:e,onChange:a,...t}})=>l.jsxs("div",{className:"space-y-2",children:["string"==typeof u&&u&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[l.jsx(F,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm truncate",children:u}),l.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(u,"specs"),children:l.jsx(k,{className:"h-4 w-4"})}),l.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(""),children:l.jsx(d,{className:"h-4 w-4"})})]}),l.jsx(n,{id:"specs",type:"file",accept:".pdf",disabled:s.specs,onChange:async e=>{const s=e.target.files?.[0];s&&(c((e=>({...e,specs:!0}))),a(s),c((e=>({...e,specs:!1}))))},...t}),s.specs&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading specification file..."})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"msds",children:"MSDS (PDF)"}),l.jsx(x,{name:"msds",control:e,render:({field:{value:e,onChange:a,...t}})=>l.jsxs("div",{className:"space-y-2",children:["string"==typeof h&&h&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[l.jsx(F,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm truncate",children:h}),l.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(h,"msds"),children:l.jsx(k,{className:"h-4 w-4"})}),l.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(""),children:l.jsx(d,{className:"h-4 w-4"})})]}),l.jsx(n,{id:"msds",type:"file",accept:".pdf",disabled:s.msds,onChange:async e=>{const s=e.target.files?.[0];s&&(c((e=>({...e,msds:!0}))),a(s),c((e=>({...e,msds:!1}))))},...t}),s.msds&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading MSDS file..."})]})})]})]})})};M.propTypes={control:f.object.isRequired,watch:f.func},M.defaultProps={watch:()=>{}};const U=({control:e})=>l.jsx(t,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:l.jsxs(r,{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metatitle",children:"Meta Title"}),l.jsx(x,{name:"metatitle",control:e,render:({field:e})=>l.jsx(n,{id:"metatitle",placeholder:"Enter meta title",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metadescription",children:"Meta Description"}),l.jsx(x,{name:"metadescription",control:e,render:({field:e})=>l.jsx(S,{id:"metadescription",placeholder:"Enter meta description",...e,rows:3})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metakeywords",children:"Meta Keywords"}),l.jsx(x,{name:"metakeywords",control:e,render:({field:e})=>l.jsx(n,{id:"metakeywords",placeholder:"Enter meta keywords",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metacanonical",children:"Meta Canonical URL"}),l.jsx(x,{name:"metacanonical",control:e,render:({field:e})=>l.jsx(n,{id:"metacanonical",placeholder:"Enter canonical URL",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metalanguage",children:"Meta Language"}),l.jsx(x,{name:"metalanguage",control:e,render:({field:e})=>l.jsx(n,{id:"metalanguage",placeholder:"Enter language code (e.g., en-US)",...e})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"metaschema",children:"Meta Schema"}),l.jsx(x,{name:"metaschema",control:e,render:({field:e})=>l.jsx(S,{id:"metaschema",placeholder:"Enter JSON-LD schema",...e,rows:4})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"otherMeta",children:"Other Meta Information"}),l.jsx(x,{name:"otherMeta",control:e,render:({field:e})=>l.jsx(S,{id:"otherMeta",placeholder:"Enter any additional meta information",...e,rows:3})})]})]})}),V=({control:e,setValue:a})=>{const{fields:s,append:t,remove:r,update:u}=j({control:e,name:"images"}),h={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},g=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background","align","direction","code-block","script"],p=m.useCallback(((e,a)=>{const l=e.target.files[0];if(l){s[a]?.preview?.startsWith("blob:")&&URL.revokeObjectURL(s[a].preview);const e=URL.createObjectURL(l);u(a,{...s[a],file:l,preview:e,altText:s[a]?.altText||"",title:s[a]?.title||"",url:null})}}),[s,u]);m.useEffect((()=>()=>{s.forEach((e=>{e?.preview?.startsWith("blob:")&&URL.revokeObjectURL(e.preview)}))}),[s]);const y=m.useCallback((e=>{s[e]?.preview?.startsWith("blob:")&&URL.revokeObjectURL(s[e].preview),s[e]._id&&a(`imagesToDelete.${s[e]._id}`,!0),r(e)}),[s,r,a]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"global_tagline",children:"Global Tagline"}),l.jsx(x,{name:"global_tagline",control:e,defaultValue:"",render:({field:e})=>l.jsx(n,{id:"global_tagline",placeholder:"Enter global tagline",...e})}),l.jsx("p",{className:"text-xs text-gray-500",children:"A brief tagline that will appear globally."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"description",children:"Description"}),l.jsx(x,{name:"description",control:e,defaultValue:"",render:({field:{onChange:e,value:a}})=>l.jsx("div",{className:"quill-container",children:l.jsx(c,{id:"description",theme:"snow",value:a,onChange:e,className:"bg-white",modules:h,formats:g,placeholder:"Enter detailed description..."})})}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format your content using the toolbar above. Use headings, lists, and formatting to create well-structured content."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(i,{htmlFor:"synonyms",children:"Synonyms"}),l.jsx(x,{name:"synonyms",control:e,defaultValue:[],render:({field:e})=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(n,{placeholder:"Enter synonym",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const s=a.target.value.trim();s&&!e.value.includes(s)&&(e.onChange([...e.value,s]),a.target.value="")}}}),l.jsx(o,{type:"button",onClick:a=>{const s=a.currentTarget.previousSibling,l=s.value.trim();l&&!e.value.includes(l)&&(e.onChange([...e.value,l]),s.value="")},children:"Add"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(e.value)&&e.value.map(((a,s)=>l.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[l.jsx("span",{children:a}),l.jsx("button",{type:"button",onClick:()=>{const a=e.value.filter(((e,a)=>a!==s));e.onChange(a)},className:"text-muted-foreground hover:text-foreground",children:l.jsx(d,{className:"h-4 w-4"})})]},s)))})]})})]}),l.jsx(i,{children:"Images"}),s.map(((a,s)=>l.jsxs("div",{className:"space-y-2 border p-4 rounded-lg",children:[a.preview||a.url?l.jsx("img",{src:a.preview||`/api/image/download/${a.url}`,alt:a.altText||"Image preview",className:"w-32 h-32 object-cover rounded border"}):l.jsx("div",{className:"w-32 h-32 flex items-center justify-center border rounded bg-gray-100",children:"No Preview"}),l.jsx("input",{type:"file",onChange:e=>p(e,s),accept:"image/*",className:"block w-full text-sm text-gray-500\r\n                file:mr-4 file:py-2 file:px-4\r\n                file:rounded-full file:border-0\r\n                file:text-sm file:font-semibold\r\n                file:bg-blue-50 file:text-blue-700\r\n                hover:file:bg-blue-100"}),l.jsx(i,{htmlFor:`alt-text-${s}`,children:"Alt Text"}),l.jsx(x,{name:`images.${s}.altText`,control:e,defaultValue:a.altText||"",render:({field:e})=>l.jsx(n,{id:`alt-text-${s}`,placeholder:"Alt Text",...e})}),l.jsx(i,{htmlFor:`image-title-${s}`,children:"Image Title"}),l.jsx(x,{name:`images.${s}.title`,control:e,defaultValue:a.title||"",render:({field:e})=>l.jsx(n,{id:`image-title-${s}`,placeholder:"Image Title",...e})}),l.jsx("button",{type:"button",onClick:()=>y(s),className:"text-red-600 hover:underline",children:"Remove"})]},a.id))),l.jsx("button",{type:"button",onClick:()=>t({file:null,preview:null,altText:"",title:"",url:null}),className:"px-4 py-2 mt-4 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Image"})]})},A=()=>{const{control:e,handleSubmit:a,watch:s,setValue:t}=y({defaultValues:{category:"",sub_category:"",subsub_category_id:"",categorySlug:"",subCategorySlug:"",subSubCategorySlug:"",name:"",slug:"",images:[],catalog:"",msds:"",specs:"",table:"",synonyms:[],application:[],chemical_industries:[],product_code:"",auto_p_code:"",metatitle:"",metadescription:"",metakeywords:"",metacanonical:"",metalanguage:"",metaschema:"",otherMeta:"",imagesToDelete:{}}}),r=u(),{id:i}=h(),[n,c]=m.useState(!1),[d,x]=m.useState(null);m.useEffect((()=>{(async()=>{if(i){c(!0);try{const e=(await b.get(`/api/chemical/getChemicalById?id=${i}`)).data;x(e),e.category&&(t("category",e.category._id),t("categorySlug",e.category.slug)),e.sub_category&&(t("sub_category",e.sub_category._id),t("subCategorySlug",e.sub_category.slug)),e.subsub_category_id&&(t("subsub_category_id","object"==typeof e.subsub_category_id?e.subsub_category_id._id:e.subsub_category_id),t("subSubCategorySlug",e.subsub_category_id.slug||"")),Object.entries(e).forEach((([e,a])=>{"category"!==e&&"sub_category"!==e&&"subsub_category_id"!==e&&"images"!==e&&t(e,a)})),e.images&&e.images.length>0&&t("images",e.images)}catch(e){}finally{c(!1)}}})()}),[i,t]);return n?l.jsx("div",{children:"Loading existing chemical data..."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 flex items-center text-sm text-gray-500",children:[l.jsx(g,{to:"/",className:"hover:text-purple-600",children:"Home"}),l.jsx("span",{className:"mx-2",children:"/"}),l.jsx(g,{to:"/chemical-table",className:"hover:text-purple-600",children:"Chemicals"}),l.jsx("span",{className:"mx-2",children:"/"}),l.jsx("span",{className:"text-gray-900",children:i?"Edit Chemical":"New Chemical"})]}),l.jsxs("form",{onSubmit:a((async e=>{try{const a=new FormData;let s;e.images.forEach(((e,s)=>{e.file instanceof File?(a.append("images",e.file),a.append(`altText-${s}`,e.altText||""),a.append(`title-${s}`,e.title||"")):e.url&&(a.append(`existingImages[${s}][url]`,e.url),a.append(`existingImages[${s}][altText]`,e.altText||""),a.append(`existingImages[${s}][title]`,e.title||""))})),Object.keys(e.imagesToDelete).forEach((e=>{a.append("imagesToDelete[]",e)})),Object.entries(e).forEach((([e,s])=>{"images"!==e&&"imagesToDelete"!==e&&null!=s&&""!==s&&(Array.isArray(s)?s.forEach(((s,l)=>{a.append(`${e}[${l}]`,s)})):"molecular_weight"===e&&s?a.append(e,Number(s)):a.append(e,s))})),s=i?await b.put(`/api/chemical/updateChemicalById?id=${i}`,a,{headers:{"Content-Type":"multipart/form-data"}}):await b.post("/api/chemical/add",a,{headers:{"Content-Type":"multipart/form-data"}}),r("/chemical-table")}catch(a){}})),className:"space-y-6 bg-white",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"border p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Category Information"}),l.jsx(E,{control:e,watch:s,setValue:t,chemicalData:d})]}),l.jsxs("div",{className:"border p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Details"}),l.jsx(T,{control:e,setValue:t,chemicalData:d})]}),l.jsxs("div",{className:"border p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Properties"}),l.jsx(M,{control:e,chemicalData:d})]}),l.jsxs("div",{className:"border p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Image Upload"}),l.jsx(V,{control:e,setValue:t,chemicalData:d})]}),l.jsxs("div",{className:"border p-4 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meta Information"}),l.jsx(U,{control:e,chemicalData:d})]})]}),l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx(o,{type:"submit",className:"px-8 py-3 w-1/4 text-white rounded-md hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105",children:i?"Update Chemical":"Submit Chemical"})})]})]})};export{A as ChemicalFormPage,A as default};
//# sourceMappingURL=ChemcialFormPage-6pEBe8fc.js.map
