import{r as s,u as ee,g as B,j as e}from"./index-CkLbobrs-1746075606789.js";const se=()=>{const[c,b]=s.useState(""),[i,u]=s.useState(null),[p,g]=s.useState(""),[o,x]=s.useState(""),[r,m]=s.useState(""),[f,G]=s.useState([]),[y,j]=s.useState(""),[v,C]=s.useState("active"),[N,w]=s.useState(""),[S,F]=s.useState(""),[n,d]=s.useState(""),[k,M]=s.useState(""),[I,$]=s.useState(""),[q,P]=s.useState(""),[A,D]=s.useState(""),[E,L]=s.useState(""),[U,_]=s.useState(""),[O,R]=s.useState(""),H=ee(),K=t=>{const l=t.target.files[0];u(l)},W=()=>{u(null)};s.useEffect(()=>{X()},[]);const X=async()=>{try{const t=await B.get("/api/chemicalCategory/getall",{withCredentials:!0});G(t.data)}catch(t){console.error(t)}},Y=()=>{let t="http://localhost:3000";return o&&!r?`${t}/${n}`:o&&r?`${t}/${n}`:`${t}/${n}`};s.useEffect(()=>{F(Y())},[n,o,r]),s.useEffect(()=>{d(c.replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))},[c]),s.useEffect(()=>{d(n.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-"))},[n]);const J=async t=>{t.preventDefault();try{let l="/api/chemicalCategory/insertCategory";const a=new FormData;a.append("category",c),i&&a.append("photo",i),a.append("alt",p),a.append("slug",n),a.append("metatitle",k),a.append("metakeywords",q),a.append("metadescription",I),a.append("metalanguage",A),a.append("metacanonical",E),a.append("metaschema",U),a.append("otherMeta",O),a.append("url",S),a.append("priority",y),a.append("changeFreq",N),a.append("status",v),o&&!r?l=`/api/chemicalCategory/insertSubCategory?categoryId=${o}`:o&&r&&(l=`/api/chemicalCategory/insertSubSubCategory?categoryId=${o}&subCategoryId=${r}`);const h=await B.post(l,a,{withCredentials:!0});b(""),u(null),g(""),x(""),m(""),d(""),C("active"),M(""),$(""),P(""),D(""),L(""),_(""),R(""),F(""),j(""),w(""),H("/chemical-category")}catch(l){console.error(l)}},Q=t=>e.jsx("option",{value:t._id,children:t.category},t._id),V=t=>{const l=t.target.value;x(l),m("")},Z=t=>{const l=t.target.value;m(l)},T=(t,l)=>{for(const a of t){if(a._id===l)return a;if(a.subCategories){const h=T(a.subCategories,l);if(h)return h}}return null},z=((t,l)=>{const a=T(t,l);return a?a.subCategories:[]})(f,o);return e.jsxs("form",{onSubmit:J,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Category"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"parentCategory",className:"block font-semibold mb-2",children:"Parent Category"}),e.jsxs("select",{id:"parentCategory",value:o,onChange:V,className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Parent Category"}),f.map(Q)]})]}),z.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subCategory",className:"block font-semibold mb-2",children:"Subcategory (optional)"}),e.jsxs("select",{id:"subCategory",value:r,onChange:Z,className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Subcategory"}),z.map(t=>e.jsx("option",{value:t._id,children:t.category},t._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Category"}),e.jsx("input",{type:"text",id:"title",value:c,onChange:t=>b(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),e.jsx("input",{type:"file",name:"photo",id:"photo",onChange:K,className:"border rounded focus:outline-none",accept:"image/*"}),i&&e.jsxs("div",{className:"mt-2 w-56 relative group",children:[e.jsx("img",{src:URL.createObjectURL(i),alt:"Gallery",className:"h-32 w-56 object-cover"}),e.jsx("button",{type:"button",onClick:W,className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),e.jsx("input",{type:"text",id:"alt",value:p,onChange:t=>g(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]})]})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{type:"text",id:"slug",value:n,onChange:t=>d(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{type:"text",id:"url",value:S,disabled:!0,className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("textarea",{id:"meta",value:k,onChange:t=>M(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta",value:I,onChange:t=>$(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("textarea",{id:"meta",value:q,onChange:t=>P(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("textarea",{id:"meta",value:E,onChange:t=>L(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("textarea",{id:"meta",value:A,onChange:t=>D(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("textarea",{id:"meta",value:O,onChange:t=>R(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("textarea",{id:"meta",value:U,onChange:t=>_(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:y,onChange:t=>j(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:N,onChange:t=>w(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:v,onChange:t=>C(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Category"})]})};export{se as default};
