import{u as w,j as e,L as C,f as S,r as l,k as B,g as b,b as L,dM as E}from"./index-VybT_Q4I-1746105499204.js";import{B as I}from"./BreadCrumb-ygJ-PBWy-1746105499204.js";import{B as j}from"./Banner-DL1hr23l-1746105499204.js";import{B as P}from"./BlogDetailPage-nKHDXiQx-1746105499204.js";function $({title:t,image:s,products:a,slug:c,subCategorySlug:n}){console.log("SubCategoryProductCard",n);const g=w(),x=()=>{a&&a.length>0?(a[0].slug,g(`/${c}/${n}`)):console.warn("No products available to redirect.")};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-[#0a3161] mb-2",children:t}),e.jsx("div",{className:"h-1 w-16 bg-[#0a3161] mb-6"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0 border bg-[#2b60d9]",children:e.jsx("div",{className:"w-64 h-64 rounded-full m-4 border overflow-hidden",children:e.jsx("img",{src:s||"/placeholder.svg",alt:t,className:"w-full h-full object-cover"})})}),e.jsx("div",{className:"flex-grow",children:e.jsx("div",{className:"flex flex-col gap-2 max-h-[220px] overflow-y-auto pr-2 scrollbar",children:a&&a.length>0?a.map((r,u)=>e.jsx("div",{children:e.jsx(C,{to:`/${r.subCategorySlug}/${r.slug}`,className:"flex items-center gap-2 bg-gray-200",children:e.jsx("p",{className:" py-2 px-5 text-sm rounded-md hover:text-[#2b60d9] cursor-pointer",children:r.name})})},u)):e.jsx("p",{className:"text-gray-500 bg-gray-200 py-2 px-5 text-sm rounded-md",children:"No products available for this subcategory."})})})]}),e.jsx("button",{className:"mt-6 bg-[#e95821] float-start hover:bg-[#eb4e10] text-white font-bold py-2 px-5 rounded transition-colors",onClick:x,children:"VIEW MORE"})]})}function k(){var f;const{slug:t}=S(),[s,a]=l.useState(null),[c,n]=l.useState({}),[g,x]=l.useState(!0),[r,u]=l.useState([]),[M,v]=l.useState(!0),h=location.pathname.replace(/^\//,"")||"introduction";return l.useEffect(()=>{(async()=>{try{const o=await b.get(`/api/banner/getByPageSlug?pageSlug=${h}`);u(o.data||[])}catch(o){console.error("Failed to fetch banner:",o)}finally{v(!1)}})()},[h]),l.useEffect(()=>{(async()=>{try{const o=await b.get(`/api/chemicalCategory/getSpecificCategory?slug=${t}`),{category:y,products:N}=o.data;a(y);const d={};N.forEach(p=>{const m=p.subCategoryId;d[m]||(d[m]=[]),d[m].push(p)}),n(d)}catch(o){console.error("Error fetching category data:",o)}finally{x(!1)}})()},[t]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[r&&r.length>0?e.jsx(j,{imageUrl:`/api/image/download/${r[0].image}`}):e.jsx(j,{imageUrl:B}),e.jsx("div",{className:"container mx-auto px-4 max-w-7xl -mt-12 relative z-10",children:e.jsx(I,{categorySlug:s==null?void 0:s.category,slug:t})})]}),e.jsxs("div",{className:"container mx-auto px-4 pb-8 max-w-7xl",children:[e.jsx("h1",{className:"text-4xl font-bold text-[#0a3161] mb-4",children:(s==null?void 0:s.category)||"INDUSTRIAL OILS"}),e.jsx("div",{className:"h-1 w-24 bg-[#0a3161] mb-6"}),e.jsx("p",{className:"text-gray-700 mb-10",dangerouslySetInnerHTML:{__html:(s==null?void 0:s.details)||"Explore our range of industrial oils and lubricants."}}),g?e.jsx("p",{children:"Loading products..."}):((f=s==null?void 0:s.subCategories)==null?void 0:f.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.subCategories.map((i,o)=>e.jsx($,{slug:t,subCategorySlug:i.slug,title:i.category,image:`/api/logo/download/${i.photo}`,products:c[i._id]||[]},o))}):e.jsx("p",{children:"No categories found."})]})]})}function A(){const t=L(),{data:s,isLoading:a}=E();console.log(s);const c=s==null?void 0:s.some(n=>t.pathname.includes(n.slug));return e.jsx("div",{children:a?e.jsx("div",{children:"Loading..."}):c?e.jsx(P,{}):e.jsx(k,{})})}export{A as default};
