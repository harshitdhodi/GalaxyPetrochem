import{r as c,u as S,f as N,g as u,j as e,L as x}from"./index-pxV5F7Vk-1745663305082.js";import{F as r}from"./index-Div4uJ3D-1745663305082.js";import{s as i}from"./index-B7AI3bRi-1745663305082.js";import{B as p}from"./Breadcrumb-B5snZWHz-1745663305082.js";import{C as v}from"./index-0MpkyHc3-1745663305082.js";import{I as j}from"./index-Bngn6tE2-1745663305082.js";import{U as T,R as E}from"./index-CyByDs6M-1745663305082.js";import{B as w}from"./index-BybzuWVW-1745663305082.js";import"./CheckCircleFilled-Cp2-FAB3-1745663305082.js";import"./ExclamationCircleFilled-CnrITCO8-1745663305082.js";import"./InfoCircleFilled-xYJVfIFE-1745663305082.js";import"./dropdown-CXDBCN-k-1745663305082.js";import"./EllipsisOutlined-D0B4H0TJ-1745663305082.js";import"./Skeleton-DNWMcsdR-1745663305082.js";import"./PlusOutlined-CWRogint-1745663305082.js";import"./getAllowClear-DWvMdzzD-1745663305082.js";import"./Input-e0_lhlda-1745663305082.js";import"./TextArea-DDdcYleZ-1745663305082.js";import"./DeleteOutlined-VGG7j7x--1745663305082.js";import"./DownloadOutlined-Wrz8VMpn-1745663305082.js";import"./CheckOutlined-BIHi7Ikt-1745663305082.js";const Y=()=>{const[g,o]=c.useState(!1),[d,b]=c.useState([]),[n,h]=c.useState(null),[f]=r.useForm(),y=S(),{id:m}=N(),a=!!m;c.useEffect(()=>{a&&I()},[a]);const I=async()=>{o(!0);try{const t=(await u.get(`/api/slideShow/getById?id=${m}`)).data;f.setFieldsValue({title:t.title,altText:t.altText}),t.image&&h(`/api/logo/download/${t.image}`)}catch(s){i.error("Failed to fetch slide show data."),console.error(s)}finally{o(!1)}},U=async s=>{const t=new FormData;if(d.length>0)t.append("image",d[0].originFileObj);else if(!a){i.error("Please upload an image.");return}t.append("altText",s.altText),t.append("title",s.title),a&&t.append("id",m),o(!0);try{let l;a?(l=await u.put(`/api/slideShow/update?id=${m}`,t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image updated successfully!")):(l=await u.post("/api/slideShow/addimages",t,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Image uploaded successfully!")),y("/slideShow-table")}catch(l){i.error(a?"Failed to update image.":"Failed to upload image."),console.error(l)}finally{o(!1)}},F=({fileList:s})=>{if(b(s.slice(-1)),s.length>0){const t=s[0].originFileObj;n&&URL.revokeObjectURL(n);const l=URL.createObjectURL(t);h(l)}else a||h(null)};return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsxs(p,{className:"self-start mb-4 text-gray-600",children:[e.jsx(p.Item,{children:e.jsx(x,{to:"/dashboard",children:"Dashboard"})}),e.jsx(p.Item,{children:e.jsx(x,{to:"/slideShow-table",children:"SlideShow Table"})}),e.jsxs(p.Item,{children:[a?"Edit":"Upload"," Image"]})]}),e.jsxs(v,{className:"w-full max-w-4lg shadow-lg rounded-xl",children:[e.jsxs("h2",{className:"text-xl font-semibold text-left mb-4",children:[a?"Edit":"Upload"," Image"]}),e.jsxs(r,{form:f,layout:"vertical",onFinish:U,className:"w-full lg:w-1/2",children:[e.jsx(r.Item,{label:"Image Title",name:"title",rules:[{required:!0,message:"Please enter image title"}],children:e.jsx(j,{placeholder:"Enter image title"})}),e.jsx(r.Item,{label:"Alt Name",name:"altText",rules:[{required:!0,message:"Please enter alt text"}],children:e.jsx(j,{placeholder:"Enter alt text"})}),e.jsxs(r.Item,{label:"Upload Image",children:[e.jsx(T,{fileList:d,beforeUpload:()=>!1,maxCount:1,onChange:F,accept:"image/*",children:e.jsx(w,{icon:e.jsx(E,{}),children:"Select Image"})}),a&&!d.length&&e.jsx("div",{className:"mt-2 text-gray-500",children:"Only upload a new image if you want to replace the existing one."})]}),n&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:n,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),e.jsx(r.Item,{children:e.jsx(w,{type:"primary",htmlType:"submit",block:!0,loading:g,className:"mt-4",children:g?a?"Updating...":"Uploading...":a?"Update Image":"Upload Image"})})]})]})]})};export{Y as default};
