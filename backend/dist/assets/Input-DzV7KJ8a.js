import{_ as e,c as t,b as n,d as r,e as a}from"./objectSpread2-C2mPdFQ-.js";import{b as s,R as o}from"./vendor-X2E3PIZN.js";import{I as l,c as u}from"./AntdIcon-Bc_RgQsY.js";import{h as c}from"./toArray-DIarnBRF.js";import{u as i,o as f,n as p,d as m,h as d,f as v,D as g,F as C,c as x,a6 as y}from"./index-CvhnQ2ZS.js";import{h,B as w,t as b,r as E,j,k as N,l as S,u as O,e as R,f as F}from"./getAllowClear-CF0z5FWe.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},B=function(t,n){return s.createElement(l,e({},t,{ref:n,icon:$}))},A=s.forwardRef(B),z=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],I=s.forwardRef((function(l,p){var m=l.autoComplete,d=l.onChange,v=l.onFocus,g=l.onBlur,C=l.onPressEnter,x=l.onKeyDown,y=l.onKeyUp,j=l.prefixCls,N=void 0===j?"rc-input":j,S=l.disabled,O=l.htmlSize,R=l.className,F=l.maxLength,$=l.suffix,B=l.showCount,A=l.count,I=l.type,P=void 0===I?"text":I,K=l.classes,k=l.classNames,D=l.styles,L=l.onCompositionStart,T=l.onCompositionEnd,U=t(l,z),M=s.useState(!1),V=n(M,2),W=V[0],H=V[1],Q=s.useRef(!1),_=s.useRef(!1),q=s.useRef(null),G=s.useRef(null),J=function(e){q.current&&b(q.current,e)},X=i(l.defaultValue,{value:l.value}),Y=n(X,2),Z=Y[0],ee=Y[1],te=null==Z?"":String(Z),ne=s.useState(null),re=n(ne,2),ae=re[0],se=re[1],oe=h(A,B),le=oe.max||F,ue=oe.strategy(te),ce=!!le&&ue>le;s.useImperativeHandle(p,(function(){var e;return{focus:J,blur:function(){var e;null===(e=q.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=q.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=q.current)||void 0===e||e.select()},input:q.current,nativeElement:(null===(e=G.current)||void 0===e?void 0:e.nativeElement)||q.current}})),s.useEffect((function(){_.current&&(_.current=!1),H((function(e){return(!e||!S)&&e}))}),[S]);var ie=function(e,t,n){var r,a,s=t;if(!Q.current&&oe.exceedFormatter&&oe.max&&oe.strategy(t)>oe.max)t!==(s=oe.exceedFormatter(t,{max:oe.max}))&&se([(null===(r=q.current)||void 0===r?void 0:r.selectionStart)||0,(null===(a=q.current)||void 0===a?void 0:a.selectionEnd)||0]);else if("compositionEnd"===n.source)return;ee(s),q.current&&E(q.current,e,d,s)};s.useEffect((function(){var e;ae&&(null===(e=q.current)||void 0===e||e.setSelectionRange.apply(e,c(ae)))}),[ae]);var fe,pe=function(e){ie(e,e.target.value,{source:"change"})},me=function(e){Q.current=!1,ie(e,e.currentTarget.value,{source:"compositionEnd"}),null==T||T(e)},de=function(e){C&&"Enter"===e.key&&!_.current&&(_.current=!0,C(e)),null==x||x(e)},ve=function(e){"Enter"===e.key&&(_.current=!1),null==y||y(e)},ge=function(e){H(!0),null==v||v(e)},Ce=function(e){_.current&&(_.current=!1),H(!1),null==g||g(e)},xe=ce&&"".concat(N,"-out-of-range");return o.createElement(w,e({},U,{prefixCls:N,className:u(R,xe),handleReset:function(e){ee(""),J(),q.current&&E(q.current,e,d)},value:te,focused:W,triggerFocus:J,suffix:function(){var e=Number(le)>0;if($||oe.show){var t=oe.showFormatter?oe.showFormatter({value:te,count:ue,maxLength:le}):"".concat(ue).concat(e?" / ".concat(le):"");return o.createElement(o.Fragment,null,oe.show&&o.createElement("span",{className:u("".concat(N,"-show-count-suffix"),a({},"".concat(N,"-show-count-has-suffix"),!!$),null==k?void 0:k.count),style:r({},null==D?void 0:D.count)},t),$)}return null}(),disabled:S,classes:K,classNames:k,styles:D}),(fe=f(l,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),o.createElement("input",e({autoComplete:m},fe,{onChange:pe,onFocus:ge,onBlur:Ce,onKeyDown:de,onKeyUp:ve,className:u(N,a({},"".concat(N,"-disabled"),S),null==k?void 0:k.input),style:null==D?void 0:D.input,ref:q,size:O,type:P,onCompositionStart:function(e){Q.current=!0,null==L||L(e)},onCompositionEnd:me}))))}));function P(e,t){const n=s.useRef([]),r=()=>{n.current.push(setTimeout((()=>{var t,n,r,a;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=e.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(a=e.current)||void 0===a||a.input.removeAttribute("value"))})))};return s.useEffect((()=>(t&&r(),()=>n.current.forEach((e=>{e&&clearTimeout(e)})))),[]),r}const K=s.forwardRef(((e,t)=>{const{prefixCls:n,bordered:r=!0,status:a,size:l,disabled:c,onBlur:i,onFocus:f,suffix:h,allowClear:w,addonAfter:b,addonBefore:E,className:$,style:B,styles:A,rootClassName:z,onChange:K,classNames:k,variant:D}=e,L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:T,direction:U,allowClear:M,autoComplete:V,className:W,style:H,classNames:Q,styles:_}=p("input"),q=T("input",n),G=s.useRef(null),J=m(q),[X,Y,Z]=j(q,z),[ee]=N(q,J),{compactSize:te,compactItemClassnames:ne}=d(q,U),re=v((e=>{var t;return null!==(t=null!=l?l:te)&&void 0!==t?t:e})),ae=o.useContext(g),se=null!=c?c:ae,{status:oe,hasFeedback:le,feedbackIcon:ue}=s.useContext(C),ce=F(oe,a),ie=function(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}(e)||!!le;s.useRef(ie);const fe=P(G,!0),pe=(le||h)&&o.createElement(o.Fragment,null,h,le&&ue),me=S(null!=w?w:M),[de,ve]=O("input",D,r);return X(ee(o.createElement(I,Object.assign({ref:x(t,G),prefixCls:q,autoComplete:V},L,{disabled:se,onBlur:e=>{fe(),null==i||i(e)},onFocus:e=>{fe(),null==f||f(e)},style:Object.assign(Object.assign({},H),B),styles:Object.assign(Object.assign({},_),A),suffix:pe,allowClear:me,className:u($,z,Z,J,ne,W),onChange:e=>{fe(),null==K||K(e)},addonBefore:E&&o.createElement(y,{form:!0,space:!0},E),addonAfter:b&&o.createElement(y,{form:!0,space:!0},b),classNames:Object.assign(Object.assign(Object.assign({},k),Q),{input:u({[`${q}-sm`]:"small"===re,[`${q}-lg`]:"large"===re,[`${q}-rtl`]:"rtl"===U},null==k?void 0:k.input,Q.input,Y),variant:u({[`${q}-${de}`]:ve},R(q,ce)),affixWrapper:u({[`${q}-affix-wrapper-sm`]:"small"===re,[`${q}-affix-wrapper-lg`]:"large"===re,[`${q}-affix-wrapper-rtl`]:"rtl"===U},Y),wrapper:u({[`${q}-group-rtl`]:"rtl"===U},Y),groupWrapper:u({[`${q}-group-wrapper-sm`]:"small"===re,[`${q}-group-wrapper-lg`]:"large"===re,[`${q}-group-wrapper-rtl`]:"rtl"===U,[`${q}-group-wrapper-${de}`]:ve},R(`${q}-group-wrapper`,ce,le),Y)})}))))}));export{K as I,A as R,P as u};
//# sourceMappingURL=Input-DzV7KJ8a.js.map
