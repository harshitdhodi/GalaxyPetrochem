import{ba as e,dK as s,j as a,C as i,b6 as t,b7 as r,aD as l,aE as d,I as n,B as o}from"./main-CYgOQvaw.js";import{k as c,f as m,b as h}from"./vendor-BCMiqwDy.js";import{b as x}from"./index.esm-nvYjwl0o.js";import{t as p,o as j,a as u,s as b,l as g}from"./index-DNG4Sede.js";import{T as f}from"./textarea-BQffPqX4.js";import{S as y,a as N,b as v,c as C,d as w}from"./select-C9JtKdjQ.js";import{B as S}from"./BreadCrumb-CCpOg2-Q.js";import{B as F}from"./react-toastify.esm-BsgWllsW.js";import"./utils-ZFgnvnbw.js";import"./index-D3SX27xu.js";import"./index-prcspqn7.js";import"./check-BmKpgWX1.js";import"./chevron-up-LTThVSTS.js";import"./chevron-right-BHJrePhs.js";const E=j({name:b().min(1,"Customer name is required"),contactPerson:b().optional(),email:b().email("Invalid email address"),mobile:b().min(1,"Mobile number is required"),website:b().url("Invalid URL").optional().or(g("")),address:b().optional(),country:b().optional(),state:b().optional(),city:b().optional(),description:b().optional(),image:u().optional()}),U=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Edit Customer",href:null}];function P(){const{id:j}=c(),{data:u,isLoading:b}=e(j),[g,{isLoading:P}]=s(),k=m(),[A]=h.useState([{isoCode:"US",name:"United States"},{isoCode:"CA",name:"Canada"},{isoCode:"UK",name:"United Kingdom"},{isoCode:"IN",name:"India"},{isoCode:"AU",name:"Australia"}]),I={US:[{isoCode:"NY",name:"New York"},{isoCode:"CA",name:"California"},{isoCode:"TX",name:"Texas"}],IN:[{isoCode:"MH",name:"Maharashtra"},{isoCode:"DL",name:"Delhi"},{isoCode:"KA",name:"Karnataka"}]},L={NY:[{name:"New York City"},{name:"Buffalo"}],CA:[{name:"Los Angeles"},{name:"San Francisco"}],MH:[{name:"Mumbai"},{name:"Pune"}]},[B,D]=h.useState([]),[M,V]=h.useState([]),{register:K,handleSubmit:T,watch:Y,setValue:H,reset:R,formState:{errors:q}}=x({resolver:p(E),defaultValues:{name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}}),z=Y("country"),O=Y("state"),W=Y("image");h.useEffect((()=>{if(z){D(I[z]||[]),u||(H("state",""),H("city",""))}else D([]),V([])}),[z,H,u]),h.useEffect((()=>{if(O){V(L[O]||[]),u||H("city","")}else V([])}),[O,H,u]),h.useEffect((()=>{if(u?.data){["name","contactPerson","email","mobile","website","address","country","state","city","description","image"].forEach((e=>{void 0!==u.data[e]&&H(e,u.data[e]||"")}))}}),[u,H]);return b?a.jsx("div",{children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ml-1",children:a.jsx(S,{items:U})}),a.jsxs(i,{className:"w-full mt-4 mx-auto",children:[a.jsx(t,{children:a.jsx(r,{className:"text-xl text-purple-700",children:"Edit Customer"})}),a.jsx(l,{children:a.jsxs("form",{onSubmit:T((async e=>{try{const s=new FormData;Object.keys(e).forEach((a=>{"image"!==a&&s.append(a,e[a]||"")})),e.image instanceof File&&s.append("image",e.image),s.append("id",j);await g({id:j,data:s}).unwrap();F.success("Customer updated successfully"),k("/customer-table")}catch(s){F.error(s.message||"Failed to update customer")}})),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"name",children:["Customer Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"name",...K("name"),className:q.name?"border-red-500":""}),q.name&&a.jsx("p",{className:"text-red-500 text-sm",children:q.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"contactPerson",children:"Contact Person"}),a.jsx(n,{id:"contactPerson",...K("contactPerson")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"email",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"email",type:"email",...K("email"),className:q.email?"border-red-500":""}),q.email&&a.jsx("p",{className:"text-red-500 text-sm",children:q.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(d,{htmlFor:"mobile",children:["Mobile Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(n,{id:"mobile",...K("mobile"),className:q.mobile?"border-red-500":""}),q.mobile&&a.jsx("p",{className:"text-red-500 text-sm",children:q.mobile.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"website",children:"Website"}),a.jsx(n,{id:"website",type:"url",...K("website"),className:q.website?"border-red-500":""}),q.website&&a.jsx("p",{className:"text-red-500 text-sm",children:q.website.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"country",children:"Country"}),a.jsxs(y,{value:z,onValueChange:e=>H("country",e),children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select Country"})}),a.jsx(C,{children:A.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"state",children:"State/Province"}),a.jsxs(y,{value:O,onValueChange:e=>H("state",e),disabled:!z||0===B.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select State"})}),a.jsx(C,{children:B.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"city",children:"City"}),a.jsxs(y,{value:Y("city"),onValueChange:e=>H("city",e),disabled:!O||0===M.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select City"})}),a.jsx(C,{children:M.map((e=>a.jsx(w,{value:e.name,children:e.name},e.name)))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"address",children:"Address"}),a.jsx(f,{id:"address",className:"min-h-[100px]",...K("address")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{children:"Upload image"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:a.jsx("img",{src:W instanceof File?URL.createObjectURL(W):W?`/api/logo/download/${W}`:"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),a.jsx(o,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),a.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void F.error("Please upload an image file");if(s.size>5242880)return void F.error("Image size should be less than 5MB");H("image",s)}},className:"hidden"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(d,{htmlFor:"description",children:"Description"}),a.jsx(f,{id:"description",...K("description"),className:"min-h-[200px]",placeholder:"Enter customer description"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(o,{type:"submit",disabled:P,className:"bg-green-500 text-white hover:bg-green-600",children:P?"Saving...":"Save"}),a.jsx(o,{type:"button",variant:"destructive",onClick:()=>k("/customer-table"),children:"Cancel"})]})]})})]})]})}export{P as default};
//# sourceMappingURL=EditCustomerForm-_A08wiwn.js.map
