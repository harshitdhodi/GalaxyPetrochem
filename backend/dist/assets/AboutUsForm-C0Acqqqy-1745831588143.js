import{f as V,u as D,r as c,e3 as q,e4 as L,e5 as N,j as e,aA as y}from"./index-DG2rto3Y-1745831588143.js";import{F as l}from"./index-b2xj7zTv-1745831588143.js";import{S as P}from"./index-CjQXF0JN-1745831588143.js";import{B as T}from"./Breadcrumb-PfUx4Cjk-1745831588143.js";import{S as h}from"./index-dODeG_Wg-1745831588143.js";import{I as m}from"./index-BMGrKtYr-1745831588143.js";import{B as f}from"./index-BfdHs_lC-1745831588143.js";import{U as k,R as B}from"./index-CI9ZbDTU-1745831588143.js";import{s as d}from"./index-Dv3I8tPc-1745831588143.js";import"./CheckCircleFilled-DSXL8YSB-1745831588143.js";import"./ExclamationCircleFilled-BJKFcBcu-1745831588143.js";import"./dropdown-DcKUDoVB-1745831588143.js";import"./EllipsisOutlined-BuTei6jF-1745831588143.js";import"./getAllowClear-Bc9h7APX-1745831588143.js";import"./CheckOutlined-BRS9TLj4-1745831588143.js";import"./Input-CQNhaySu-1745831588143.js";import"./TextArea-xADr5M1q-1745831588143.js";import"./DeleteOutlined-NRJMLvSB-1745831588143.js";import"./DownloadOutlined-DbGTNF7q-1745831588143.js";import"./InfoCircleFilled-CqVoc5ST-1745831588143.js";const ae=()=>{const{id:r}=V(),p=D(),[o]=l.useForm(),[g,b]=c.useState([]),[M,u]=c.useState(""),[n,x]=c.useState(!1),{data:s,isLoading:I}=q(r),[U]=L(),[F]=N();c.useEffect(()=>{s&&(o.setFieldsValue({title:s.title,shortDescription:s.shortDescription,description:s.description,imageTitle:s.imageTitle,altName:s.altName,section:s.section,slug:s.slug}),u(s.slug),x(s.slug!==s.section.toLowerCase().replace(/\s+/g,"-")),s.image&&b([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${s.image}`}]))},[s,o]),c.useEffect(()=>{const t=o.getFieldValue("section");if(t&&!n){const i=t.toLowerCase().replace(/\s+/g,"-");u(i),o.setFieldsValue({slug:i})}},[o.getFieldValue("section"),n]);const j={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},C=async t=>{var i,S;try{const a=new FormData;a.append("title",t.title),a.append("shortDescription",t.shortDescription),a.append("description",t.description),a.append("imageTitle",t.imageTitle),a.append("altName",t.altName),a.append("section",t.section),a.append("slug",t.slug),(i=g[0])!=null&&i.originFileObj&&a.append("image",g[0].originFileObj),r?(await F({id:r,formData:a}).unwrap(),d.success("About Us updated successfully")):(await U(a).unwrap(),d.success("About Us created successfully")),p("/about-us-table")}catch(a){const w=((S=a.data)==null?void 0:S.error)||`Failed to ${r?"update":"create"} About Us entry`;d.error(w)}},A={beforeUpload:t=>(t.type.startsWith("image/")||d.error("You can only upload image files!"),!1),onChange:({fileList:t})=>b(t),fileList:g};return I&&r?e.jsx(P,{size:"large"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{items:[{title:"Dashboard",onClick:()=>p("/dashboard")},{title:"About Us",onClick:()=>p("/about-us-table")},{title:r?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),e.jsxs(l,{form:o,layout:"vertical",onFinish:C,children:[e.jsx(l.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:e.jsxs(h,{placeholder:"Select a section",onChange:t=>{if(!n){const i=t.toLowerCase().replace(/\s+/g,"-");u(i),o.setFieldsValue({slug:i})}},children:[e.jsx(h.Option,{value:"Introduction",children:"Introduction"}),e.jsx(h.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),e.jsx(l.Item,{name:"slug",label:e.jsxs("span",{children:["Slug",e.jsx(f,{type:"link",size:"small",onClick:()=>{if(x(!n),n){const i=o.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");u(i),o.setFieldsValue({slug:i})}else{const t=o.getFieldValue("slug");u(t)}},style:{marginLeft:8},children:n?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:e.jsx(m,{disabled:!n,onChange:t=>{n&&u(t.target.value)}})}),e.jsx(l.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:e.jsx(m,{})}),e.jsx(l.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:e.jsx(y,{modules:j,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(l.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:e.jsx(y,{modules:j,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(l.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:e.jsx(k,{...A,listType:"picture",children:e.jsx(f,{icon:e.jsx(B,{}),children:r?"Change Image":"Click to Upload"})})}),e.jsx(l.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:e.jsx(m,{})}),e.jsx(l.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:e.jsx(m,{})}),e.jsx(l.Item,{children:e.jsx(f,{type:"primary",htmlType:"submit",children:r?"Update":"Submit"})})]})]})};export{ae as default};
