import{r as l,j as o,aA as F,g as p}from"./index-pxV5F7Vk-1745663305082.js";import{F as d}from"./index-Div4uJ3D-1745663305082.js";import{B as x}from"./index-BybzuWVW-1745663305082.js";import{s as c}from"./index-B7AI3bRi-1745663305082.js";import"./CheckCircleFilled-Cp2-FAB3-1745663305082.js";import"./ExclamationCircleFilled-CnrITCO8-1745663305082.js";import"./InfoCircleFilled-xYJVfIFE-1745663305082.js";const v=()=>{const[a]=d.useForm(),[n,i]=l.useState(""),[C,g]=l.useState(""),[m,h]=l.useState(null),b=async()=>{try{const t=(await p.get("/api/blogCard/getCard")).data[0];h(t._id),i(t.blogCard);const s=new DOMParser().parseFromString(t.blogCard,"text/html"),r=s.getElementsByTagName("*");for(let u of r)(u.style.color==="white"||u.style.color==="#ffffff")&&(u.style.color="black");g(s.body.innerHTML),a.setFieldsValue({blogCard:t.blogCard})}catch(e){console.error("Failed to fetch blog card:",e),c.error("Failed to fetch blog card.")}};l.useEffect(()=>{b()},[a]);const y=e=>{i(e);const f=new DOMParser().parseFromString(e,"text/html"),s=f.getElementsByTagName("*");for(let r of s)(r.style.color==="white"||r.style.color==="#ffffff")&&(r.style.color="black");g(f.body.innerHTML)},B=async()=>{try{m?(await p.put(`/api/blogCard/editCard/${m}`,{blogCard:n}),c.success("Blog card updated successfully!")):(await p.post("/api/blogCard/addCard",{blogCard:n}),c.success("Blog card added successfully!")),a.resetFields(),i(""),g(""),b()}catch(e){console.error("Failed to save blog card:",e),c.error("Failed to save blog card.")}};return o.jsxs(d,{form:a,layout:"vertical",onFinish:B,name:"blog_card_form",children:[o.jsx(d.Item,{name:"blogCard",label:"Blog Card Content",rules:[{required:!0,message:"Please input the blog card content!"}],children:o.jsx(F,{value:C||n,onChange:y,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","blockquote"],[{align:[]}],["clean"]]},formats:["header","font","list","bold","italic","underline","blockquote","align"]})}),o.jsx(d.Item,{children:o.jsx(x,{type:"primary",htmlType:"submit",children:m?"Update Blog Card":"Add Blog Card"})})]})};export{v as default};
