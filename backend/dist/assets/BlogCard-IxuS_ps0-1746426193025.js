import{r as l,j as o,al as F,a as u}from"./index-BBIQ2JaG-1746426193025.js";import{F as d}from"./index-B5p0oqBc-1746426193025.js";import{B as x}from"./index-C2jQErNw-1746426193025.js";import{s as c}from"./index-CkVR94Ui-1746426193025.js";import"./toArray-uRWhWYCg-1746426193025.js";import"./extends-rM07bN2b-1746426193025.js";import"./AntdIcon-D1dRJs5H-1746426193025.js";import"./index-4NCSjFKa-1746426193025.js";import"./CheckCircleFilled-KdwSm50E-1746426193025.js";import"./ExclamationCircleFilled-Cs3Fj5lZ-1746426193025.js";import"./InfoCircleFilled-uxDeatFe-1746426193025.js";const P=()=>{const[a]=d.useForm(),[n,i]=l.useState(""),[C,m]=l.useState(""),[g,h]=l.useState(null),b=async()=>{try{const t=(await u.get("/api/blogCard/getCard")).data[0];h(t._id),i(t.blogCard);const s=new DOMParser().parseFromString(t.blogCard,"text/html"),r=s.getElementsByTagName("*");for(let p of r)(p.style.color==="white"||p.style.color==="#ffffff")&&(p.style.color="black");m(s.body.innerHTML),a.setFieldsValue({blogCard:t.blogCard})}catch(e){console.error("Failed to fetch blog card:",e),c.error("Failed to fetch blog card.")}};l.useEffect(()=>{b()},[a]);const y=e=>{i(e);const f=new DOMParser().parseFromString(e,"text/html"),s=f.getElementsByTagName("*");for(let r of s)(r.style.color==="white"||r.style.color==="#ffffff")&&(r.style.color="black");m(f.body.innerHTML)},B=async()=>{try{g?(await u.put(`/api/blogCard/editCard/${g}`,{blogCard:n}),c.success("Blog card updated successfully!")):(await u.post("/api/blogCard/addCard",{blogCard:n}),c.success("Blog card added successfully!")),a.resetFields(),i(""),m(""),b()}catch(e){console.error("Failed to save blog card:",e),c.error("Failed to save blog card.")}};return o.jsxs(d,{form:a,layout:"vertical",onFinish:B,name:"blog_card_form",children:[o.jsx(d.Item,{name:"blogCard",label:"Blog Card Content",rules:[{required:!0,message:"Please input the blog card content!"}],children:o.jsx(F,{value:C||n,onChange:y,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","blockquote"],[{align:[]}],["clean"]]},formats:["header","font","list","bold","italic","underline","blockquote","align"]})}),o.jsx(d.Item,{children:o.jsx(x,{type:"primary",htmlType:"submit",children:g?"Update Blog Card":"Add Blog Card"})})]})};export{P as default};
