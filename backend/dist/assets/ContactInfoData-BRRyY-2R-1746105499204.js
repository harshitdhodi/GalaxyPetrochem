import{r as n,eq as g,er as h,es as b,j as s}from"./index-VybT_Q4I-1746105499204.js";const x=()=>{const[o,i]=n.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[]}),[d]=g(),[c]=h(),{data:m}=b();n.useEffect(()=>{if(m&&m.length>0){const a=m[0];i({address:a.address,mobiles:a.mobiles,emails:a.emails,imgTitle:a.imgTitle||[""],altName:a.altName||[""],photo:[],previewUrls:a.photo?a.photo.map(t=>`/api/image/download/${t}`):[]})}},[m]);const u=a=>{const t=Array.from(a.target.files),l=t.map(e=>URL.createObjectURL(e));i(e=>({...e,photo:t,previewUrls:[...l],imgTitle:t.map(()=>""),altName:t.map(()=>"")}))};n.useEffect(()=>()=>{o.previewUrls.forEach(a=>{a.startsWith("blob:")&&URL.revokeObjectURL(a)})},[o.previewUrls]);const p=async a=>{var l;a.preventDefault();const t=new FormData;t.append("address",o.address),o.mobiles.forEach(e=>{t.append("mobiles[]",e)}),o.emails.forEach(e=>{t.append("emails[]",e)}),o.imgTitle.forEach((e,r)=>{t.append("imgTitle[]",e)}),o.altName.forEach((e,r)=>{t.append("altName[]",e)}),o.photo.length>0?o.photo.forEach(e=>{t.append("photo[]",e)}):m&&((l=m[0])!=null&&l.photo)&&m[0].photo.forEach(e=>{t.append("photo[]",e)});try{m&&m.length>0?await c({id:m[0]._id,formData:t}).unwrap():await d(t).unwrap()}catch(e){console.error("Error:",e)}};return s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsx("textarea",{value:o.address,onChange:a=>i(t=>({...t,address:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Numbers"}),o.mobiles.map((a,t)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"tel",value:a,onChange:l=>i(e=>{const r=[...e.mobiles];return r[t]=l.target.value,{...e,mobiles:r}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.mobiles.length>1&&s.jsx("button",{type:"button",onClick:()=>i(l=>{const e=[...l.mobiles];return e.splice(t,1),{...l,mobiles:e}}),className:"text-red-500",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>i(a=>({...a,mobiles:[...a.mobiles,""]})),className:"mt-2 text-indigo-600",children:"Add Mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emails"}),o.emails.map((a,t)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"email",value:a,onChange:l=>i(e=>{const r=[...e.emails];return r[t]=l.target.value,{...e,emails:r}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.emails.length>1&&s.jsx("button",{type:"button",onClick:()=>i(l=>{const e=[...l.emails];return e.splice(t,1),{...l,emails:e}}),className:"text-red-500",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>i(a=>({...a,emails:[...a.emails,""]})),className:"mt-2 text-indigo-600",children:"Add Email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo Images"}),s.jsx("input",{type:"file",onChange:u,accept:"image/*",multiple:!0,className:"mt-1 block w-full"}),s.jsx("div",{className:"mt-2 grid grid-cols-3 gap-4",children:o.previewUrls.map((a,t)=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:a,alt:o.altName[t]||`Preview ${t+1}`,className:"w-24 h-24 object-cover rounded"}),s.jsx("input",{type:"text",placeholder:"Image Title",value:o.imgTitle[t]||"",onChange:l=>{const e=[...o.imgTitle];e[t]=l.target.value,i(r=>({...r,imgTitle:e}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("input",{type:"text",placeholder:"Alt Text",value:o.altName[t]||"",onChange:l=>{const e=[...o.altName];e[t]=l.target.value,i(r=>({...r,altName:e}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("button",{type:"button",onClick:()=>{i(l=>({...l,previewUrls:l.previewUrls.filter((e,r)=>r!==t),photo:Array.from(l.photo).filter((e,r)=>r!==t),imgTitle:l.imgTitle.filter((e,r)=>r!==t),altName:l.altName.filter((e,r)=>r!==t)}))},className:"text-red-500",children:"Remove"})]},t))})]}),s.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",children:m&&m.length>0?"Update":"Submit"})]})})};export{x as default};
