import{bg as s,bh as e,bi as t,j as a,k as r,l,m as d,bd as i,B as c,be as n,b5 as o,bj as u,D as m,h as x,P as h,S as j}from"./main-DbCIA5nM.js";import{b}from"./vendor-X2E3PIZN.js";import{b as p}from"./index.esm-Dk3WekSX.js";import{T as f}from"./trash-BWKPVeJ4.js";import"./utils-ZFgnvnbw.js";const y=({closeModal:o,statusToEdit:u})=>{const{register:m,handleSubmit:x,reset:h,formState:{errors:j}}=p(),{data:f}=s(u?._id,{skip:!u}),[y,{isLoading:g,isSuccess:N,isError:S}]=e(),[w,{isLoading:E,isSuccess:v,isError:k}]=t(u?._id);return b.useEffect((()=>{(N||v)&&o()}),[N,v,o]),b.useEffect((()=>{const s=f||u;s&&h({status:s.status})}),[f,u,h]),a.jsxs(r,{children:[a.jsxs(l,{children:[a.jsx(d,{children:u?"Edit Status":"Add Status"}),a.jsx(i,{children:u?"Edit the status details below.":"Fill out the form below to create a new status."})]}),a.jsxs("form",{onSubmit:x((async s=>{try{u?await w({id:u._id,...s}).unwrap():await y(s).unwrap(),h()}catch(e){}})),className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium mb-2",children:"Status"}),a.jsx("input",{id:"status",...m("status",{required:"Status is required",minLength:{value:2,message:"Status must be at least 2 characters"}}),className:"w-full px-3 py-2 border rounded "+(j.status?"border-red-500":""),placeholder:"Enter status name"}),j.status&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.status.message})]}),a.jsx(c,{type:"submit",className:"w-full",disabled:g||E,children:g||E?"Submitting...":u?"Update":"Submit"}),(N||v)&&a.jsx("p",{className:"text-green-500",children:u?"Status updated successfully!":"Status added successfully!"}),(S||k)&&a.jsx("p",{className:"text-red-500",children:"Error processing status."})]}),a.jsx(n,{})]})},g=()=>{const{data:s,isLoading:e,isError:t}=o(),[r]=u(),[l,d]=b.useState(null),i=s?.data,n=()=>{d(null)};return e?a.jsx("div",{children:"Loading..."}):t?a.jsx("div",{children:"Error fetching statuses."}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Status List"}),a.jsxs(m,{children:[a.jsx(x,{asChild:!0,children:a.jsxs(c,{className:"gap-2",children:[a.jsx(h,{className:"h-4 w-4"}),"Add Status"]})}),a.jsx(y,{closeModal:n})]})]}),a.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/2 text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),a.jsx("tbody",{children:i?.map((s=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.status}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[a.jsx(j,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>(s=>{d(s)})(s)}),a.jsx(f,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>(async s=>{try{await r(s).unwrap(),alert("Status deleted successfully!")}catch(e){alert("Failed to delete status.")}})(s._id)})]})]},s._id)))})]}),l&&a.jsx(m,{open:!0,onOpenChange:n,children:a.jsx(y,{closeModal:n,statusToEdit:l})})]})};export{g as StatusTable};
//# sourceMappingURL=StatusTable-Bp56w_CO.js.map
