import{r as m,ap as T,j as e,T as E,m as P,n as j,o as L,p as R,q as d,B as _,aE as B,I as F,R as A}from"./index-BBIQ2JaG-1746426193025.js";function z({selectedChemicalIds:r,onRemoveChemical:y}){const[n,l]=m.useState(1),[i,v]=m.useState(10),[h,p]=m.useState({name:"",email:"",mobile:""}),{data:g,error:u,isLoading:b}=T(r),o=a=>{const{name:C,value:s}=a.target;p({...h,[C]:s})},x=g?g.filter(a=>Object.entries(h).every(([C,s])=>{var t;return(t=a[C])==null?void 0:t.toString().toLowerCase().includes(s.toLowerCase())})):[],N=Math.ceil(x.length/i),S=(n-1)*i,c=S+i,f=x.slice(S,c);return e.jsxs("div",{className:"border rounded-md mt-4",children:[e.jsxs(E,{children:[e.jsx(P,{className:"bg-gray-200",children:e.jsxs(j,{children:[e.jsx(L,{children:"Name"}),e.jsx(L,{children:"Email"}),e.jsx(L,{children:"Mobile"})]})}),e.jsxs(R,{children:[e.jsxs(j,{children:[e.jsx(d,{children:e.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:h.name,onChange:o,className:"border rounded w-full px-2 py-1"})}),e.jsx(d,{children:e.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:h.email,onChange:o,className:"border rounded w-full px-2 py-1"})}),e.jsx(d,{children:e.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:h.mobile,onChange:o,className:"border rounded w-full px-2 py-1"})})]}),b&&e.jsx(j,{children:e.jsx(d,{colSpan:3,children:"Loading suppliers..."})}),u&&e.jsx(j,{children:e.jsx(d,{colSpan:3,className:"text-red-500",children:u.message})}),!b&&!u&&f.length===0&&e.jsx(j,{children:e.jsx(d,{colSpan:3,children:"No suppliers available."})}),f.map(a=>e.jsxs(j,{children:[e.jsx(d,{children:a.name}),e.jsx(d,{children:a.email}),e.jsx(d,{children:a.mobile})]},a._id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",e.jsxs("select",{className:"border rounded",value:i,onChange:a=>v(Number(a.target.value)),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{className:"",variant:"secondary",size:"sm",onClick:()=>l(n-1),disabled:n===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[S+1," - ",Math.min(c,x.length)," of ",x.length]}),e.jsx(_,{variant:"secondary",size:"sm",onClick:()=>l(n+1),disabled:n===N,children:"Next"})]})]})]})}function M({onSelectChemicals:r}){const[y,n]=m.useState(""),[l,i]=m.useState(""),[v,h]=m.useState(null),[p,g]=m.useState([]),[u,b]=m.useState([]),{data:o,isLoading:x,error:N}=B(l.charAt(0)||""),c=(Array.isArray(o)?o:o?[o]:[]).filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.cas_number&&s.cas_number.toLowerCase().includes(l.toLowerCase())),f=s=>{if(s&&!p.includes(s._id)){const t=[...u,s],w=[...p,s._id];h(s),b(t),g(w),n(""),i(""),r==null||r(t)}},a=s=>{const t=s.target.value;n(t),i(t)},C=s=>{const t=u.filter(I=>I._id!==s._id),w=p.filter(I=>I!==s._id);b(t),g(w),r==null||r(t)};return e.jsxs("div",{className:"mt-4",children:[e.jsx(F,{placeholder:"Search Chemical by Name or CAS Number",value:y,onChange:a,className:"w-full mb-4"}),x?e.jsx("div",{children:"Loading..."}):l&&c&&c.length>0&&e.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:c.map(s=>e.jsxs("li",{onClick:()=>f(s),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[s.name," (CAS: ",s.cas_number||"N/A",")"]},s._id))}),N&&e.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",N.toString()]}),(c==null?void 0:c.length)===0&&!x&&l&&e.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),e.jsx("div",{className:"mt-4",children:e.jsx(z,{chemicals:u,selectedChemicalIds:p,onRemoveChemical:C})})]})}function Q(){const[r,y]=A.useState(null),[n,l]=A.useState([]),i=v=>{y(v),l([])};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),e.jsx("div",{className:"space-y-4",children:e.jsx(M,{onSelectCustomer:i})})]})}export{Q as default};
