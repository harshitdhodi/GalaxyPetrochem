import{cc as e,cd as a,ce as i,j as t}from"./main-DbCIA5nM.js";import{f as s,j as r,b as l,L as o}from"./vendor-X2E3PIZN.js";import{F as m}from"./index-BGrTmilS.js";import{B as n}from"./Breadcrumb-DZWgOyzs.js";import{I as d}from"./index-C8xsCgg9.js";import{U as c,R as p}from"./index-1EwFYQPN.js";import{B as j}from"./index-CvhnQ2ZS.js";import{s as u}from"./index-BQxUT-WV.js";import"./utils-ZFgnvnbw.js";import"./toArray-DIarnBRF.js";import"./objectSpread2-C2mPdFQ-.js";import"./AntdIcon-Bc_RgQsY.js";import"./index-BJvm14ET.js";import"./CheckCircleFilled-vSnFSXRd.js";import"./ExclamationCircleFilled-jOtwz4nB.js";import"./dropdown-C2Lyn6ws.js";import"./index-Cie-PtDs.js";import"./getAllowClear-CF0z5FWe.js";import"./Input-DzV7KJ8a.js";import"./EyeOutlined-D6toRaq1.js";import"./TextArea-BQkixvnv.js";import"./fade-CZ8b_ilM.js";import"./DeleteOutlined-D5hKN4qo.js";import"./DownloadOutlined-B6iPWVSX.js";import"./CheckOutlined-qoM0f-f3.js";import"./InfoCircleFilled-BiVI0bqr.js";const g=()=>{const[g]=m.useForm(),x=s(),{id:h}=r(),{data:f,isLoading:C}=e(h,{skip:!h}),[b]=a(),[F]=i(),[y,I]=l.useState([]),[w,O]=l.useState([]);l.useEffect((()=>{f&&(g.setFieldsValue(f),I([{url:`/api/image/pdf/view/${f.catalogue}`,name:f.catalogue}]),O([{url:`/api/image/view/${f.image}`,name:f.image}]))}),[f,g]);return t.jsxs(t.Fragment,{children:[t.jsxs(n,{style:{marginBottom:"16px"},children:[t.jsx(n.Item,{children:t.jsx(o,{to:"/dashboard",children:"Dashboard"})}),t.jsx(n.Item,{children:t.jsx(o,{to:"/catalogue-table",children:"Catalogue Table"})}),t.jsx(n.Item,{children:h?"Edit Catalogue":"Create Catalogue"})]}),t.jsxs(m,{form:g,layout:"vertical",onFinish:async e=>{const a=new FormData;a.append("title",e.title),y[0]?.originFileObj&&a.append("catalog",y[0].originFileObj),w[0]?.originFileObj&&a.append("image",w[0].originFileObj);try{h?(await F({id:h,formData:a}).unwrap(),u.success("Catalogue updated successfully")):(await b(a).unwrap(),u.success("Catalogue created successfully")),x("/catalogue-table")}catch(i){u.error("Failed to save catalogue")}},children:[t.jsx(m.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter the title"}],children:t.jsx(d,{})}),t.jsx(m.Item,{name:"catalogue",label:"Catalogue",rules:[{required:!0,message:"Please upload a catalogue"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:y,beforeUpload:()=>!1,onChange:({fileList:e})=>I(e),children:t.jsx(j,{icon:t.jsx(p,{}),children:"Upload Catalogue"})})}),t.jsx(m.Item,{name:"image",label:"Image",rules:[{required:!0,message:"Please upload an image"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:w,beforeUpload:()=>!1,onChange:({fileList:e})=>O(e),children:t.jsx(j,{icon:t.jsx(p,{}),children:"Upload Image"})})}),t.jsx(m.Item,{children:t.jsx(j,{type:"primary",htmlType:"submit",loading:C,children:h?"Update":"Create"})})]})]})};export{g as default};
//# sourceMappingURL=CatalogueForm-Dkmuh03q.js.map
