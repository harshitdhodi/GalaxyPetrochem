import{u as A,g as y,r as f,cx as P,cy as C,cz as I,j as e}from"./index-CyqvOuOg-1746419818373.js";import{F as r}from"./index-DzvSw93u-1746419818373.js";import{B as N}from"./Breadcrumb-h00BRZ3S-1746419818373.js";import{C as w}from"./index-Wxo8bQb3-1746419818373.js";import{I as n}from"./index-Cw6CtmGJ-1746419818373.js";import{U as E,R}from"./index-C2Ia4vNY-1746419818373.js";import{B as u}from"./index-C3bxH8TE-1746419818373.js";import{s as p}from"./index-DOojfaHn-1746419818373.js";import"./toArray-CKiapHOW-1746419818373.js";import"./extends-rM07bN2b-1746419818373.js";import"./AntdIcon-DOEEMSan-1746419818373.js";import"./index-BMkDlJCN-1746419818373.js";import"./CheckCircleFilled-BDwN-65_-1746419818373.js";import"./ExclamationCircleFilled-LLNef6Rn-1746419818373.js";import"./dropdown-DkYwa0fm-1746419818373.js";import"./EllipsisOutlined-BoRLgxJq-1746419818373.js";import"./Skeleton-C_OHlkWw-1746419818373.js";import"./PlusOutlined-C8r_o3T9-1746419818373.js";import"./getAllowClear-CJDPFZL7-1746419818373.js";import"./Input-CWHKnMyb-1746419818373.js";import"./EyeOutlined-Bhs2_IEd-1746419818373.js";import"./TextArea-DXtIHlV4-1746419818373.js";import"./fade-C4OWX2yR-1746419818373.js";import"./DeleteOutlined-xaaXUUdW-1746419818373.js";import"./DownloadOutlined-CrMw7hxn-1746419818373.js";import"./CheckOutlined-C7ruoH1q-1746419818373.js";import"./InfoCircleFilled-DJPoA66N-1746419818373.js";const re=()=>{const[m]=r.useForm(),l=A(),{id:d}=y(),i=!!d,[o,x]=f.useState([]),[g]=P(),[j]=C(),{data:a,isLoading:h}=I(d,{skip:!i});f.useEffect(()=>{i&&(a!=null&&a.data)&&(m.setFieldsValue({name:a.data.name,email:a.data.email,contactNo:a.data.contactNo,address:a.data.address,postAppliedFor:a.data.postAppliedFor}),a.data.resumeFile&&x([{uid:"-1",name:a.data.resumeFile.split("/").pop(),status:"done",url:a.data.resumeFile}]))},[a,m,i]);const b=async s=>{var c;try{const t=new FormData;t.append("name",s.name),t.append("email",s.email),t.append("contactNo",s.contactNo),t.append("address",s.address),t.append("postAppliedFor",s.postAppliedFor),(c=o[0])!=null&&c.originFileObj&&t.append("resumeFile",o[0].originFileObj),i?(await j({id:d,formData:t}).unwrap(),p.success("Application updated successfully!")):(await g(t).unwrap(),p.success("Application submitted successfully!")),l("/career-table")}catch(t){p.error(t.message||"Something went wrong")}},F={beforeUpload:s=>(s.type==="application/pdf"||p.error("You can only upload PDF files!"),!1),maxCount:1,fileList:o,onChange:({fileList:s})=>{x(s)}};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx(N,{items:[{title:e.jsx("span",{onClick:()=>l("/dashboard"),style:{cursor:"pointer"},children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>l("/career-table"),style:{cursor:"pointer"},children:"Career Applications"})},{title:i?"Edit Application":"Add Application"}],style:{marginBottom:"16px"}}),e.jsx(w,{title:i?"Edit Application":"Add New Application",children:e.jsxs(r,{form:m,layout:"vertical",onFinish:b,disabled:h,children:[e.jsx(r.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter name"},{min:2,message:"Name must be at least 2 characters"}],children:e.jsx(n,{})}),e.jsx(r.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(n,{})}),e.jsx(r.Item,{name:"contactNo",label:"Contact Number",rules:[{required:!0,message:"Please enter contact number"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit number"}],children:e.jsx(n,{})}),e.jsx(r.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"},{min:5,message:"Address must be at least 5 characters"}],children:e.jsx(n.TextArea,{rows:4})}),e.jsx(r.Item,{name:"postAppliedFor",label:"Post Applied For",rules:[{required:!0,message:"Please enter post applied for"}],children:e.jsx(n,{})}),e.jsx(r.Item,{name:"resumeFile",label:"Resume",rules:[{required:!i&&!o.length,message:"Please upload resume"}],children:e.jsx(E,{...F,children:e.jsx(u,{icon:e.jsx(R,{}),children:o.length?"Replace Resume":"Upload Resume"})})}),e.jsxs(r.Item,{children:[e.jsx(u,{type:"primary",htmlType:"submit",loading:h,children:i?"Update":"Submit"}),e.jsx(u,{style:{marginLeft:"10px"},onClick:()=>l("/career-table"),children:"Cancel"})]})]})})]})};export{re as default};
