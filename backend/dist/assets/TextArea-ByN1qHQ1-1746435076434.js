import{r as i,R as $}from"./index-HqVKJZ4m-1746435076434.js";import{c as M}from"./AntdIcon-CvcpUYMf-1746435076434.js";import{c as we,b as B,f as Me,d as L,_ as ze,e as he}from"./extends-rM07bN2b-1746435076434.js";import{h as Pe}from"./toArray-DeWF-CPR-1746435076434.js";import{h as _e,B as je,r as be,i as He,a as Le,t as Be,j as We,u as Ke,l as Ye,e as Ze,f as qe}from"./getAllowClear-Eq9A1qme-1746435076434.js";import{u as Re,v as Ce,R as Ge,w as ye,g as Xe,m as Ue,n as Je,D as Qe,F as ke,d as et,h as tt,f as at}from"./index-7xeFzZ3q-1746435076434.js";var nt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ve={},w;function ot(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(n&&ve[a])return ve[a];var t=window.getComputedStyle(e),c=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),m=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),s=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),g=rt.map(function(d){return"".concat(d,":").concat(t.getPropertyValue(d))}).join(";"),S={sizingStyle:g,paddingSize:m,borderSize:s,boxSizing:c};return n&&a&&(ve[a]=S),S}function it(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;w||(w=document.createElement("textarea"),w.setAttribute("tab-index","-1"),w.setAttribute("aria-hidden","true"),w.setAttribute("name","hiddenTextarea"),document.body.appendChild(w)),e.getAttribute("wrap")?w.setAttribute("wrap",e.getAttribute("wrap")):w.removeAttribute("wrap");var c=ot(e,n),m=c.paddingSize,s=c.borderSize,g=c.boxSizing,S=c.sizingStyle;w.setAttribute("style","".concat(S,";").concat(nt)),w.value=e.value||e.placeholder||"";var d=void 0,v=void 0,z,b=w.scrollHeight;if(g==="border-box"?b+=s:g==="content-box"&&(b-=m),a!==null||t!==null){w.value=" ";var T=w.scrollHeight-m;a!==null&&(d=T*a,g==="border-box"&&(d=d+m+s),b=Math.max(d,b)),t!==null&&(v=T*t,g==="border-box"&&(v=v+m+s),z=b>v?"":"hidden",b=Math.min(v,b))}var x={height:b,overflowY:z,resize:"none"};return d&&(x.minHeight=d),v&&(x.maxHeight=v),x}var st=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],ge=0,pe=1,xe=2,lt=i.forwardRef(function(e,n){var a=e,t=a.prefixCls,c=a.defaultValue,m=a.value,s=a.autoSize,g=a.onResize,S=a.className,d=a.style,v=a.disabled,z=a.onChange;a.onInternalAutoSize;var b=we(a,st),T=Re(c,{value:m,postState:function(p){return p??""}}),x=B(T,2),P=x[0],W=x[1],K=function(p){W(p.target.value),z==null||z(p)},C=i.useRef();i.useImperativeHandle(n,function(){return{textArea:C.current}});var _=i.useMemo(function(){return s&&Me(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),Y=B(_,2),h=Y[0],R=Y[1],O=!!s,te=function(){try{if(document.activeElement===C.current){var p=C.current,ee=p.selectionStart,j=p.selectionEnd,ne=p.scrollTop;C.current.setSelectionRange(ee,j),C.current.scrollTop=ne}}catch{}},Z=i.useState(xe),q=B(Z,2),E=q[0],V=q[1],ae=i.useState(),U=B(ae,2),J=U[0],G=U[1],A=function(){V(ge)};Ce(function(){O&&A()},[m,h,R,O]),Ce(function(){if(E===ge)V(pe);else if(E===pe){var y=it(C.current,!1,h,R);V(xe),G(y)}else te()},[E]);var o=i.useRef(),X=function(){ye.cancel(o.current)},Q=function(p){E===xe&&(g==null||g(p),s&&(X(),o.current=ye(function(){A()})))};i.useEffect(function(){return X},[]);var k=O?J:null,D=L(L({},d),k);return(E===ge||E===pe)&&(D.overflowY="hidden",D.overflowX="hidden"),i.createElement(Ge,{onResize:Q,disabled:!(s||g)},i.createElement("textarea",ze({},b,{ref:C,style:D,className:M(t,S,he({},"".concat(t,"-disabled"),v)),disabled:v,value:P,onChange:K})))}),ut=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],ct=$.forwardRef(function(e,n){var a,t=e.defaultValue,c=e.value,m=e.onFocus,s=e.onBlur,g=e.onChange,S=e.allowClear,d=e.maxLength,v=e.onCompositionStart,z=e.onCompositionEnd,b=e.suffix,T=e.prefixCls,x=T===void 0?"rc-textarea":T,P=e.showCount,W=e.count,K=e.className,C=e.style,_=e.disabled,Y=e.hidden,h=e.classNames,R=e.styles,O=e.onResize,te=e.onClear,Z=e.onPressEnter,q=e.readOnly,E=e.autoSize,V=e.onKeyDown,ae=we(e,ut),U=Re(t,{value:c,defaultValue:t}),J=B(U,2),G=J[0],A=J[1],o=G==null?"":String(G),X=$.useState(!1),Q=B(X,2),k=Q[0],D=Q[1],y=$.useRef(!1),p=$.useState(null),ee=B(p,2),j=ee[0],ne=ee[1],re=i.useRef(null),oe=i.useRef(null),I=function(){var r;return(r=oe.current)===null||r===void 0?void 0:r.textArea},ie=function(){I().focus()};i.useImperativeHandle(n,function(){var f;return{resizableTextArea:oe.current,focus:ie,blur:function(){I().blur()},nativeElement:((f=re.current)===null||f===void 0?void 0:f.nativeElement)||I()}}),i.useEffect(function(){D(function(f){return!_&&f})},[_]);var de=$.useState(null),ue=B(de,2),se=ue[0],fe=ue[1];$.useEffect(function(){if(se){var f;(f=I()).setSelectionRange.apply(f,Pe(se))}},[se]);var u=_e(W,P),l=(a=u.max)!==null&&a!==void 0?a:d,F=Number(l)>0,N=u.strategy(o),Ee=!!l&&N>l,Se=function(r,H){var ce=H;!y.current&&u.exceedFormatter&&u.max&&u.strategy(H)>u.max&&(ce=u.exceedFormatter(H,{max:u.max}),H!==ce&&fe([I().selectionStart||0,I().selectionEnd||0])),A(ce),be(r.currentTarget,r,g,ce)},Ae=function(r){y.current=!0,v==null||v(r)},Ie=function(r){y.current=!1,Se(r,r.currentTarget.value),z==null||z(r)},$e=function(r){Se(r,r.target.value)},Ne=function(r){r.key==="Enter"&&Z&&Z(r),V==null||V(r)},Te=function(r){D(!0),m==null||m(r)},Oe=function(r){D(!1),s==null||s(r)},Ve=function(r){A(""),ie(),be(I(),r,g)},me=b,le;u.show&&(u.showFormatter?le=u.showFormatter({value:o,count:N,maxLength:l}):le="".concat(N).concat(F?" / ".concat(l):""),me=$.createElement($.Fragment,null,me,$.createElement("span",{className:M("".concat(x,"-data-count"),h==null?void 0:h.count),style:R==null?void 0:R.count},le)));var De=function(r){var H;O==null||O(r),(H=I())!==null&&H!==void 0&&H.style.height&&ne(!0)},Fe=!E&&!P&&!S;return $.createElement(je,{ref:re,value:o,allowClear:S,handleReset:Ve,suffix:me,prefixCls:x,classNames:L(L({},h),{},{affixWrapper:M(h==null?void 0:h.affixWrapper,he(he({},"".concat(x,"-show-count"),P),"".concat(x,"-textarea-allow-clear"),S))}),disabled:_,focused:k,className:M(K,Ee&&"".concat(x,"-out-of-range")),style:L(L({},C),j&&!Fe?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof le=="string"?le:void 0}},hidden:Y,readOnly:q,onClear:te},$.createElement(lt,ze({},ae,{autoSize:E,maxLength:d,onKeyDown:Ne,onChange:$e,onFocus:Te,onBlur:Oe,onCompositionStart:Ae,onCompositionEnd:Ie,className:M(h==null?void 0:h.textarea),style:L(L({},R==null?void 0:R.textarea),{},{resize:C==null?void 0:C.resize}),disabled:_,prefixCls:x,onResize:De,ref:oe,readOnly:q})))});const dt=e=>{const{componentCls:n,paddingLG:a}=e,t=`${n}-textarea`;return{[`textarea${n}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${n}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${n}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[t]:{position:"relative","&-show-count":{[`> ${n}`]:{height:"100%"},[`${n}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${n},
        &-affix-wrapper${t}-has-feedback ${n}
      `]:{paddingInlineEnd:a},[`&-affix-wrapper${n}-affix-wrapper`]:{padding:0,[`> textarea${n}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${n}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${n}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${t}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${n}-affix-wrapper-sm`]:{[`${n}-suffix`]:{[`${n}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ft=Xe(["Input","TextArea"],e=>{const n=Ue(e,He(e));return[dt(n)]},Le,{resetFont:!1});var mt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,t=Object.getOwnPropertySymbols(e);c<t.length;c++)n.indexOf(t[c])<0&&Object.prototype.propertyIsEnumerable.call(e,t[c])&&(a[t[c]]=e[t[c]]);return a};const bt=i.forwardRef((e,n)=>{var a;const{prefixCls:t,bordered:c=!0,size:m,disabled:s,status:g,allowClear:S,classNames:d,rootClassName:v,className:z,style:b,styles:T,variant:x,showCount:P,onMouseDown:W,onResize:K}=e,C=mt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:_,direction:Y,allowClear:h,autoComplete:R,className:O,style:te,classNames:Z,styles:q}=Je("textArea"),E=i.useContext(Qe),V=s??E,{status:ae,hasFeedback:U,feedbackIcon:J}=i.useContext(ke),G=qe(ae,g),A=i.useRef(null);i.useImperativeHandle(n,()=>{var u;return{resizableTextArea:(u=A.current)===null||u===void 0?void 0:u.resizableTextArea,focus:l=>{var F,N;Be((N=(F=A.current)===null||F===void 0?void 0:F.resizableTextArea)===null||N===void 0?void 0:N.textArea,l)},blur:()=>{var l;return(l=A.current)===null||l===void 0?void 0:l.blur()}}});const o=_("input",t),X=et(o),[Q,k,D]=We(o,v),[y]=ft(o,X),{compactSize:p,compactItemClassnames:ee}=tt(o,Y),j=at(u=>{var l;return(l=m??p)!==null&&l!==void 0?l:u}),[ne,re]=Ke("textArea",x,c),oe=Ye(S??h),[I,ie]=i.useState(!1),[de,ue]=i.useState(!1),se=u=>{ie(!0),W==null||W(u);const l=()=>{ie(!1),document.removeEventListener("mouseup",l)};document.addEventListener("mouseup",l)},fe=u=>{var l,F;if(K==null||K(u),I&&typeof getComputedStyle=="function"){const N=(F=(l=A.current)===null||l===void 0?void 0:l.nativeElement)===null||F===void 0?void 0:F.querySelector("textarea");N&&getComputedStyle(N).resize==="both"&&ue(!0)}};return Q(y(i.createElement(ct,Object.assign({autoComplete:R},C,{style:Object.assign(Object.assign({},te),b),styles:Object.assign(Object.assign({},q),T),disabled:V,allowClear:oe,className:M(D,X,z,v,ee,O,de&&`${o}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},d),Z),{textarea:M({[`${o}-sm`]:j==="small",[`${o}-lg`]:j==="large"},k,d==null?void 0:d.textarea,Z.textarea,I&&`${o}-mouse-active`),variant:M({[`${o}-${ne}`]:re},Ze(o,G)),affixWrapper:M(`${o}-textarea-affix-wrapper`,{[`${o}-affix-wrapper-rtl`]:Y==="rtl",[`${o}-affix-wrapper-sm`]:j==="small",[`${o}-affix-wrapper-lg`]:j==="large",[`${o}-textarea-show-count`]:P||((a=e.count)===null||a===void 0?void 0:a.show)},k)}),prefixCls:o,suffix:U&&i.createElement("span",{className:`${o}-textarea-suffix`},J),showCount:P,ref:A,onResize:fe,onMouseDown:se}))))});export{bt as T};
