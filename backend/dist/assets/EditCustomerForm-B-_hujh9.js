import{ac as e,bt as s,j as a,L as i,I as t,B as r}from"./main-DbCIA5nM.js";import{j as l,f as d,b as n}from"./vendor-X2E3PIZN.js";import{b as o}from"./index.esm-Dk3WekSX.js";import{t as c,o as m,a as h,s as x,l as p}from"./index-CEYT__UF.js";import{C as j,b as u,c as b,a as g}from"./card-CgiS1VlC.js";import{T as f}from"./textarea-uyS90DRv.js";import{S as y,a as N,b as v,c as C,d as w}from"./select-BGPtewlQ.js";import{B as S}from"./BreadCrumb-BYTrRWt1.js";import{B as F}from"./react-toastify.esm-DdEtEw-Q.js";import"./utils-ZFgnvnbw.js";import"./index-BoWlxZtN.js";import"./index-DPOpahcV.js";import"./check-DSfnMMtB.js";import"./chevron-up-D_C2ouKf.js";import"./chevron-right-BX1oQPFZ.js";const U=m({name:x().min(1,"Customer name is required"),contactPerson:x().optional(),email:x().email("Invalid email address"),mobile:x().min(1,"Mobile number is required"),website:x().url("Invalid URL").optional().or(p("")),address:x().optional(),country:x().optional(),state:x().optional(),city:x().optional(),description:x().optional(),image:h().optional()}),E=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Edit Customer",href:null}];function L(){const{id:m}=l(),{data:h,isLoading:x}=e(m),[p,{isLoading:L}]=s(),P=d(),[A]=n.useState([{isoCode:"US",name:"United States"},{isoCode:"CA",name:"Canada"},{isoCode:"UK",name:"United Kingdom"},{isoCode:"IN",name:"India"},{isoCode:"AU",name:"Australia"}]),I={US:[{isoCode:"NY",name:"New York"},{isoCode:"CA",name:"California"},{isoCode:"TX",name:"Texas"}],IN:[{isoCode:"MH",name:"Maharashtra"},{isoCode:"DL",name:"Delhi"},{isoCode:"KA",name:"Karnataka"}]},k={NY:[{name:"New York City"},{name:"Buffalo"}],CA:[{name:"Los Angeles"},{name:"San Francisco"}],MH:[{name:"Mumbai"},{name:"Pune"}]},[M,B]=n.useState([]),[D,V]=n.useState([]),{register:K,handleSubmit:T,watch:Y,setValue:z,reset:H,formState:{errors:R}}=o({resolver:c(U),defaultValues:{name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}}),q=Y("country"),O=Y("state"),W=Y("image");n.useEffect((()=>{if(q){B(I[q]||[]),h||(z("state",""),z("city",""))}else B([]),V([])}),[q,z,h]),n.useEffect((()=>{if(O){V(k[O]||[]),h||z("city","")}else V([])}),[O,z,h]),n.useEffect((()=>{if(h?.data){["name","contactPerson","email","mobile","website","address","country","state","city","description","image"].forEach((e=>{void 0!==h.data[e]&&z(e,h.data[e]||"")}))}}),[h,z]);return x?a.jsx("div",{children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ml-1",children:a.jsx(S,{items:E})}),a.jsxs(j,{className:"w-full mt-4 mx-auto",children:[a.jsx(u,{children:a.jsx(b,{className:"text-xl text-purple-700",children:"Edit Customer"})}),a.jsx(g,{children:a.jsxs("form",{onSubmit:T((async e=>{try{const s=new FormData;Object.keys(e).forEach((a=>{"image"!==a&&s.append(a,e[a]||"")})),e.image instanceof File&&s.append("image",e.image),s.append("id",m);await p({id:m,data:s}).unwrap();F.success("Customer updated successfully"),P("/customer-table")}catch(s){F.error(s.message||"Failed to update customer")}})),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"name",children:["Customer Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"name",...K("name"),className:R.name?"border-red-500":""}),R.name&&a.jsx("p",{className:"text-red-500 text-sm",children:R.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"contactPerson",children:"Contact Person"}),a.jsx(t,{id:"contactPerson",...K("contactPerson")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"email",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"email",type:"email",...K("email"),className:R.email?"border-red-500":""}),R.email&&a.jsx("p",{className:"text-red-500 text-sm",children:R.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"mobile",children:["Mobile Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"mobile",...K("mobile"),className:R.mobile?"border-red-500":""}),R.mobile&&a.jsx("p",{className:"text-red-500 text-sm",children:R.mobile.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"website",children:"Website"}),a.jsx(t,{id:"website",type:"url",...K("website"),className:R.website?"border-red-500":""}),R.website&&a.jsx("p",{className:"text-red-500 text-sm",children:R.website.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"country",children:"Country"}),a.jsxs(y,{value:q,onValueChange:e=>z("country",e),children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select Country"})}),a.jsx(C,{children:A.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"state",children:"State/Province"}),a.jsxs(y,{value:O,onValueChange:e=>z("state",e),disabled:!q||0===M.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select State"})}),a.jsx(C,{children:M.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"city",children:"City"}),a.jsxs(y,{value:Y("city"),onValueChange:e=>z("city",e),disabled:!O||0===D.length,children:[a.jsx(N,{children:a.jsx(v,{placeholder:"Select City"})}),a.jsx(C,{children:D.map((e=>a.jsx(w,{value:e.name,children:e.name},e.name)))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"address",children:"Address"}),a.jsx(f,{id:"address",className:"min-h-[100px]",...K("address")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{children:"Upload image"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:a.jsx("img",{src:W instanceof File?URL.createObjectURL(W):W?`/api/logo/download/${W}`:"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),a.jsx(r,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),a.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void F.error("Please upload an image file");if(s.size>5242880)return void F.error("Image size should be less than 5MB");z("image",s)}},className:"hidden"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"description",children:"Description"}),a.jsx(f,{id:"description",...K("description"),className:"min-h-[200px]",placeholder:"Enter customer description"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(r,{type:"submit",disabled:L,className:"bg-green-500 text-white hover:bg-green-600",children:L?"Saving...":"Save"}),a.jsx(r,{type:"button",variant:"destructive",onClick:()=>P("/customer-table"),children:"Cancel"})]})]})})]})]})}export{L as default};
//# sourceMappingURL=EditCustomerForm-B-_hujh9.js.map
