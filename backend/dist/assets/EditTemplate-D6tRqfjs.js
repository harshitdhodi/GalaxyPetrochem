import{db as e,dc as a,da as t,j as s,an as r}from"./main-CzSo-TQq.js";import{k as d,f as l,b as m}from"./vendor-BCMiqwDy.js";import{b as i}from"./index.esm-nvYjwl0o.js";import"./utils-ZFgnvnbw.js";const o=()=>{const{id:o}=d(),c=l(),{register:n,handleSubmit:b,reset:u,setValue:x,formState:{errors:p}}=i(),[j,{isLoading:y}]=e(),{data:h,isLoading:g,error:f}=a(o,{skip:!o}),{data:N,isLoading:v}=t();m.useEffect((()=>{h?.data&&(u({name:h.data.name,subject:h.data.subject,body:h.data.body,category:h.data.category?._id||""}),x("body",h.data.body))}),[h,u,x]);return g?s.jsx("div",{children:"Loading template..."}):f?s.jsxs("div",{children:["Error fetching template: ",f.message]}):s.jsxs("div",{className:"p-4 mx-auto",children:[s.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),s.jsxs("form",{onSubmit:b((async e=>{try{await j({id:o,...e}).unwrap(),c("/email-template-table")}catch(a){alert("Failed to update template: "+a.message)}})),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),s.jsxs("select",{id:"category",...n("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[s.jsx("option",{value:"",children:"Select a category"}),!v&&N?.map((e=>s.jsx("option",{value:e._id,children:e.emailCategory},e._id)))]}),p.category&&s.jsx("p",{className:"text-red-500 text-sm",children:p.category.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),s.jsx("input",{id:"name",...n("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),p.name&&s.jsx("p",{className:"text-red-500 text-sm",children:p.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),s.jsx("input",{id:"subject",...n("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),p.subject&&s.jsx("p",{className:"text-red-500 text-sm",children:p.subject.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),s.jsx(r,{value:h?.data?.body||"",onChange:e=>{x("body",e)},placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),p.body&&s.jsx("p",{className:"text-red-500 text-sm",children:p.body.message})]}),s.jsx("button",{type:"submit",className:"w-1/4 bg-blue-500 text-white px-4 py-2 rounded "+(y?"opacity-50":""),disabled:y,children:y?"Updating...":"Update Template"})]})]})};export{o as default};
//# sourceMappingURL=EditTemplate-D6tRqfjs.js.map
