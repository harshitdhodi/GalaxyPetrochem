import{r,j as t,aC as E,a as v}from"./index-2C6dvy5y-1746272272211.js";import{F as n}from"./index-LnZ0KFrj-1746272272211.js";import{B as p}from"./index-Dq0FjoP7-1746272272211.js";import{s as o}from"./index-CDuJzY-1-1746272272211.js";import"./CheckCircleFilled-Do-1KtVY-1746272272211.js";import"./ExclamationCircleFilled-CUcAXDxc-1746272272211.js";import"./InfoCircleFilled-B3JAAQkO-1746272272211.js";const w=()=>{const[s]=n.useForm(),[c,d]=r.useState(""),[u,f]=r.useState(null),[m,a]=r.useState(!1),i=async()=>{try{a(!0);const l=(await v.get(`/api/events/getEvent?t=${new Date().getTime()}`)).data[0];f(l._id),d(l.events),s.setFieldsValue({events:l.events})}catch(e){console.error("Failed to fetch event:",e),o.error("Failed to fetch event.")}finally{a(!1)}};r.useEffect(()=>{i()},[s]);const h=e=>{d(e),s.setFieldsValue({events:e})},y=async()=>{try{if(!u){o.error("No event ID available");return}a(!0),await v.put(`/api/events/editEvent/${u}`,{events:c}),o.success("Event updated successfully!"),await i()}catch(e){console.error("Failed to update event:",e),o.error("Failed to update event.")}finally{a(!1)}};return t.jsxs(n,{form:s,layout:"vertical",onFinish:y,name:"event_form",children:[t.jsx(n.Item,{name:"events",label:"Event Description",rules:[{required:!0,message:"Please input the event details!"}],children:t.jsx(E,{value:c,onChange:h,modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"]]}})}),t.jsxs(n.Item,{children:[t.jsx(p,{type:"primary",htmlType:"submit",loading:m,children:"Update Event"}),t.jsx(p,{onClick:i,style:{marginLeft:8},loading:m,children:"Refresh Data"})]})]})};export{w as default};
