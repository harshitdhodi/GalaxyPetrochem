{"version":3,"file":"Events-DEiCymXp.js","sources":["../../src/websiteBackend/event/Events.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button, message } from 'antd';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nconst EventForm = () => {\r\n  const [form] = Form.useForm();\r\n  const [events, setEvents] = useState('');\r\n  const [eventId, setEventId] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchEvent = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`/api/events/getEvent?t=${new Date().getTime()}`);\r\n      const eventData = response.data[0];\r\n      setEventId(eventData._id);\r\n      setEvents(eventData.events);\r\n      form.setFieldsValue({ events: eventData.events });\r\n    } catch (error) {\r\n      console.error('Failed to fetch event:', error);\r\n      message.error('Failed to fetch event.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEvent();\r\n  }, [form]);\r\n\r\n  const handleChange = (newContent) => {\r\n    setEvents(newContent);\r\n    form.setFieldsValue({ events: newContent });\r\n  };\r\n\r\n  const onFinish = async () => {\r\n    try {\r\n      if (!eventId) {\r\n        message.error('No event ID available');\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      await axios.put(`/api/events/editEvent/${eventId}`, { events });\r\n      message.success('Event updated successfully!');\r\n      await fetchEvent();\r\n    } catch (error) {\r\n      console.error('Failed to update event:', error);\r\n      message.error('Failed to update event.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form form={form} layout=\"vertical\" onFinish={onFinish} name=\"event_form\">\r\n      <Form.Item name=\"events\" label=\"Event Description\" rules={[{ required: true, message: 'Please input the event details!' }]}> \r\n        <ReactQuill \r\n          value={events} \r\n          onChange={handleChange} \r\n          modules={{ toolbar: [['bold', 'italic', 'underline'], [{ list: 'ordered' }, { list: 'bullet' }], ['link', 'image']] }} \r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item>\r\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>Update Event</Button>\r\n        <Button onClick={fetchEvent} style={{ marginLeft: 8 }} loading={loading}>Refresh Data</Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default EventForm;"],"names":["EventForm","form","Form","useForm","events","setEvents","useState","eventId","setEventId","loading","setLoading","fetchEvent","async","eventData","axios","get","Date","getTime","data","_id","setFieldsValue","error","message","useEffect","layout","onFinish","put","success","name","children","jsx","Item","label","rules","required","ReactQuill","value","onChange","newContent","modules","toolbar","list","jsxs","Button","type","htmlType","onClick","style","marginLeft"],"mappings":"qXAMA,MAAMA,EAAY,KAChB,MAAOC,GAAQC,EAAKC,WACbC,EAAQC,GAAaC,EAAAA,SAAS,KAC9BC,EAASC,GAAcF,EAAAA,SAAS,OAChCG,EAASC,GAAcJ,EAAAA,UAAS,GAEjCK,EAAaC,UACb,IACFF,GAAW,GACL,MACAG,SADiBC,EAAMC,IAAI,2BAAA,IAA8BC,MAAOC,cAC3CC,KAAK,GAChCV,EAAWK,EAAUM,KACrBd,EAAUQ,EAAUT,QACpBH,EAAKmB,eAAe,CAAEhB,OAAQS,EAAUT,eACjCiB,GAEPC,EAAQD,MAAM,yBAAwB,CACtC,QACAX,GAAW,EAAK,GAIpBa,EAAAA,WAAU,KACGZ,GAAA,GACV,CAACV,IAyBJ,cACGC,EAAK,CAAAD,OAAYuB,OAAO,WAAWC,SAnBrBb,UACX,IACF,IAAKL,EAEH,YADAe,EAAQD,MAAM,yBAGhBX,GAAW,SACLI,EAAMY,IAAI,yBAAyBnB,IAAW,CAAEH,WACtDkB,EAAQK,QAAQ,qCACVhB,UACCU,GAEPC,EAAQD,MAAM,0BAAyB,CACvC,QACAX,GAAW,EAAK,GAKsCkB,KAAK,aAC3DC,SAAA,CAAAC,EAAAA,IAAC5B,EAAK6B,KAAL,CAAUH,KAAK,SAASI,MAAM,oBAAoBC,MAAO,CAAC,CAAEC,UAAU,EAAMZ,QAAS,oCACpFO,SAAAC,EAAAA,IAACK,EAAA,CACCC,MAAOhC,EACPiC,SA5BcC,IACpBjC,EAAUiC,GACVrC,EAAKmB,eAAe,CAAEhB,OAAQkC,GAAY,EA2BpCC,QAAS,CAAEC,QAAS,CAAC,CAAC,OAAQ,SAAU,aAAc,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAAa,CAAC,OAAQ,eAI9GC,EAAAA,KAACxC,EAAK6B,KAAL,CACCF,SAAA,CAAAC,MAACa,GAAOC,KAAK,UAAUC,SAAS,SAASpC,UAAkBoB,SAAY,iBACvEC,EAAAA,IAACa,EAAO,CAAAG,QAASnC,EAAYoC,MAAO,CAAEC,WAAY,GAAKvC,UAAkBoB,SAAY,sBAEzF"}