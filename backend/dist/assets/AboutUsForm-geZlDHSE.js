import{dQ as e,dR as s,dS as t,j as i,an as a}from"./main-CzSo-TQq.js";import{k as l,f as r,b as o}from"./vendor-BCMiqwDy.js";import{F as n}from"./index-DNifZJQ5.js";import{S as m}from"./index-D5p0e1mK.js";import{B as d}from"./Breadcrumb-CWo6S1TK.js";import{S as u}from"./index-B7eE-GBL.js";import{I as c}from"./index-DM93vOm6.js";import{B as p}from"./index-DSpNpUBy.js";import{U as g,R as j}from"./index-C3Salwgc.js";import{s as h}from"./index-9ZEY5nY4.js";import"./utils-ZFgnvnbw.js";import"./CheckCircleFilled-ReswMhjZ.js";import"./ExclamationCircleFilled-xRTYYEFC.js";import"./dropdown-Dz-q1Mre.js";import"./EllipsisOutlined-BfcsApT3.js";import"./getAllowClear-CUuit-6u.js";import"./CheckOutlined-Cn3WkZbn.js";import"./Input-dXXm4f2Q.js";import"./TextArea-BS9kE1Cd.js";import"./DeleteOutlined-BWd8Mtlr.js";import"./DownloadOutlined-xI3cqZd9.js";import"./InfoCircleFilled-CAKYzuNC.js";const x=()=>{const{id:x}=l(),b=r(),[f]=n.useForm(),[C,y]=o.useState([]),[F,I]=o.useState(""),[w,S]=o.useState(!1),{data:q,isLoading:D}=e(x),[k]=s(),[U]=t();o.useEffect((()=>{q&&(f.setFieldsValue({title:q.title,shortDescription:q.shortDescription,description:q.description,imageTitle:q.imageTitle,altName:q.altName,section:q.section,slug:q.slug}),I(q.slug),S(q.slug!==q.section.toLowerCase().replace(/\s+/g,"-")),q.image&&y([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${q.image}`}]))}),[q,f]),o.useEffect((()=>{const e=f.getFieldValue("section");if(e&&!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}}),[f.getFieldValue("section"),w]);const A={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},T={beforeUpload:e=>(e.type.startsWith("image/")||h.error("You can only upload image files!"),!1),onChange:({fileList:e})=>y(e),fileList:C};return D&&x?i.jsx(m,{size:"large"}):i.jsxs(i.Fragment,{children:[i.jsx(d,{items:[{title:"Dashboard",onClick:()=>b("/dashboard")},{title:"About Us",onClick:()=>b("/about-us-table")},{title:x?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),i.jsxs(n,{form:f,layout:"vertical",onFinish:async e=>{try{const s=new FormData;s.append("title",e.title),s.append("shortDescription",e.shortDescription),s.append("description",e.description),s.append("imageTitle",e.imageTitle),s.append("altName",e.altName),s.append("section",e.section),s.append("slug",e.slug),C[0]?.originFileObj&&s.append("image",C[0].originFileObj),x?(await U({id:x,formData:s}).unwrap(),h.success("About Us updated successfully")):(await k(s).unwrap(),h.success("About Us created successfully")),b("/about-us-table")}catch(s){const e=s.data?.error||`Failed to ${x?"update":"create"} About Us entry`;h.error(e)}},children:[i.jsx(n.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:i.jsxs(u,{placeholder:"Select a section",onChange:e=>{if(!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}},children:[i.jsx(u.Option,{value:"Introduction",children:"Introduction"}),i.jsx(u.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),i.jsx(n.Item,{name:"slug",label:i.jsxs("span",{children:["Slug",i.jsx(p,{type:"link",size:"small",onClick:()=>{if(S(!w),w){const e=f.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");I(e),f.setFieldsValue({slug:e})}else{const e=f.getFieldValue("slug");I(e)}},style:{marginLeft:8},children:w?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:i.jsx(c,{disabled:!w,onChange:e=>{w&&I(e.target.value)}})}),i.jsx(n.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:i.jsx(a,{modules:A,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:i.jsx(a,{modules:A,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:i.jsx(g,{...T,listType:"picture",children:i.jsx(p,{icon:i.jsx(j,{}),children:x?"Change Image":"Click to Upload"})})}),i.jsx(n.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{children:i.jsx(p,{type:"primary",htmlType:"submit",children:x?"Update":"Submit"})})]})]})};export{x as default};
//# sourceMappingURL=AboutUsForm-geZlDHSE.js.map
