import{u as w,cv as x,cw as y,j as t}from"./index-CyqvOuOg-1746419818373.js";import{B as j}from"./Breadcrumb-h00BRZ3S-1746419818373.js";import{B as A}from"./index-C3bxH8TE-1746419818373.js";import{R as b}from"./PlusOutlined-C8r_o3T9-1746419818373.js";import{F as k}from"./Table-DNU6tJlT-1746419818373.js";import{R as g}from"./DownloadOutlined-CrMw7hxn-1746419818373.js";import{S as R}from"./index-R-DGswdm-1746419818373.js";import{R as C}from"./EditOutlined-S3Kuo6u_-1746419818373.js";import{R as v}from"./DeleteOutlined-xaaXUUdW-1746419818373.js";import{s}from"./index-DOojfaHn-1746419818373.js";import{M as D}from"./index-BiU0vhjs-1746419818373.js";import"./AntdIcon-DOEEMSan-1746419818373.js";import"./extends-rM07bN2b-1746419818373.js";import"./dropdown-DkYwa0fm-1746419818373.js";import"./EllipsisOutlined-BoRLgxJq-1746419818373.js";import"./toArray-CKiapHOW-1746419818373.js";import"./addEventListener-BJmGQME6-1746419818373.js";import"./index-CJudDC91-1746419818373.js";import"./getAllowClear-CJDPFZL7-1746419818373.js";import"./CheckOutlined-C7ruoH1q-1746419818373.js";import"./Input-CWHKnMyb-1746419818373.js";import"./CheckCircleFilled-BDwN-65_-1746419818373.js";import"./ExclamationCircleFilled-LLNef6Rn-1746419818373.js";import"./InfoCircleFilled-DJPoA66N-1746419818373.js";import"./ActionButton-jxmHW1s9-1746419818373.js";import"./index-BnTgH2_J-1746419818373.js";import"./index-BMkDlJCN-1746419818373.js";import"./fade-C4OWX2yR-1746419818373.js";import"./Skeleton-C_OHlkWw-1746419818373.js";const re=()=>{const i=w(),{data:a,isLoading:c}=x(),[d]=y(),p=o=>{i(`/career/edit/${o._id}`)},m=o=>{D.confirm({title:"Are you sure you want to delete this application?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{await d(o).unwrap(),s.success("Application deleted successfully!")}catch(e){s.error(e.message||"Something went wrong")}}})},f=async o=>{try{const e=o.split("/").pop(),n=await fetch(`/api/image/pdf/download/${e}`);if(!n.ok)throw new Error("Download failed");const h=await n.blob(),l=window.URL.createObjectURL(h),r=document.createElement("a");r.href=l,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l)}catch(e){s.error("Failed to download file"),console.error("Download error:",e)}},u=[{title:"Info",key:"info",render:(o,e)=>t.jsxs("div",{children:[t.jsx("strong",{children:e.name}),t.jsx("div",{children:e.contactNo}),t.jsx("div",{style:{color:"#666"},children:e.address})]}),sorter:(o,e)=>o.name.localeCompare(e.name)},{title:"Email",dataIndex:"email",key:"email"},{title:"Post Applied For",dataIndex:"postAppliedFor",key:"postAppliedFor",sorter:(o,e)=>o.postAppliedFor.localeCompare(e.postAppliedFor)},{title:"Resume",key:"resume",render:(o,e)=>t.jsx(g,{onClick:()=>f(e.resumeFile),style:{cursor:"pointer",color:"#1890ff"}})},{title:"Applied Date",dataIndex:"createdAt",key:"createdAt",render:o=>new Date(o).toLocaleDateString(),sorter:(o,e)=>new Date(o.createdAt)-new Date(e.createdAt)},{title:"Actions",key:"actions",render:(o,e)=>t.jsxs(R,{size:"middle",children:[t.jsx(C,{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>p(e)}),t.jsx(v,{style:{color:"#ff4d4f",cursor:"pointer"},onClick:()=>m(e._id)})]})}];return t.jsxs("div",{children:[t.jsx(j,{items:[{title:t.jsx("span",{onClick:()=>i("/dashboard"),className:"cursor-pointer",children:"Dashboard"})},{title:"Career Applications"}],className:"mb-4"}),t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsx("div",{className:"text-2xl font-semibold",children:"Career List "}),t.jsx(A,{type:"primary",icon:t.jsx(b,{}),onClick:()=>i("/career/add"),style:{marginBottom:"16px"},className:"float-right",children:"Add New Application"})]}),t.jsx(k,{columns:u,dataSource:(a==null?void 0:a.data)||[],loading:c,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:o=>`Total ${o} applications`},scroll:{x:!0}})]})};export{re as default};
