import{bF as e,j as a}from"./main-DbCIA5nM.js";import{f as i,b as s,L as l,R as t}from"./vendor-X2E3PIZN.js";import{R as r}from"./quill.snow-BtYlbvM3.js";import{a as n}from"./utils-ZFgnvnbw.js";import{F as o}from"./index-BGrTmilS.js";import{B as d}from"./Breadcrumb-DZWgOyzs.js";import{R as m}from"./HomeOutlined-qdt4-xZj.js";import{S as p}from"./index-TlfG7RwS.js";import{U as j,R as c}from"./index-1EwFYQPN.js";import{B as u}from"./index-CvhnQ2ZS.js";import{I as h}from"./index-C8xsCgg9.js";import{s as x}from"./index-BQxUT-WV.js";import"./isEqual-12EnfSUl.js";import"./toArray-DIarnBRF.js";import"./objectSpread2-C2mPdFQ-.js";import"./AntdIcon-Bc_RgQsY.js";import"./index-BJvm14ET.js";import"./CheckCircleFilled-vSnFSXRd.js";import"./ExclamationCircleFilled-jOtwz4nB.js";import"./dropdown-C2Lyn6ws.js";import"./index-Cie-PtDs.js";import"./getAllowClear-CF0z5FWe.js";import"./CheckOutlined-qoM0f-f3.js";import"./Input-DzV7KJ8a.js";import"./fade-CZ8b_ilM.js";import"./DeleteOutlined-D5hKN4qo.js";import"./DownloadOutlined-B6iPWVSX.js";import"./EyeOutlined-D6toRaq1.js";import"./TextArea-BQkixvnv.js";import"./InfoCircleFilled-BiVI0bqr.js";const{Option:g}=p,f=()=>{const f=i(),[b]=o.useForm(),[F]=e(),[y,I]=s.useState(null),[O,w]=s.useState([]),[C,N]=s.useState(!0);s.useEffect((()=>{(async()=>{try{const e=await n.get("/api/menulist/get-menu");e.data.success?w(e.data.data):x.error("Failed to load menu list")}catch(e){x.error("Error fetching menu list")}finally{N(!1)}})()}),[]);return a.jsxs("div",{children:[a.jsxs(d,{style:{padding:"16px 24px"},children:[a.jsx(d.Item,{children:a.jsxs(l,{to:"/dashboard",children:[a.jsx(m,{})," Dashboard"]})}),a.jsx(d.Item,{children:a.jsx(l,{to:"/banner-table",children:"Banner Management"})}),a.jsx(d.Item,{children:"Add New Banner"})]}),a.jsxs("div",{style:{padding:"24px"},children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),a.jsxs(o,{form:b,layout:"vertical",onFinish:async e=>{try{const a=new FormData;if(!e.image?.[0]?.originFileObj)return void x.error("Please select an image");if(a.append("image",e.image[0].originFileObj),a.append("imgName",e.imgName),!e.photo?.[0]?.originFileObj)return void x.error("Please select a photo");a.append("photo",e.photo[0].originFileObj),a.append("title",e.title),a.append("altName",e.altName),a.append("details",e.details),a.append("pageSlug",e.pageSlug),await F(a),x.success("Banner created successfully"),f("/banner-table")}catch(a){x.error("Failed to create banner")}},children:[a.jsx(o.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:a.jsx(p,{placeholder:"Select a menu item",loading:C,children:O.map((e=>(e=>a.jsxs(t.Fragment,{children:[a.jsx(g,{value:e.parent.path,style:{fontWeight:"bold"},children:e.parent.name}),e.children.map((e=>a.jsxs(t.Fragment,{children:[a.jsxs(g,{value:e.path,style:{paddingLeft:20},children:[a.jsx("span",{children:" ├── "}),e.name]}),e.subChildren.map((e=>a.jsxs(g,{value:e.path,style:{paddingLeft:40},children:[a.jsx("span",{children:"├────"})," ",e.name]},e._id)))]},e._id)))]},e._id))(e)))})}),a.jsx(o.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:a.jsx(j,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:e=>{const a=e.fileList[0];if(a?.originFileObj){const i=new FileReader;i.onload=()=>{I(i.result)},i.readAsDataURL(a.originFileObj),b.setFieldsValue({image:e.fileList})}else I(null)},children:a.jsx(u,{icon:a.jsx(c,{}),children:"Upload Image"})})}),a.jsx(o.Item,{name:"photo",label:"Photo",rules:[{required:!0,message:"Please upload a photo!"}],children:a.jsx(j,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:e=>{const a=e.fileList[0];if(a?.originFileObj){const i=new FileReader;i.onload=()=>{I(i.result)},i.readAsDataURL(a.originFileObj),b.setFieldsValue({photo:e.fileList})}else I(null)},children:a.jsx(u,{icon:a.jsx(c,{}),children:"Upload Photo"})})}),a.jsx(o.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:a.jsx(h,{})}),a.jsx(o.Item,{name:"title",label:"Title",children:a.jsx(h,{})}),a.jsx(o.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:a.jsx(h,{})}),a.jsx(o.Item,{name:"details",label:"Details",children:a.jsx(r,{theme:"snow"})}),a.jsx(o.Item,{children:a.jsx(u,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{f as default};
//# sourceMappingURL=AddBannerForm-Dwn2fz5V.js.map
