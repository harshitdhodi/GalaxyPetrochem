import{r as u,g as q,u as B,cJ as w,cK as A,cL as F,cM as R,j as e}from"./index-CyqvOuOg-1746419818373.js";import{F as t}from"./index-DzvSw93u-1746419818373.js";import{C as a}from"./index-Wxo8bQb3-1746419818373.js";import{I as i}from"./index-Cw6CtmGJ-1746419818373.js";import{S as x}from"./index-R-DGswdm-1746419818373.js";import{_ as z}from"./extends-rM07bN2b-1746419818373.js";import{I as O}from"./AntdIcon-DOEEMSan-1746419818373.js";import{B as m}from"./index-C3bxH8TE-1746419818373.js";import{R as j}from"./PlusOutlined-C8r_o3T9-1746419818373.js";import"./toArray-CKiapHOW-1746419818373.js";import"./index-BMkDlJCN-1746419818373.js";import"./CheckCircleFilled-BDwN-65_-1746419818373.js";import"./ExclamationCircleFilled-LLNef6Rn-1746419818373.js";import"./Skeleton-C_OHlkWw-1746419818373.js";import"./EllipsisOutlined-BoRLgxJq-1746419818373.js";import"./getAllowClear-CJDPFZL7-1746419818373.js";import"./Input-CWHKnMyb-1746419818373.js";import"./EyeOutlined-Bhs2_IEd-1746419818373.js";import"./TextArea-DXtIHlV4-1746419818373.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},G=function(d,n){return u.createElement(O,z({},d,{ref:n,icon:U}))},g=u.forwardRef(G);const ae=()=>{const{id:r}=q(),d=B(),[n]=t.useForm(),{data:o,isLoading:f}=w(r,{skip:!r}),{refetch:b}=A(),[C]=F(),[M]=R();u.useEffect(()=>{o&&n.setFieldsValue(o.data)},[o,n]);const L=async s=>{r?await M({id:r,...s}):await C(s),await b(),d("/menu-listing-table")};return f?e.jsx("p",{children:"Loading..."}):e.jsx(a,{title:r?"Update Menu Listing":"Create Menu Listing",bordered:!1,children:e.jsxs(t,{form:n,layout:"vertical",onFinish:L,initialValues:{children:[]},children:[e.jsxs(a,{title:"Parent Menu",bordered:!0,style:{marginBottom:"20px"},children:[e.jsx(t.Item,{name:["parent","name"],label:"Name",rules:[{required:!0,message:"Please enter parent menu name"}],children:e.jsx(i,{placeholder:"Enter parent menu name"})}),e.jsx(t.Item,{name:["parent","path"],label:"Path",rules:[{required:!0,message:"Please enter parent menu path"}],children:e.jsx(i,{placeholder:"Enter parent menu path"})})]}),e.jsx(t.List,{name:"children",children:(s,{add:y,remove:E})=>e.jsxs(a,{title:"Children Menus",bordered:!0,children:[s.map(({key:I,name:l,...h})=>e.jsxs(a,{bordered:!0,style:{marginBottom:"15px"},children:[e.jsxs(x,{align:"baseline",children:[e.jsx(t.Item,{...h,name:[l,"name"],label:"Child Name",rules:[{required:!0,message:"Enter child name"}],children:e.jsx(i,{placeholder:"Enter child name"})}),e.jsx(t.Item,{...h,name:[l,"path"],label:"Child Path",rules:[{required:!0,message:"Enter child path"}],children:e.jsx(i,{placeholder:"Enter child path"})}),e.jsx(g,{onClick:()=>E(l)})]}),e.jsx(t.List,{name:[l,"subChildren"],children:(v,{add:k,remove:S})=>e.jsxs(a,{title:"Sub-Children",bordered:!0,children:[v.map(({key:P,name:c,...p})=>e.jsxs(x,{align:"baseline",children:[e.jsx(t.Item,{...p,name:[c,"name"],label:"Sub-Child Name",rules:[{required:!0,message:"Enter sub-child name"}],children:e.jsx(i,{placeholder:"Enter sub-child name"})}),e.jsx(t.Item,{...p,name:[c,"path"],label:"Sub-Child Path",rules:[{required:!0,message:"Enter sub-child path"}],children:e.jsx(i,{placeholder:"Enter sub-child path"})}),e.jsx(g,{onClick:()=>S(c)})]},P)),e.jsx(m,{type:"dashed",onClick:()=>k(),block:!0,icon:e.jsx(j,{}),children:"Add Sub-Child"})]})})]},I)),e.jsx(m,{type:"dashed",onClick:()=>y(),block:!0,icon:e.jsx(j,{}),children:"Add Child"})]})}),e.jsx(m,{type:"primary",htmlType:"submit",style:{marginTop:"20px"},children:r?"Update":"Create"})]})})};export{ae as default};
