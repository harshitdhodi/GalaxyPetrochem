import{c8 as i,c9 as e,ca as a,j as s}from"./main-DbCIA5nM.js";import{f as r,j as t,b as o,L as n}from"./vendor-X2E3PIZN.js";import{F as l}from"./index-BGrTmilS.js";import{B as m}from"./Breadcrumb-DZWgOyzs.js";import{I as d}from"./index-C8xsCgg9.js";import{U as c,R as p}from"./index-1EwFYQPN.js";import{B as j}from"./index-CvhnQ2ZS.js";import{s as u}from"./index-BQxUT-WV.js";import"./utils-ZFgnvnbw.js";import"./toArray-DIarnBRF.js";import"./objectSpread2-C2mPdFQ-.js";import"./AntdIcon-Bc_RgQsY.js";import"./index-BJvm14ET.js";import"./CheckCircleFilled-vSnFSXRd.js";import"./ExclamationCircleFilled-jOtwz4nB.js";import"./dropdown-C2Lyn6ws.js";import"./index-Cie-PtDs.js";import"./getAllowClear-CF0z5FWe.js";import"./Input-DzV7KJ8a.js";import"./EyeOutlined-D6toRaq1.js";import"./TextArea-BQkixvnv.js";import"./fade-CZ8b_ilM.js";import"./DeleteOutlined-D5hKN4qo.js";import"./DownloadOutlined-B6iPWVSX.js";import"./CheckOutlined-qoM0f-f3.js";import"./InfoCircleFilled-BiVI0bqr.js";const x=()=>{const[x]=l.useForm(),h=r(),{id:f}=t(),{data:g,isLoading:y,refetch:F}=i(f,{skip:!f}),[b]=e(),[k]=a(),[v,I]=o.useState([]);o.useEffect((()=>{g&&(x.setFieldsValue(g),I([{url:`/api/logo/download/${g.icon}`,name:g.icon}]))}),[g,x]);return s.jsxs(s.Fragment,{children:[s.jsxs(m,{style:{marginBottom:"16px"},children:[s.jsx(m.Item,{children:s.jsx(n,{to:"/dashboard",children:"Dashboard"})}),s.jsx(m.Item,{children:s.jsx(n,{to:"/navigationLink",children:"Navigation Links"})}),s.jsx(m.Item,{children:f?"Edit Navigation Link":"Add Navigation Link"})]}),s.jsxs(l,{form:x,layout:"vertical",onFinish:async i=>{const e=new FormData;e.append("name",i.name),v[0]?.originFileObj&&e.append("icon",v[0].originFileObj);try{f?(await k({id:f,formData:e}).unwrap(),u.success("Navigation link updated successfully"),await F()):(await b(e).unwrap(),u.success("Navigation link created successfully")),h("/navigationLink")}catch(a){u.error("Failed to save navigation link")}},children:[s.jsx(l.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the name"}],children:s.jsx(d,{})}),s.jsx(l.Item,{name:"icon",label:"Icon",rules:[{required:!0,message:"Please upload an icon"}],children:s.jsx(c,{listType:"picture",maxCount:1,fileList:v,beforeUpload:()=>!1,onChange:({fileList:i})=>I(i),children:s.jsx(j,{icon:s.jsx(p,{}),children:"Upload Icon"})})}),s.jsx(l.Item,{children:s.jsx(j,{type:"primary",htmlType:"submit",loading:y,children:f?"Update":"Create"})})]})]})};export{x as default};
//# sourceMappingURL=NavigationLinkForm-CQZS1leH.js.map
